(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(b,d){var m,f,e,l=b.nodeName.toLowerCase();return"area"===l?(m=b.parentNode,f=m.name,b.href&&f&&"map"===m.nodeName.toLowerCase()?(e=a("img[usemap='#"+f+"']")[0],!!e&&c(e)):!1):(/input|select|textarea|button|object/.test(l)?!b.disabled:"a"===l?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}
a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,f=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:f.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==
c&&b.length?b:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},
tabbable:function(c){var d=a.attr(c,"tabindex"),m=isNaN(d);return(m||0<=d)&&b(c,!m)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,g,k){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0;g&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);k&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===c?["Left","Right"]:["Top","Bottom"],e=c.toLowerCase(),l={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?l["inner"+c].call(this):this.each(function(){a(this).css(e,d(this,b)+"px")})};a.fn["outer"+c]=function(b,g){return"number"!=typeof b?l["outer"+c].call(this,b):this.each(function(){a(this).css(e,d(this,b,!0,g)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?
b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){var c,d;for(b=a(this[0]);b.length&&b[0]!==document;){if(c=b.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(b.css("zIndex"),10),!isNaN(d)&&0!==d))return d;b=b.parent()}}return 0}});a.ui.plugin={add:function(b,c,d){var f;b=a.ui[b].prototype;for(f in d)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([c,d[f]])},call:function(a,
b,c,d){if((b=a.plugins[b])&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(d=0;b.length>d;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,f,e;for(e=0;null!=(f=c[e]);e++)try{(d=a._data(f,"events"))&&d.remove&&a(f).triggerHandler("remove")}catch(l){}b(c)}}(a.cleanData);a.widget=function(b,c,d){var f,e,l,n,s={},h=b.split(".")[0];return b=b.split(".")[1],f=h+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f.toLowerCase()]=
function(b){return!!a.data(b,f)},a[h]=a[h]||{},e=a[h][b],l=a[h][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new l(a,b)},a.extend(l,e,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),n=new c,n.options=a.widget.extend({},n.options),a.each(d,function(b,g){return a.isFunction(g)?(s[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,
k=this._superApply;return this._super=a,this._superApply=d,b=g.apply(this,arguments),this._super=c,this._superApply=k,b}}(),void 0):(s[b]=g,void 0)}),l.prototype=a.widget.extend(n,{widgetEventPrefix:e?n.widgetEventPrefix||b:b},s,{constructor:l,namespace:h,widgetName:b,widgetFullName:f}),e?(a.each(e._childConstructors,function(b,c){var g=c.prototype;a.widget(g.namespace+"."+g.widgetName,l,c._proto)}),delete e._childConstructors):c._childConstructors.push(l),a.widget.bridge(b,l),l};a.widget.extend=
function(b){for(var c,d,f=e.call(arguments,1),q=0,l=f.length;l>q;q++)for(c in f[q])d=f[q][c],f[q].hasOwnProperty(c)&&void 0!==d&&(b[c]=a.isPlainObject(d)?a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):d);return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var q="string"==typeof f,l=e.call(arguments,1),n=this;return f=!q&&l.length?a.widget.extend.apply(null,[f].concat(l)):f,q?this.each(function(){var c,k=a.data(this,d);return"instance"===
f?(n=k,!1):k?a.isFunction(k[f])&&"_"!==f.charAt(0)?(c=k[f].apply(k,l),c!==k&&void 0!==c?(n=c&&c.jquery?n.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))}),n}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",
widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?
c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+
"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,f,e,l=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(l={},d=b.split("."),b=d.shift(),d.length){f=l[b]=a.widget.extend({},this.options[b]);for(e=0;d.length-1>e;e++)f[d[e]]=f[d[e]]||{},f=f[d[e]];if(b=d.pop(),1===arguments.length)return void 0===
f[b]?null:f[b];f[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];l[b]=c}return this._setOptions(l),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var f,e=this;"boolean"!=typeof b&&(d=c,c=b,b=!1);d?(c=f=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,f=this.widget());a.each(d,function(d,m){function s(){return b||!0!==e.options.disabled&&!a(this).hasClass("ui-state-disabled")?("string"==typeof m?e[m]:m).apply(e,arguments):void 0}"string"!=typeof m&&(s.guid=m.guid=m.guid||s.guid||a.guid++);var h=d.match(/^([\w:-]*)\s*(.*)$/),t=h[1]+e.eventNamespace;(h=
h[2])?f.delegate(h,t,s):c.bind(t,s)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"==typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=
this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var f,e=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],b=c.originalEvent)for(f in b)f in c||(c[f]=b[f]);return this.element.trigger(c,d),!(a.isFunction(e)&&!1===e.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};
a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,f,e){"string"==typeof f&&(f={effect:f});var l,n=f?!0===f||"number"==typeof f?c:f.effect||c:b;f=f||{};"number"==typeof f&&(f={duration:f});l=!a.isEmptyObject(f);f.complete=e;f.delay&&d.delay(f.delay);l&&a.effects&&a.effects.effect[n]?d[b](f):n!==b&&d[n]?d[n](f.duration,f.easing,e):d.queue(function(c){a(this)[b]();e&&e.call(d[0]);c()})}});a.widget;var f=!1;a(document).mouseup(function(){f=!1});a.widget("ui.mouse",
{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&
this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=
!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,
this._mouseUpDelegate),b.preventDefault(),f=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):b.which?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return this.document.unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),f=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},
_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function b(a,c,g){return[parseFloat(a[0])*(w.test(a[0])?c/100:1),parseFloat(a[1])*(w.test(a[1])?g/100:1)]}function c(b){var g=b[0];return 9===g.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(g)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:g.preventDefault?{width:0,height:0,offset:{top:g.pageY,left:g.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),
offset:b.offset()}}a.ui=a.ui||{};var d,f,e=Math.max,l=Math.abs,n=Math.round,s=/left|center|right/,h=/top|center|bottom/,t=/[\+\-]\d+(\.[\d]+)?%?/,v=/^\w+/,w=/%$/,x=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==d)return d;var b,c,g=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),k=g.children()[0];return a("body").append(g),b=k.offsetWidth,g.css("overflow","scroll"),c=k.offsetWidth,b===c&&
(c=g[0].clientWidth),g.remove(),d=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),g=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),c="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth;return{width:"scroll"===g||"auto"===g&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:c?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var c=a.isWindow(b[0]),g=!!b[0]&&9===b[0].nodeType;return{element:b,isWindow:c,
isDocument:g,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c||g?b.width():b.outerWidth(),height:c||g?b.height():b.outerHeight()}}};a.fn.position=function(d){if(!d||!d.of)return x.apply(this,arguments);d=a.extend({},d);var m,u,w,C,z,D,E=a(d.of),O=a.position.getWithinInfo(d.within),Z=a.position.getScrollInfo(O),P=(d.collision||"flip").split(" "),H={};return D=c(E),E[0].preventDefault&&(d.at="left top"),u=D.width,w=D.height,C=D.offset,z=a.extend({},C),a.each(["my",
"at"],function(){var a,b,c=(d[this]||"").split(" ");1===c.length&&(c=s.test(c[0])?c.concat(["center"]):h.test(c[0])?["center"].concat(c):["center","center"]);c[0]=s.test(c[0])?c[0]:"center";c[1]=h.test(c[1])?c[1]:"center";a=t.exec(c[0]);b=t.exec(c[1]);H[this]=[a?a[0]:0,b?b[0]:0];d[this]=[v.exec(c[0])[0],v.exec(c[1])[0]]}),1===P.length&&(P[1]=P[0]),"right"===d.at[0]?z.left+=u:"center"===d.at[0]&&(z.left+=u/2),"bottom"===d.at[1]?z.top+=w:"center"===d.at[1]&&(z.top+=w/2),m=b(H.at,u,w),z.left+=m[0],z.top+=
m[1],this.each(function(){var c,k,h=a(this),s=h.outerWidth(),x=h.outerHeight(),t=parseInt(a.css(this,"marginLeft"),10)||0,v=parseInt(a.css(this,"marginTop"),10)||0,D=s+t+(parseInt(a.css(this,"marginRight"),10)||0)+Z.width,R=x+v+(parseInt(a.css(this,"marginBottom"),10)||0)+Z.height,F=a.extend({},z),N=b(H.my,h.outerWidth(),h.outerHeight());"right"===d.my[0]?F.left-=s:"center"===d.my[0]&&(F.left-=s/2);"bottom"===d.my[1]?F.top-=x:"center"===d.my[1]&&(F.top-=x/2);F.left+=N[0];F.top+=N[1];f||(F.left=n(F.left),
F.top=n(F.top));c={marginLeft:t,marginTop:v};a.each(["left","top"],function(b,g){a.ui.position[P[b]]&&a.ui.position[P[b]][g](F,{targetWidth:u,targetHeight:w,elemWidth:s,elemHeight:x,collisionPosition:c,collisionWidth:D,collisionHeight:R,offset:[m[0]+N[0],m[1]+N[1]],my:d.my,at:d.at,within:O,elem:h})});d.using&&(k=function(a){var b=C.left-F.left,c=b+u-s,g=C.top-F.top,k=g+w-x,f={target:{element:E,left:C.left,top:C.top,width:u,height:w},element:{element:h,left:F.left,top:F.top,width:s,height:x},horizontal:0>
c?"left":0<b?"right":"center",vertical:0>k?"top":0<g?"bottom":"middle"};s>u&&u>l(b+c)&&(f.horizontal="center");x>w&&w>l(g+k)&&(f.vertical="middle");f.important=e(l(b),l(c))>e(l(g),l(k))?"horizontal":"vertical";d.using.call(this,a,f)});h.offset(a.extend(F,{using:k}))})};a.ui.position={fit:{left:function(a,b){var c,g=b.within,d=g.isWindow?g.scrollLeft:g.offset.left,g=g.width,k=a.left-b.collisionPosition.marginLeft,f=d-k,m=k+b.collisionWidth-g-d;b.collisionWidth>g?0<f&&0>=m?(c=a.left+f+b.collisionWidth-
g-d,a.left+=f-c):a.left=0<m&&0>=f?d:f>m?d+g-b.collisionWidth:d:0<f?a.left+=f:0<m?a.left-=m:a.left=e(a.left-k,a.left)},top:function(a,b){var c,g=b.within,g=g.isWindow?g.scrollTop:g.offset.top,d=b.within.height,k=a.top-b.collisionPosition.marginTop,f=g-k,m=k+b.collisionHeight-d-g;b.collisionHeight>d?0<f&&0>=m?(c=a.top+f+b.collisionHeight-d-g,a.top+=f-c):a.top=0<m&&0>=f?g:f>m?g+d-b.collisionHeight:g:0<f?a.top+=f:0<m?a.top-=m:a.top=e(a.top-k,a.top)}},flip:{left:function(a,b){var c,g,d=b.within,k=d.offset.left+
d.scrollLeft,f=d.width,d=d.isWindow?d.scrollLeft:d.offset.left,e=a.left-b.collisionPosition.marginLeft,m=e-d,e=e+b.collisionWidth-f-d,h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,q="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,r=-2*b.offset[0];0>m?(c=a.left+h+q+r+b.collisionWidth-f-k,(0>c||l(m)>c)&&(a.left+=h+q+r)):0<e&&(g=a.left-b.collisionPosition.marginLeft+h+q+r-d,(0<g||e>l(g))&&(a.left+=h+q+r))},top:function(a,b){var c,g,d=b.within,k=d.offset.top+d.scrollTop,
f=d.height,d=d.isWindow?d.scrollTop:d.offset.top,e=a.top-b.collisionPosition.marginTop,m=e-d,e=e+b.collisionHeight-f-d,h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,q="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,r=-2*b.offset[1];0>m?(g=a.top+h+q+r+b.collisionHeight-f-k,a.top+h+q+r>m&&(0>g||l(m)>g)&&(a.top+=h+q+r)):0<e&&(c=a.top-b.collisionPosition.marginTop+h+q+r-d,a.top+h+q+r>e&&(0<c||e>l(c))&&(a.top+=h+q+r))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,
arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,c,g,d,k=document.getElementsByTagName("body")[0];g=document.createElement("div");b=document.createElement(k?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};k&&a.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(d in c)b.style[d]=c[d];b.appendChild(g);c=k||document.documentElement;
c.insertBefore(b,c.firstChild);g.style.cssText="position: absolute; left: 10.7432222px;";g=a(g).offset().left;f=10<g&&11>g;b.innerHTML="";c.removeChild(b)})()})();a.ui.position;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,
scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===
a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(f){}return this.helper||
d.disabled||0<a(b.target).closest(".ui-resizable-handle").length?!1:(this.handle=this._getHandle(b),this.handle?(a(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),
this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-
this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,
b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=
this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()}):!1!==this._trigger("stop",b)&&this._clear(),!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},
_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){"string"==
typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),
c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=
this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||
0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,f=this.options,e=this.document[0];return this.relativeContainer=null,f.containment?"window"===f.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-
this.margins.left,a(window).scrollTop()+(a(window).height()||e.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===f.containment?(this.containment=[0,0,a(e).width()-this.helperProportions.width-this.margins.left,(a(e).height()||e.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):f.containment.constructor===Array?(this.containment=f.containment,void 0):("parent"===f.containment&&(f.containment=this.helper[0].parentNode),
c=a(f.containment),d=c[0],d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-
(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c),void 0):(this.containment=null,void 0)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+
this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,f,e,n=this.options,s=this._isRootNode(this.scrollParent[0]),h=a.pageX,t=a.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+
d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(h=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(t=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(h=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(t=c[3]+this.offset.click.top)),n.grid&&(f=n.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,t=c?f-this.offset.click.top>=c[1]||
f-this.offset.click.top>c[3]?f:f-this.offset.click.top>=c[1]?f-n.grid[1]:f+n.grid[1]:f,e=n.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,h=c?e-this.offset.click.left>=c[0]||e-this.offset.click.left>c[2]?e:e-this.offset.click.left>=c[0]?e-n.grid[0]:e+n.grid[0]:e),"y"===n.axis&&(h=this.originalPageX),"x"===n.axis&&(t=this.originalPageY)),{top:t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:
s?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,
d,this],!0),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var f=d.options,e=a.extend({},c,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&
(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var f=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",
left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,f))})},drag:function(b,c,d){var f=this;a.each(d.sortables,function(){var e=!1,l=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,
this.instance.offset.click=d.offset.click,this!==l&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(l.instance.element[0],this.instance.element[0])&&(e=!1),e}));e?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(f).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],
this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):
this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){b=a("body");d=d.options;
b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(b,c,d){b=d.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("opacity")&&(d._opacity=b.css("opacity"));b.css("opacity",d.opacity)},stop:function(b,c,d){b=d.options;b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=
c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){c=d.options;var f=!1,e=d.scrollParentNotHidden[0],l=d.document[0];e!==l&&"HTML"!==e.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+e.offsetHeight-b.pageY<c.scrollSensitivity?e.scrollTop=f=e.scrollTop+c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(e.scrollTop=f=e.scrollTop-c.scrollSpeed)),
c.axis&&"y"===c.axis||(d.overflowOffset.left+e.offsetWidth-b.pageX<c.scrollSensitivity?e.scrollLeft=f=e.scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(e.scrollLeft=f=e.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(b.pageY-a(l).scrollTop()<c.scrollSensitivity?f=a(l).scrollTop(a(l).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(l).scrollTop())<c.scrollSensitivity&&(f=a(l).scrollTop(a(l).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(b.pageX-a(l).scrollLeft()<
c.scrollSensitivity?f=a(l).scrollLeft(a(l).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(l).scrollLeft())<c.scrollSensitivity&&(f=a(l).scrollLeft(a(l).scrollLeft()+c.scrollSpeed))));!1!==f&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){b=d.options;d.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,
width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var f,e,l,n,s,h,t,v,w,x,A=d.options,y=A.snapTolerance,u=c.offset.left,B=u+d.helperProportions.width,C=c.offset.top,z=C+d.helperProportions.height;for(w=d.snapElements.length-1;0<=w;w--)s=d.snapElements[w].left,h=s+d.snapElements[w].width,t=d.snapElements[w].top,v=t+d.snapElements[w].height,s-y>B||u>h+y||t-y>z||C>v+y||!a.contains(d.snapElements[w].item.ownerDocument,d.snapElements[w].item)?(d.snapElements[w].snapping&&
d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[w].item})),d.snapElements[w].snapping=!1):("inner"!==A.snapMode&&(f=y>=Math.abs(t-z),e=y>=Math.abs(v-C),l=y>=Math.abs(s-B),n=y>=Math.abs(h-u),f&&(c.position.top=d._convertPositionTo("relative",{top:t-d.helperProportions.height,left:0}).top-d.margins.top),e&&(c.position.top=d._convertPositionTo("relative",{top:v,left:0}).top-d.margins.top),l&&(c.position.left=d._convertPositionTo("relative",
{top:0,left:s-d.helperProportions.width}).left-d.margins.left),n&&(c.position.left=d._convertPositionTo("relative",{top:0,left:h}).left-d.margins.left)),x=f||e||l||n,"outer"!==A.snapMode&&(f=y>=Math.abs(t-C),e=y>=Math.abs(v-z),l=y>=Math.abs(s-u),n=y>=Math.abs(h-B),f&&(c.position.top=d._convertPositionTo("relative",{top:t,left:0}).top-d.margins.top),e&&(c.position.top=d._convertPositionTo("relative",{top:v-d.helperProportions.height,left:0}).top-d.margins.top),l&&(c.position.left=d._convertPositionTo("relative",
{top:0,left:s}).left-d.margins.left),n&&(c.position.left=d._convertPositionTo("relative",{top:0,left:h-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[w].snapping&&(f||e||l||n||x)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[w].item})),d.snapElements[w].snapping=f||e||l||n||x)}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var f;b=a.makeArray(a(d.options.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),
10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});b.length&&(f=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",f+b)}),this.css("zIndex",f+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("zIndex")&&(d._zIndex=b.css("zIndex"));b.css("zIndex",d.zIndex)},stop:function(b,c,d){b=d.options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}});a.ui.draggable;a.widget("ui.droppable",{version:"1.11.1",widgetEventPrefix:"drop",
options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1;this.isout=!0;this.accept=a.isFunction(d)?d:function(a){return a.is(d)};this.proportions=function(){return arguments.length?(b=arguments[0],void 0):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(c.scope);c.addClasses&&
this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[];a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){this._splice(a.ui.ddmanager.droppables[this.options.scope]);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b?this.accept=a.isFunction(c)?c:function(a){return a.is(c)}:"scope"===b&&(this._splice(a.ui.ddmanager.droppables[this.options.scope]),
this._addToManager(c));this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],
c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,f=!1;return d&&(d.currentItem||d.element)[0]!==
this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(f=!0,!1):void 0}),f?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),
this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(){return function(a,b,c,d){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left,e=(a.positionAbs||a.position.absolute).top,n=f+a.helperProportions.width,s=e+a.helperProportions.height,h=b.offset.left,t=b.offset.top,
v=h+b.proportions().width,w=t+b.proportions().height;switch(c){case "fit":return f>=h&&v>=n&&e>=t&&w>=s;case "intersect":return f+a.helperProportions.width/2>h&&v>n-a.helperProportions.width/2&&e+a.helperProportions.height/2>t&&w>s-a.helperProportions.height/2;case "pointer":a=d.pageY;c=b.proportions().height;if(t=a>=t&&t+c>a)d=d.pageX,b=b.proportions().width,t=d>=h&&h+b>d;return t;case "touch":return(e>=t&&w>=e||s>=t&&w>=s||t>e&&s>w)&&(f>=h&&v>=f||n>=h&&v>=n||h>f&&n>v);default:return!1}}}();a.ui.ddmanager=
{current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,f,e=a.ui.ddmanager.droppables[b.options.scope]||[],l=c?c.type:null,n=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();d=0;a:for(;e.length>d;d++)if(!(e[d].options.disabled||b&&!e[d].accept.call(e[d].element[0],b.currentItem||b.element))){for(f=0;n.length>f;f++)if(n[f]===e[d].element[0]){e[d].proportions().height=0;continue a}e[d].visible="none"!==e[d].element.css("display");e[d].visible&&("mousedown"===l&&e[d]._activate.call(e[d],
c),e[d].offset=e[d].element.offset(),e[d].proportions({width:e[d].element[0].offsetWidth,height:e[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,
this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,f,e,l=a.ui.intersect(b,this,this.options.tolerance,c);(l=!l&&this.isover?"isout":l&&!this.isover?
"isover":null)&&(this.options.greedy&&(f=this.options.scope,e=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===f}),e.length&&(d=a(e[0]).droppable("instance"),d.greedyChild="isover"===l)),d&&"isover"===l&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,c),d&&"isout"===l&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable");
b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}};a.ui.droppable;a.widget("ui.resizable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,
10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",f=!1;return 0<b[d]?!0:(b[d]=1,f=0<b[d],b[d]=0,f)},_create:function(){var b,c,d,f,e,l=this,n=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&
(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),
marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(a(".ui-resizable-handle",this.element).length?
{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),e="ui-resizable-"+d,f=a("<div class='ui-resizable-handle "+e+"'></div>"),f.css({zIndex:n.zIndex}),"se"===d&&f.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),
this.handles[d]=".ui-resizable-"+d,this.element.append(f);this._renderAxis=function(b){var c,d,g,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=this.element.children(this.handles[c]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),g=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":
/^e$/.test(c)?"Right":"Left"].join(""),b.css(g,f),this._proportionallyResize()),a(this.handles[c]).length};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){l.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=f&&f[1]?f[1]:"se")});n.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(a(this).removeClass("ui-resizable-autohide"),
l._handles.show())}).mouseleave(function(){n.disabled||l.resizing||(a(this).addClass("ui-resizable-autohide"),l._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),
width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,f=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(f=!0);return!this.options.disabled&&f},_mouseStart:function(b){var c,d,f,e=this.options,l=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),
d=this._num(this.helper.css("top")),e.containment&&(c+=a(e.containment).scrollLeft()||0,d+=a(e.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalPosition=
{left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),l.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,f=this.originalMousePosition,e=b.pageX-f.left||0,f=b.pageY-f.top||0,l=this._change[this.axis];return this._updatePrevProperties(),
l?(c=l.apply(this,[b,e,f]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,f,e,l,n,s,h=this.options;
return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),f=d&&this._hasScroll(c[0],"left")?0:this.sizeDiff.height,e=d?0:this.sizeDiff.width,l={width:this.helper.width()-e,height:this.helper.height()-f},n=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,s=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(a.extend(l,{top:s,left:n})),this.helper.height(this.size.height),
this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+
"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,f,e;e=this.options;e={minWidth:this._isNumber(e.minWidth)?e.minWidth:0,maxWidth:this._isNumber(e.maxWidth)?e.maxWidth:1/0,minHeight:this._isNumber(e.minHeight)?e.minHeight:0,maxHeight:this._isNumber(e.maxHeight)?
e.maxHeight:1/0};(this._aspectRatio||a)&&(b=e.minHeight*this.aspectRatio,d=e.minWidth/this.aspectRatio,c=e.maxHeight*this.aspectRatio,f=e.maxWidth/this.aspectRatio,b>e.minWidth&&(e.minWidth=b),d>e.minHeight&&(e.minHeight=d),e.maxWidth>c&&(e.maxWidth=c),e.maxHeight>f&&(e.maxHeight=f));this._vBoundaries=e},_updateCache:function(a){this.offset=this.helper.offset();this._isNumber(a.left)&&(this.position.left=a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=
a.height);this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<
a.width,f=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,e=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,n=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,s=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,t=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);return e&&(a.width=b.minWidth),n&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),e&&t&&(a.left=s-b.minWidth),d&&t&&(a.left=s-b.maxWidth),n&&c&&(a.top=h-b.minHeight),
f&&c&&(a.top=h-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")];for(a=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseInt(d[b],10)||0,c[b]+=parseInt(a[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,
b=0,c=this.helper||this.element;this._proportionallyResizeElements.length>b;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+
c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);
"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,f=c._proportionallyResizeElements,e=f.length&&/textarea/i.test(f[0].nodeName),l=e&&c._hasScroll(f[0],"left")?0:c.sizeDiff.height,e={width:c.size.width-
(e?0:c.sizeDiff.width),height:c.size.height-l},l=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,n=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(e,n&&l?{top:n,left:l}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),
10)};f&&f.length&&a(f[0]).css({width:d.width,height:d.height});c._updateCache(d);c._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,f,e,l,n,s=a(this).resizable("instance"),h=s.element,t=s.options.containment;(h=t instanceof a?t.get(0):/parent/.test(t)?h.parent().get(0):t)&&(s.containerElement=a(h),/document/.test(t)||t===document?(s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:a(document),left:0,top:0,width:a(document).width(),
height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(h),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=s._num(b.css("padding"+d))}),s.containerOffset=b.offset(),s.containerPosition=b.position(),s.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=s.containerOffset,f=s.containerSize.height,e=s.containerSize.width,l=s._hasScroll(h,"left")?h.scrollWidth:e,n=s._hasScroll(h)?h.scrollHeight:f,s.parentData={element:h,left:d.left,top:d.top,width:l,
height:n}))},resize:function(b){var c,d,f,e=a(this).resizable("instance");c=e.options;d=e.containerOffset;f=e.position;b=e._aspectRatio||b.shiftKey;var l={top:0,left:0},n=e.containerElement,s=!0;n[0]!==document&&/static/.test(n.css("position"))&&(l=d);f.left<(e._helper?d.left:0)&&(e.size.width+=e._helper?e.position.left-d.left:e.position.left-l.left,b&&(e.size.height=e.size.width/e.aspectRatio,s=!1),e.position.left=c.helper?d.left:0);f.top<(e._helper?d.top:0)&&(e.size.height+=e._helper?e.position.top-
d.top:e.position.top,b&&(e.size.width=e.size.height*e.aspectRatio,s=!1),e.position.top=e._helper?d.top:0);c=e.containerElement.get(0)===e.element.parent().get(0);f=/relative|absolute/.test(e.containerElement.css("position"));c&&f?(e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top):(e.offset.left=e.element.offset().left,e.offset.top=e.element.offset().top);c=Math.abs(e.sizeDiff.width+(e._helper?e.offset.left-l.left:e.offset.left-d.left));d=Math.abs(e.sizeDiff.height+
(e._helper?e.offset.top-l.top:e.offset.top-d.top));c+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-c,b&&(e.size.height=e.size.width/e.aspectRatio,s=!1));d+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-d,b&&(e.size.width=e.size.height*e.aspectRatio,s=!1));s||(e.position.left=e.prevPosition.left,e.position.top=e.prevPosition.top,e.size.width=e.prevSize.width,e.size.height=e.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,
d=b.containerOffset,e=b.containerPosition,f=b.containerElement,l=a(b.helper),n=l.offset(),s=l.outerWidth()-b.sizeDiff.width,l=l.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:n.left-e.left-d.left,width:s,height:l});b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:n.left-e.left-d.left,width:s,height:l})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance").options,c=function(b){a(b).each(function(){var b=
a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof b.alsoResize||b.alsoResize.parentNode?c(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],c(b.alsoResize)):a.each(b.alsoResize,function(a){c(a)})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,l=d.originalPosition,n={height:d.size.height-f.height||0,width:d.size.width-
f.width||0,top:d.position.top-l.top||0,left:d.position.left-l.left||0},s=function(b,d){a(b).each(function(){var b=a(this),g=a(this).data("ui-resizable-alsoresize"),e={},f=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(g[b]||0)+(n[b]||0);c&&0<=c&&(e[b]=c||null)});b.css(e)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?s(e.alsoResize):a.each(e.alsoResize,function(a,b){s(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}});
a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},
stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,l=c.originalPosition,n=c.axis,s="number"==typeof d.grid?[d.grid,d.grid]:d.grid,h=s[0]||1,t=s[1]||1,v=Math.round((e.width-f.width)/h)*h,e=Math.round((e.height-f.height)/t)*t,w=f.width+v,x=f.height+e,A=d.maxWidth&&w>d.maxWidth,y=d.maxHeight&&x>d.maxHeight,
u=d.minWidth&&d.minWidth>w,B=d.minHeight&&d.minHeight>x;d.grid=s;u&&(w+=h);B&&(x+=t);A&&(w-=h);y&&(x-=t);/^(se|s|e)$/.test(n)?(c.size.width=w,c.size.height=x):/^(ne)$/.test(n)?(c.size.width=w,c.size.height=x,c.position.top=l.top-e):/^(sw)$/.test(n)?(c.size.width=w,c.size.height=x,c.position.left=l.left-v):((0>=x-t||0>=w-h)&&(b=c._getPaddingPlusBorderDimensions(this)),0<x-t?(c.size.height=x,c.position.top=l.top-e):(x=t-b.height,c.size.height=x,c.position.top=l.top+f.height-x),0<w-h?(c.size.width=w,
c.position.left=l.left-v):(w=t-b.height,c.size.width=w,c.position.left=l.left+f.width-w))}});a.ui.resizable;a.widget("ui.selectable",a.ui.mouse,{version:"1.11.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b=a(c.options.filter,c.element[0]);b.addClass("ui-selectee");b.each(function(){var b=
a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");
this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY];this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0;b.metaKey||
b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",
b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],l=this.opos[1],n=b.pageX,s=b.pageY;return f>n&&(c=n,n=f,f=c),l>s&&(c=s,s=l,l=c),this.helper.css({left:f,top:l,width:n-f,height:s-l}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),k=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?k=!(c.left>n||f>c.right||c.top>s||l>c.bottom):
"fit"===e.tolerance&&(k=c.left>f&&n>c.right&&c.top>l&&s>c.bottom),k?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),
c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");
d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}});a.widget("ui.sortable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",
ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,
b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},
_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+
"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d?!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e)?(this.currentItem=d,this._removeCurrentsFromItems(),
!0):!1:!1)},_mouseStart:function(b,c,d){var e;c=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),
this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&"auto"!==c.cursor&&(e=this.document.find("body"),
this.storedCursor=e.css("cursor"),e.css("cursor",c.cursor),this.storedStylesheet=a("<style>*{ cursor: "+c.cursor+" !important; }</style>").appendTo(e)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),
this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f;c=this.options;var l=!1;this.position=this._generatePosition(b);
this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop-c.scrollSpeed),
this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?l=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(l=a(document).scrollTop(a(document).scrollTop()+
c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?l=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(l=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),!1!==l&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");
this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(c=this.items.length-1;0<=c;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;
this._rearrange(b,d);this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,l={};f&&"x"!==f||(l.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===
document.body?0:this.offsetParent[0].scrollLeft));f&&"y"!==f||(l.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(l,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,
reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=
this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,n=f+a.width,s=a.top,h=s+a.height,t=this.offset.click.top,v=this.offset.click.left,v="y"===this.options.axis||b+v>f&&n>b+v,t=("x"===this.options.axis||d+t>s&&h>d+t)&&v;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||
"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?t:b+this.helperProportions.width/2>f&&n>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>s&&h>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,
a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return b?this.floating?c&&"right"===c||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?"right"===
d&&a||"left"===d&&!a:c&&("down"===c&&b||"up"===c&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:
a.connectWith},_getItemsAsjQuery:function(b){function c(){l.push(this)}var d,e,f,l=[],n=[],s=this._connectWith();if(s&&b)for(b=s.length-1;0<=b;b--)for(e=a(s[b]),d=e.length-1;0<=d;d--)(f=a.data(e[d],this.widgetFullName))&&f!==this&&!f.options.disabled&&n.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);n.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,
item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=n.length-1;0<=b;b--)n[b][0].each(c);return a(l)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var c,d,e,f,l,n=this.items,s=[[a.isFunction(this.options.items)?
this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];if((l=this._connectWith())&&this.ready)for(c=l.length-1;0<=c;c--)for(e=a(l[c]),d=e.length-1;0<=d;d--)(f=a.data(e[d],this.widgetFullName))&&f!==this&&!f.options.disabled&&(s.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=s.length-1;0<=c;c--)for(b=s[c][1],e=s[c][0],d=0,l=e.length;l>
d;d++)f=a(e[d]),f.data(this.widgetName+"-item",b),n.push({item:f,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;0<=c;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),
f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;0<=c;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=
b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),
c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}});b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,
b.placeholder)},_contactContainers:function(b){var c,d,e,f,l,n,s,h,t=f=null;for(c=this.containers.length-1;0<=c;c--)a.contains(this.currentItem[0],this.containers[c].element[0])||(this._intersectsWith(this.containers[c].containerCache)?f&&a.contains(this.containers[c].element[0],f.element[0])||(f=this.containers[c],t=c):this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0));if(f)if(1===this.containers.length)this.containers[t].containerCache.over||
(this.containers[t]._trigger("over",b,this._uiHash(this)),this.containers[t].containerCache.over=1);else{c=1E4;e=null;f=(d=f.floating||this._isFloating(this.currentItem))?"left":"top";l=d?"width":"height";h=d?"clientX":"clientY";for(d=this.items.length-1;0<=d;d--)a.contains(this.containers[t].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(n=this.items[d].item.offset()[f],s=!1,b[h]-n>this.items[d][l]/2&&(s=!0),c>Math.abs(b[h]-n)&&(c=Math.abs(b[h]-n),e=this.items[d],
this.direction=s?"up":"down"));(e||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[t]&&(e?this._rearrange(b,e,null,!0):this._rearrange(b,null,this.containers[t].element,!0),this._trigger("change",b,this._uiHash()),this.containers[t]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[t],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[t]._trigger("over",b,this._uiHash(this)),this.containers[t].containerCache.over=
1)}},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),
left:this.currentItem.css("left")}),(!b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width()),(!b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+
this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&
a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode);"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-
this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),
10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*
d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,l=b.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),
this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((l-this.originalPageY)/e.grid[1])*
e.grid[1],l=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:l-this.offset.click.top-this.offset.relative.top-
this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e===
this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,d){return function(c){d._trigger(a,c,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)"auto"!==this._storedCSS[d]&&"static"!==this._storedCSS[d]||(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,
this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(d=this.containers.length-1;0<=d;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",
this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=
null,!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});a.widget("ui.accordion",{version:"1.11.1",options:{active:0,animate:{},collapsible:!1,
event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role",
"tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),
this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();
this._destroyIcons();a=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?(this._activate(b),void 0):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),
this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&(this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)),void 0)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+
1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=
!1,this.active=a()):!1===b.active?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e);d.attr("aria-labelledby",c)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",
"aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(c.event);"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),
this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c=
{keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],l=f&&c.collapsible,n=l?a():e.next(),s=d.next(),n={oldHeader:d,oldPanel:s,newHeader:l?a():e,newPanel:n};b.preventDefault();f&&!c.collapsible||
!1===this._trigger("beforeActivate",b,n)||(c.active=l?!1:this.headers.index(e),this.active=f?a():e,this._toggle(n),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b));d.attr({"aria-hidden":"true"});d.prev().attr("aria-selected","false");c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);c.attr("aria-hidden",
"false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(a,b,c){var d,e,f,n=this,s=0,h=a.length&&(!b.length||a.index()<b.index()),t=this.options.animate||{},h=h&&t.down||t,v=function(){n._toggleComplete(c)};return"number"==typeof h&&(f=h),"string"==typeof h&&(e=h),e=e||h.easing||t.easing,f=f||h.duration||t.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),a.hide().animate(this.showProps,
{duration:f,easing:e,complete:v,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?s+=c.now:"content"!==n.options.heightStyle&&(c.now=Math.round(d-b.outerHeight()-s),s=0)}}),void 0):b.animate(this.hideProps,f,e,v):a.animate(this.showProps,f,e,v)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});
a.widget("ui.tooltip",{version:"1.11.1",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),
d=(b.attr("aria-describedby")||"").split(/\s+/),c=a.inArray(c,d);-1!==c&&d.splice(c,1);b.removeData("ui-tooltip-id");(d=a.trim(d.join(" ")))?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable();this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},
_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c,void 0):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)}),void 0)},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0];b.close(e,!0)});this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},
_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=
b.currentTarget=this,c.close(b,!0));d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f);this._open(b,a,c)})}),c&&this._open(b,a,c),void 0)},_open:function(b,c,d){function e(a){s.of=a;f.is(":hidden")||f.position(s)}
var f,l,n,s=a.extend({},this.options.position);if(d){if(f=this._find(c),f.length)return f.find(".ui-tooltip-content").html(d),void 0;c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title"));f=this._tooltip(c);this._addDescribedBy(c,f.attr("id"));f.find(".ui-tooltip-content").html(d);this.liveRegion.children().hide();d.clone?(n=d.clone(),n.removeAttr("id").find("[id]").removeAttr("id")):n=d;a("<div>").html(n).appendTo(this.liveRegion);this.options.track&&b&&/^mouse/.test(b.type)?
(this._on(this.document,{mousemove:e}),e(b)):f.position(a.extend({of:c},this.options.position));this.closing=this.hiding=!1;f.hide();this._show(f,this.options.show);this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){f.is(":visible")&&(e(s.of),clearInterval(l))},a.fx.interval));this._trigger("open",b,{tooltip:f});d={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),b.currentTarget=c[0],this.close(b,!0))}};c[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(f)});
b&&"mouseover"!==b.type||(d.mouseleave="close");b&&"focusin"!==b.type||(d.focusout="close");this._on(!0,c,d)}},close:function(b){var c=this,d=a(b?b.currentTarget:this.element),e=this._find(d);this.closing||(clearInterval(this.delayedShow),d.data("ui-tooltip-title")&&!d.attr("title")&&d.attr("title",d.data("ui-tooltip-title")),this._removeDescribedBy(d),this.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){c._removeTooltip(a(this));this.closing=this.hiding=!1}),d.removeData("ui-tooltip-open"),
this._off(d,"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title);delete c.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:e}),this.hiding||(this.closing=!1))},_tooltip:function(b){var c=a("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");
return a("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),this.tooltips[d]=b,c},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0];b.close(e,!0);a("#"+c).remove();d.data("ui-tooltip-title")&&(d.attr("title")||d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))});
this.liveRegion.remove()}})});(function(a){function b(b){b=b||{};b.chunkSize||(b.chunkSize=Papa.RemoteChunkSize);var c=0,e="",f="",g,h,k=new d(q(b));this.stream=function(d){function m(){g=new XMLHttpRequest;n||(g.onload=q,g.onerror=s);g.open("GET",d,!n);b.step&&g.setRequestHeader("Range","bytes="+c+"-"+(c+b.chunkSize-1));g.send();n&&0==g.status?s():c+=b.chunkSize}function q(){if(4==g.readyState)if(200>g.status||400<=g.status)s();else{e+=f+g.responseText;f="";var d;if(!(d=!b.step)){d=c;var m;m=g.getResponseHeader("Content-Range");
m=parseInt(m.substr(m.lastIndexOf("/")+1));d=d>m}if(!d)if(m=e.lastIndexOf("\n"),0>m&&(m=e.lastIndexOf("\r")),-1<m)f=e.substring(m+1),e=e.substring(0,m);else{h();return}m=k.parse(e);e="";n?a.postMessage({results:m,workerId:Papa.WORKER_ID,finished:d}):l(b.chunk)&&(b.chunk(m),m=void 0);d&&l(b.complete)?b.complete(m):m&&m.meta.aborted&&l(b.complete)?b.complete(m):d||h()}}function s(){l(b.error)?b.error(g.statusText):n&&b.error&&a.postMessage({workerId:Papa.WORKER_ID,error:g.statusText,finished:!1})}h=
n?function(){m();q()}:function(){m()};h()}}function c(b){b=b||{};b.chunkSize||(b.chunkSize=Papa.LocalChunkSize);var c=0,e="",f="",g,h=new d(q(b)),k="function"===typeof FileReader;this.stream=function(d){function m(){if(c<d.size){var a=Math.min(c+b.chunkSize,d.size),a=g.readAsText(r.call(d,c,a),b.encoding);k||q({target:{result:a}})}}function q(g){c+=b.chunkSize;e+=f+g.target.result;f="";g=c>=d.size;if(!g){var k=e.lastIndexOf("\n");0>k&&(k=e.lastIndexOf("\r"));if(-1<k)f=e.substring(k+1),e=e.substring(0,
k);else{m();return}}k=h.parse(e);e="";n?a.postMessage({results:k,workerId:Papa.WORKER_ID,finished:g}):l(b.chunk)&&(b.chunk(k,d),k=void 0);g&&l(b.complete)?b.complete(void 0,d):k&&k.meta.aborted&&l(b.complete)?b.complete(k,d):g||m()}function s(){l(b.error)?b.error(g.error,d):n&&b.error&&a.postMessage({workerId:Papa.WORKER_ID,error:g.error,file:d,finished:!1})}var r=d.slice||d.webkitSlice||d.mozSlice;k?(g=new FileReader,g.onload=q,g.onerror=s):g=new FileReaderSync;m()}}function d(a){function b(){k&&
g&&(d("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to comma"),g=!1);if(a.header&&0==h.length&&k){for(var c=0;a.header&&0==h.length&&c<k.data.length;c++)for(var e=0;e<k.data[c].length;e++)h.push(k.data[c][e]);k.data.splice(0,1)}if(k&&(a.header||a.dynamicTyping)){for(c=0;c<k.data.length;c++){for(var e={},l=0;l<k.data[c].length;l++){if(a.dynamicTyping){var m=k.data[c][l],n=k.data[c],q=l,m="true"==m?!0:"false"==m?!1:f.test(m)?parseFloat(m):m;n[q]=m}a.header&&
(l>=h.length&&(e.__parsed_extra||(e.__parsed_extra=[]),e.__parsed_extra.push(k.data[c][l])),e[h[l]]=k.data[c][l])}a.header&&(k.data[c]=e,l>h.length?d("FieldMismatch","TooManyFields","Too many fields: expected "+h.length+" fields but parsed "+l,c):l<h.length&&d("FieldMismatch","TooFewFields","Too few fields: expected "+h.length+" fields but parsed "+l,c))}k.meta.fields=h}c=k;return c}function c(b){for(var d=[",","\t","|",";",Papa.RECORD_SEP,Papa.UNIT_SEP],f,g,h,k=0;k<d.length;k++){var l=d[k],m=0,n=
0;h=void 0;for(var q=(new e({delimiter:l,preview:10})).parse(b),s=0;s<q.data.length;s++){var r=q.data[s].length,n=n+r;"undefined"===typeof h?h=r:1<r&&(m+=Math.abs(r-h),h=r)}n/=q.data.length;("undefined"===typeof g||m<g)&&1.99<n&&(g=m,f=l)}a.delimiter=f;return{successful:!!f,bestDelimiter:f}}function d(a,b,c,e){k.errors.push({type:a,code:b,message:c,row:e})}var f=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,g,h=[],k={data:[],errors:[],meta:{}};a=q(a);this.parse=function(d){g=!1;if(!a.delimiter){var f=
c(d);f.successful?a.delimiter=f.bestDelimiter:(g=!0,a.delimiter=",");k.meta.delimiter=a.delimiter}if(l(a.step)){var m=a.step;a.step=function(c,d){k=c;a.header&&0==h.length?b():m(b(),d)}}k=(new e(a)).parse(d);return b()}}function e(a){function b(){J++;X=t[J]}function c(){N[Y][pa]+=X}function d(){N[Y].push("");pa=N[Y].length-1}function e(){f();F++;Ga++;N.push([]);Y=N.length-1;d()}function f(){1==N[Y].length&&r.test(N[Y][0])&&(a.keepEmptyRows?N[Y].splice(0,1):N.splice(Y,1),Y=N.length-1);l(Q)&&(N[Y]&&
Q(q(),s),N=[],V=[],pa=Y=0)}function g(a){return a<t.length-1&&("\r"==t[a]&&"\n"==t[a+1]||"\n"==t[a]&&"\r"==t[a+1])}function h(a){return"\r"==t[a]||"\n"==t[a]}function k(){return!(!R&&m(J-1)||m(J+1))&&J<t.length-1&&'"'==t[J+1]}function m(a){"number"!=typeof a&&(a=J);var b=t[a];return-1>=a||a>=t.length||b==w||"\r"==b||"\n"==b}function n(a,b,c){V.push({type:a,code:b,message:c,line:F,row:Y,index:J})}function q(){return{data:N,errors:V,meta:{lines:F,delimiter:w,aborted:Ba}}}var s=this,r=/^\s*$/,t,w,v,
Q,T,X,J,R,F,N,V,Y,pa,Ga,Ba=!1;a=a||{};w=a.delimiter;v=a.comments;Q=a.step;T=a.preview;if("string"!==typeof w||1!=w.length||-1<Papa.BAD_DELIMITERS.indexOf(w))w=",";if(!0===v)v="#";else if("string"!==typeof v||1!=v.length||-1<Papa.BAD_DELIMITERS.indexOf(v)||v==w)v=!1;this.parse=function(a){if("string"!==typeof a)throw"Input must be a string";t=a;R=!1;Ga=J=0;F=1;N=[];V=[];pa=Y=0;N=[[""]];X=t[J];for(;J<t.length&&!Ba&&!(0<T&&Ga>=T);){if('"'==X)(!R&&m(J-1)||m(J+1))&&!k()?R=!R:(c(),R&&k()?J++:n("Quotes",
"UnexpectedQuotes","Unexpected quotes"));else if(R)(g(J)||h(J))&&F++,c();else if(X==w)d();else if(g(J))e(),b();else if(h(J))e();else if(a=void 0,a=v?(0==J||h(J-1)||g(J-2))&&t[J]===v:!1,a)for(;!g(J)&&!h(J)&&J<t.length;)b();else c();b()}Ba&&n("Abort","ParseAbort","Parsing was aborted by the user's step function");R&&n("Quotes","MissingQuotes","Unescaped or mismatched quotes");f();a=l(Q)?void 0:q();return a};this.abort=function(){Ba=!0}}function f(){var a="worker"+String(Math.random()).substr(2);document.write('<script id="'+
a+'">\x3c/script>');return document.getElementById(a).previousSibling.src}function g(){if(!Papa.WORKERS_SUPPORTED)return!1;var b=new a.Worker(s);b.onmessage=k;b.id=t++;return h[b.id]=b}function k(a){a=a.data;var b=h[a.workerId];if(a.error)b.userError(a.error,a.file);else if(a.results&&a.results.data)if(l(b.userStep)){for(var c=0;c<a.results.data.length;c++)b.userStep({data:[a.results.data[c]],errors:a.results.errors,meta:a.results.meta});delete a.results}else l(b.userChunk)&&(b.userChunk(a.results,
a.file),delete a.results);a.finished&&(l(h[a.workerId].userComplete)&&h[a.workerId].userComplete(a.results),h[a.workerId].terminate(),delete h[a.workerId])}function m(b){b=b.data;"undefined"===typeof Papa.WORKER_ID&&b&&(Papa.WORKER_ID=b.workerId);"string"===typeof b.input?a.postMessage({workerId:Papa.WORKER_ID,results:Papa.parse(b.input,b.config),finished:!0}):b.input instanceof File&&(b=Papa.parse(b.input,b.config))&&a.postMessage({workerId:Papa.WORKER_ID,results:b,finished:!0})}function r(a){"object"!==
typeof a&&(a={});a=q(a);if("string"!==typeof a.delimiter||1!=a.delimiter.length||-1<Papa.BAD_DELIMITERS.indexOf(a.delimiter))a.delimiter=v.delimiter;"boolean"!==typeof a.header&&(a.header=v.header);"boolean"!==typeof a.dynamicTyping&&(a.dynamicTyping=v.dynamicTyping);"number"!==typeof a.preview&&(a.preview=v.preview);"function"!==typeof a.step&&(a.step=v.step);"function"!==typeof a.complete&&(a.complete=v.complete);"string"!==typeof a.encoding&&(a.encoding=v.encoding);"boolean"!==typeof a.worker&&
(a.worker=v.worker);"boolean"!==typeof a.download&&(a.download=v.download);"boolean"!==typeof a.keepEmptyRows&&(a.keepEmptyRows=v.keepEmptyRows);return a}function q(a){if("object"!==typeof a)return a;var b=a instanceof Array?[]:{},c;for(c in a)b[c]=q(a[c]);return b}function l(a){return"function"===typeof a}var n=!a.document,s,h={},t=0,v={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",worker:!1,comments:!1,complete:void 0,download:!1,chunk:void 0,keepEmptyRows:!1};a.Papa=
{};a.Papa.parse=function(a,e){var f=n?e:r(e);if(f.worker&&Papa.WORKERS_SUPPORTED&&s){var h=g();h.userStep=f.step;h.userChunk=f.chunk;h.userComplete=f.complete;h.userError=f.error;f.step=l(f.step);f.chunk=l(f.chunk);f.complete=l(f.complete);f.error=l(f.error);delete f.worker;h.postMessage({input:a,config:f,workerId:h.id})}else if("string"===typeof a)if(f.download)h=new b(f),h.stream(a);else return h=new d(f),h=h.parse(a),l(f.complete)&&f.complete(h),h;else if(a instanceof File)if(f.step||f.chunk)h=
new c(f),h.stream(a);else{h=new d(f);if(n){var k=new FileReaderSync,k=k.readAsText(a,f.encoding);return h.parse(k)}k=new FileReader;k.onload=function(a){a=(new d(f)).parse(a.target.result);l(f.complete)&&f.complete(a)};k.readAsText(a,f.encoding)}};a.Papa.unparse=function(b,c){function d(a){if("object"!==typeof a)return[];var b=[],c;for(c in a)b.push(c);return b}function e(a,b){var c="";"string"===typeof a&&(a=JSON.parse(a));"string"===typeof b&&(b=JSON.parse(b));var d=a instanceof Array&&0<a.length,
g=!(b[0]instanceof Array);if(d){for(var l=0;l<a.length;l++)0<l&&(c+=h),c+=f(a[l],l);0<b.length&&(c+=k)}for(l=0;l<b.length;l++){for(var m=d?a.length:b[l].length,n=0;n<m;n++)0<n&&(c+=h),c+=f(b[l][d&&g?a[n]:n],n);l<b.length-1&&(c+=k)}return c}function f(b,c){if("undefined"===typeof b)return"";b=b.toString().replace(/"/g,'""');var d;if(!(d="boolean"===typeof g&&g||g instanceof Array&&g[c]))a:{d=b;for(var e=a.Papa.BAD_DELIMITERS,k=0;k<e.length;k++)if(-1<d.indexOf(e[k])){d=!0;break a}d=!1}return d||-1<
b.indexOf(h)||" "==b.charAt(0)||" "==b.charAt(b.length-1)?'"'+b+'"':b}var g=!1,h=",",k="\r\n";if("object"===typeof c){"string"===typeof c.delimiter&&1==c.delimiter.length&&-1==a.Papa.BAD_DELIMITERS.indexOf(c.delimiter)&&(h=c.delimiter);if("boolean"===typeof c.quotes||c.quotes instanceof Array)g=c.quotes;"string"===typeof c.newline&&(k=c.newline)}"string"===typeof b&&(b=JSON.parse(b));if(b instanceof Array){if(!b.length||b[0]instanceof Array)return e(null,b);if("object"===typeof b[0])return e(d(b[0]),
b)}else if("object"===typeof b)return"string"===typeof b.data&&(b.data=JSON.parse(b.data)),b.data instanceof Array&&(b.fields||(b.fields=b.data[0]instanceof Array?b.fields:d(b.data[0])),b.data[0]instanceof Array||"object"===typeof b.data[0]||(b.data=[b.data])),e(b.fields||[],b.data||[]);throw"exception: Unable to serialize unrecognized input";};a.Papa.RECORD_SEP=String.fromCharCode(30);a.Papa.UNIT_SEP=String.fromCharCode(31);a.Papa.BYTE_ORDER_MARK="?";a.Papa.BAD_DELIMITERS=["\r","\n",'"',a.Papa.BYTE_ORDER_MARK];
a.Papa.WORKERS_SUPPORTED=!!a.Worker;a.Papa.LocalChunkSize=10485760;a.Papa.RemoteChunkSize=5242880;a.Papa.Parser=e;a.Papa.ParserHandle=d;a.Papa.NetworkStreamer=b;a.Papa.FileStreamer=c;if(a.jQuery){var w=a.jQuery;w.fn.parse=function(b){function c(){if(0==g.length)l(b.complete)&&b.complete();else{var a=g[0];if(l(b.before)){var f=b.before(a.file,a.inputElem);if("object"===typeof f){if("abort"==f.action){d("AbortError",a.file,a.inputElem,f.reason);return}if("skip"==f.action){e();return}"object"===typeof f.config&&
(a.instanceConfig=w.extend(a.instanceConfig,f.config))}else if("skip"==f){e();return}}var h=a.instanceConfig.complete;a.instanceConfig.complete=function(b){l(h)&&h(b,a.file,a.inputElem);e()};Papa.parse(a.file,a.instanceConfig)}}function d(a,c,e,f){l(b.error)&&b.error({name:a},c,e,f)}function e(){g.splice(0,1);c()}var f=b.config||{},g=[];this.each(function(b){if("INPUT"!=w(this).prop("tagName").toUpperCase()||"file"!=w(this).attr("type").toLowerCase()||!a.FileReader||!this.files||0==this.files.length)return!0;
for(b=0;b<this.files.length;b++)g.push({file:this.files[b],inputElem:this,instanceConfig:w.extend({},f)})});c();return this}}n?a.onmessage=m:Papa.WORKERS_SUPPORTED&&(s=f())})(this);var THREE={REVISION:"68"};"object"===typeof module&&(module.exports=THREE);THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;
THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;
THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;
THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;
THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*
c:.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a};b=.5>=c?c*(1+b):c+b-c*b;c=2*c-b;this.r=d(c,b,a+1/3);this.g=d(c,b,a);this.b=d(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,k=(f+e)/2;if(f===e)f=g=0;else{var m=e-f,f=.5>=k?m/(e+f):m/(2-e-f);switch(e){case b:g=(c-d)/m+(c<d?6:0);break;case c:g=(d-b)/m+2;break;case d:g=(b-c)/m+4}g/=6}a.h=g;a.s=f;a.l=k;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;
this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),k=Math.sin(a._z/2);"XYZ"===a.order?(this._x=f*d*e+c*g*k,this._y=c*g*e-f*d*k,this._z=c*d*k+f*g*e,this._w=c*d*e-f*g*k):"YXZ"===a.order?(this._x=f*d*e+c*g*k,this._y=c*g*e-f*d*k,this._z=
c*d*k-f*g*e,this._w=c*d*e+f*g*k):"ZXY"===a.order?(this._x=f*d*e-c*g*k,this._y=c*g*e+f*d*k,this._z=c*d*k+f*g*e,this._w=c*d*e-f*g*k):"ZYX"===a.order?(this._x=f*d*e-c*g*k,this._y=c*g*e+f*d*k,this._z=c*d*k-f*g*e,this._w=c*d*e+f*g*k):"YZX"===a.order?(this._x=f*d*e+c*g*k,this._y=c*g*e+f*d*k,this._z=c*d*k-f*g*e,this._w=c*d*e-f*g*k):"XZY"===a.order&&(this._x=f*d*e-c*g*k,this._y=c*g*e-f*d*k,this._z=c*d*k+f*g*e,this._w=c*d*e+f*g*k);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],k=b[2],m=b[6],b=b[10],r=c+f+b;0<r?(c=.5/Math.sqrt(r+1),this._w=.25/c,this._x=(m-g)*c,this._y=(d-k)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(m-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+k)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-k)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(g+m)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+k)/c,this._y=(g+m)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,k=b._y,m=b._z,r=b._w;this._x=c*r+f*g+d*m-e*k;this._y=d*r+f*k+e*g-c*m;this._z=e*r+f*m+c*k-d*g;this._w=f*r-c*g-d*k-e*m;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var k=Math.acos(g),m=Math.sqrt(1-g*g);if(.001>Math.abs(m))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;g=Math.sin((1-b)*k)/m;k=Math.sin(b*k)/m;this._w=f*g+this._w*k;this._x=c*g+
this._x*k;this._y=d*g+this._y*k;this._z=e*g+this._z*k;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,
this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},
subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,
b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=
a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,
c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=
(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var k=a*b+f*d-g*c,m=a*c+g*b-e*d,r=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=k*a+b*-e+m*-g-r*-f;this.y=m*a+b*-f+r*-e-k*-g;this.z=r*a+b*-g+k*-f-m*-e;return this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;
this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=
b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=
e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,k=b.z;this.x=d*k-e*g;this.y=e*f-c*k;this.z=c*g-d*f;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===
a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=
a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=
this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},
setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],k=a[5],m=a[9];c=a[2];b=a[6];var r=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>Math.abs(m-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(m+b)&&.1>Math.abs(e+k+r-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;k=(k+1)/2;r=(r+1)/2;d=(d+g)/4;f=(f+c)/4;m=(m+b)/4;e>k&&e>r?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):k>r?.01>k?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(k),
b=d/c,d=m/c):.01>r?(c=b=.707106781,d=0):(d=Math.sqrt(r),b=f/d,c=m/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-m)*(b-m)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-m)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+k+r-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);
return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);
return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);
return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,
this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},copy:function(a){this._x=
a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b){var c=THREE.Math.clamp,d=a.elements,e=d[0],f=d[4],g=d[8],k=d[1],m=d[5],r=d[9],q=d[2],l=d[6],d=d[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-r,d),this._z=Math.atan2(-f,e)):(this._x=Math.atan2(l,m),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(r,-1,1)),.99999>Math.abs(r)?(this._y=Math.atan2(g,d),this._z=Math.atan2(k,m)):(this._y=
Math.atan2(-q,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(-q,d),this._z=Math.atan2(-f,m)):(this._y=0,this._z=Math.atan2(k,e))):"ZYX"===b?(this._y=Math.asin(-c(q,-1,1)),.99999>Math.abs(q)?(this._x=Math.atan2(l,d),this._z=Math.atan2(k,e)):(this._x=0,this._z=Math.atan2(-f,m))):"YZX"===b?(this._z=Math.asin(c(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-r,m),this._y=Math.atan2(-q,e)):(this._x=0,this._y=Math.atan2(g,d))):"XZY"===b?(this._z=Math.asin(-c(f,
-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(l,m),this._y=Math.atan2(g,e)):(this._x=Math.atan2(-r,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;this.onChangeCallback();return this},setFromQuaternion:function(a,b,c){var d=THREE.Math.clamp,e=a.x*a.x,f=a.y*a.y,g=a.z*a.z,k=a.w*a.w;b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),k-e-f+g),this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w),-1,1)),this._z=Math.atan2(2*(a.z*a.w-a.x*
a.y),k+e-f-g)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),k-e-f+g),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),k-e+f-g)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),k-e-f+g),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),k-e+f-g)):"ZYX"===b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),k-e-f+g),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z),-1,1)),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),k+e-f-g)):"YZX"===b?(this._x=Math.atan2(2*
(a.x*a.w-a.z*a.y),k-e+f-g),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),k+e-f-g),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w),-1,1))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),k-e+f-g),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),k+e-f-g),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);
this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}};
THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=
this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);
this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var e=b.geometry.vertices,f=0,g=e.length;f<g;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},
center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<
this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<
this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);
this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);
a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};
THREE.Matrix3=function(a,b,c,d,e,f,g,k,m){var r=this.elements=new Float32Array(9);r[0]=void 0!==a?a:1;r[3]=b||0;r[6]=c||0;r[1]=d||0;r[4]=void 0!==e?e:1;r[7]=f||0;r[2]=g||0;r[5]=k||0;r[8]=void 0!==m?m:1};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,g,k,m){var r=this.elements;r[0]=a;r[3]=b;r[6]=c;r[1]=d;r[4]=e;r[7]=f;r[2]=g;r[5]=k;r[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=
a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],k=a[6],m=a[7],a=a[8];return b*f*a-b*g*m-c*e*a+c*g*k+d*e*m-d*f*k},getInverse:function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];
c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],
a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,d,e,f,g,k,m,r,q,l,n,s,h,t){var v=this.elements=new Float32Array(16);v[0]=void 0!==a?a:1;v[4]=b||0;v[8]=c||0;v[12]=d||0;v[1]=e||0;v[5]=void 0!==f?f:1;v[9]=g||0;v[13]=k||0;v[2]=m||0;v[6]=r||0;v[10]=void 0!==q?q:1;v[14]=l||0;v[3]=n||0;v[7]=s||0;v[11]=h||0;v[15]=void 0!==t?t:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,k,m,r,q,l,n,s,h,t){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=f;v[9]=g;v[13]=k;v[2]=m;v[6]=r;v[10]=q;v[14]=l;v[3]=n;v[7]=s;v[11]=h;v[15]=t;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREEMatrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},
copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&
console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),k=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=f*k;var m=f*e,r=c*k,q=c*e;b[0]=g*k;b[4]=-g*e;b[8]=d;b[1]=m+r*d;b[5]=a-q*d;b[9]=-c*g;b[2]=q-a*d;b[6]=r+m*d;b[10]=f*g}else"YXZ"===a.order?(a=g*k,m=g*e,r=d*k,q=d*e,b[0]=a+q*c,b[4]=r*c-m,b[8]=f*d,b[1]=f*e,b[5]=f*k,b[9]=-c,b[2]=m*c-r,b[6]=q+a*c,
b[10]=f*g):"ZXY"===a.order?(a=g*k,m=g*e,r=d*k,q=d*e,b[0]=a-q*c,b[4]=-f*e,b[8]=r+m*c,b[1]=m+r*c,b[5]=f*k,b[9]=q-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*k,m=f*e,r=c*k,q=c*e,b[0]=g*k,b[4]=r*d-m,b[8]=a*d+q,b[1]=g*e,b[5]=q*d+a,b[9]=m*d-r,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,m=f*d,r=c*g,q=c*d,b[0]=g*k,b[4]=q-a*e,b[8]=r*e+m,b[1]=e,b[5]=f*k,b[9]=-c*k,b[2]=-d*k,b[6]=m*e+r,b[10]=a-q*e):"XZY"===a.order&&(a=f*g,m=f*d,r=c*g,q=c*d,b[0]=g*k,b[4]=-e,b[8]=d*k,b[1]=a*e+q,b[5]=f*k,b[9]=m*
e-r,b[2]=r*e-m,b[6]=c*k,b[10]=q*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,k=d+d,m=e+e;a=c*g;var r=c*k,c=c*m,q=d*k,d=d*m,e=e*m,g=f*g,k=f*k,f=f*m;b[0]=1-(q+e);b[4]=r-f;b[8]=c+k;b[1]=r+f;b[5]=1-
(a+e);b[9]=d-g;b[2]=c-k;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var g=this.elements;c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],k=c[8],m=c[12],r=c[1],q=c[5],l=c[9],n=c[13],s=c[2],h=c[6],t=c[10],v=c[14],w=c[3],x=c[7],A=c[11],c=c[15],y=d[0],u=d[4],B=d[8],C=d[12],z=d[1],D=d[5],E=d[9],O=d[13],Z=d[2],P=d[6],H=d[10],K=d[14],L=d[3],
G=d[7],I=d[11],d=d[15];e[0]=f*y+g*z+k*Z+m*L;e[4]=f*u+g*D+k*P+m*G;e[8]=f*B+g*E+k*H+m*I;e[12]=f*C+g*O+k*K+m*d;e[1]=r*y+q*z+l*Z+n*L;e[5]=r*u+q*D+l*P+n*G;e[9]=r*B+q*E+l*H+n*I;e[13]=r*C+q*O+l*K+n*d;e[2]=s*y+h*z+t*Z+v*L;e[6]=s*u+h*D+t*P+v*G;e[10]=s*B+h*E+t*H+v*I;e[14]=s*C+h*O+t*K+v*d;e[3]=w*y+x*z+A*Z+c*L;e[7]=w*u+x*D+A*P+c*G;e[11]=w*B+x*E+A*H+c*I;e[15]=w*C+x*O+A*K+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=
d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=
b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix4(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=
a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],k=a[9],m=a[13],r=a[2],q=a[6],l=a[10],n=a[14];return a[3]*(+e*k*q-d*m*q-e*g*l+c*m*l+d*g*n-c*k*n)+a[7]*(+b*k*n-b*m*l+e*f*l-d*f*n+d*m*r-e*k*r)+a[11]*(+b*m*q-b*g*n-e*f*q+c*f*n+e*g*r-c*m*r)+a[15]*(-d*g*r-b*k*q+b*g*l+d*f*q-c*f*l+c*k*r)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,
b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=
this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],k=d[12],m=d[1],r=d[5],q=d[9],l=d[13],n=d[2],s=d[6],h=d[10],t=d[14],v=d[3],w=d[7],x=d[11],d=d[15];c[0]=q*t*w-l*h*w+l*s*x-r*t*x-q*s*d+r*h*d;c[4]=k*h*w-g*t*w-k*s*x+f*t*x+g*s*d-f*h*d;c[8]=g*l*w-k*q*w+k*r*x-f*l*x-g*r*d+f*q*d;c[12]=k*q*s-g*l*s-k*r*h+f*l*h+g*r*t-f*q*t;c[1]=l*h*v-q*t*v-l*n*x+m*t*x+q*n*d-m*h*d;c[5]=g*t*v-k*h*v+k*n*x-e*t*x-g*n*d+e*h*d;c[9]=k*q*v-g*l*v-k*m*
x+e*l*x+g*m*d-e*q*d;c[13]=g*l*n-k*q*n+k*m*h-e*l*h-g*m*t+e*q*t;c[2]=r*t*v-l*s*v+l*n*w-m*t*w-r*n*d+m*s*d;c[6]=k*s*v-f*t*v-k*n*w+e*t*w+f*n*d-e*s*d;c[10]=f*l*v-k*r*v+k*m*w-e*l*w-f*m*d+e*r*d;c[14]=k*r*n-f*l*n-k*m*s+e*l*s+f*m*t-e*r*t;c[3]=q*s*v-r*h*v-q*n*w+m*h*w+r*n*x-m*s*x;c[7]=f*h*v-g*s*v+g*n*w-e*h*w-f*n*x+e*s*x;c[11]=g*r*v-f*q*v-g*m*w+e*q*w+f*m*x-e*r*x;c[15]=f*q*n-g*r*n+g*m*s-e*q*s-f*m*h+e*r*h;c=e*c[0]+m*c[4]+n*c[8]+v*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,k=a.z,m=e*f,r=e*g;this.set(m*f+c,m*g-d*k,m*k+d*g,0,m*g+d*k,r*g+c,r*k-d*f,0,m*k-d*g,r*k+d*f,e*k*k+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),k=a.set(f[4],f[5],f[6]).length(),m=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/k,r=1/m;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=r;b.elements[9]*=r;b.elements[10]*=r;d.setFromRotationMatrix(b);e.x=g;e.y=k;e.z=m;return this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*a));
var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,k=b-a,m=c-d,r=f-e;g[0]=2/k;g[4]=0;g[8]=0;g[12]=-((b+a)/k);g[1]=0;g[5]=2/m;g[9]=0;g[13]=-((c+d)/m);g[2]=0;g[6]=0;g[10]=-2/r;g[14]=-((f+e)/r);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=
this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,d){var e=a.clone().add(b).multiplyScalar(.5),f=b.clone().sub(a).normalize(),g=.5*a.distanceTo(b),k=
this.origin.clone().sub(e);a=-this.direction.dot(f);b=k.dot(this.direction);var m=-k.dot(f),r=k.lengthSq(),q=Math.abs(1-a*a),l,n;0<=q?(k=a*m-b,l=a*b-m,n=g*q,0<=k?l>=-n?l<=n?(g=1/q,k*=g,l*=g,a=k*(k+a*l+2*b)+l*(a*k+l+2*m)+r):(l=g,k=Math.max(0,-(a*l+b)),a=-k*k+l*(l+2*m)+r):(l=-g,k=Math.max(0,-(a*l+b)),a=-k*k+l*(l+2*m)+r):l<=-n?(k=Math.max(0,-(-a*g+b)),l=0<k?-g:Math.min(Math.max(-g,-m),g),a=-k*k+l*(l+2*m)+r):l<=n?(k=0,l=Math.min(Math.max(-g,-m),g),a=l*(l+2*m)+r):(k=Math.max(0,-(a*g+b)),l=0<k?g:Math.min(Math.max(-g,
-m),g),a=-k*k+l*(l+2*m)+r)):(l=0<a?-g:g,k=Math.max(0,-(a*l+b)),a=-k*k+l*(l+2*m)+r);c&&c.copy(this.direction.clone().multiplyScalar(k).add(this.origin));d&&d.copy(f.clone().multiplyScalar(l).add(e));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new THREE.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;f=Math.sqrt(f-e);e=d-f;
d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;
return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var k=this.origin;0<=d?(c=(a.min.x-k.x)*d,d*=a.max.x-k.x):(c=(a.max.x-k.x)*d,d*=a.min.x-k.x);0<=f?(e=(a.min.y-k.y)*f,f*=a.max.y-k.y):(e=(a.max.y-k.y)*f,f*=a.min.y-k.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;0<=g?(e=(a.min.z-k.z)*g,g*=a.max.z-k.z):(e=(a.max.z-k.z)*g,g*=a.min.z-k.z);if(c>g||e>d)return null;if(e>c||c!==
c)c=e;if(g<d||d!==d)d=g;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,k,m){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(k)return null;k=1}else if(0>f)k=-1,f=-f;else return null;a.subVectors(this.origin,e);e=k*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=k*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;
e=-k*a.dot(d);return 0>e?null:this.at(e/f,m)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,g=b.length;f<g;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};
THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],k=c[5],m=c[6],r=c[7],q=c[8],l=c[9],n=c[10],s=c[11],h=c[12],t=c[13],v=c[14],c=c[15];b[0].setComponents(f-a,r-g,s-q,c-h).normalize();b[1].setComponents(f+
a,r+g,s+q,c+h).normalize();b[2].setComponents(f+d,r+k,s+l,c+t).normalize();b[3].setComponents(f-d,r-k,s-l,c-t).normalize();b[4].setComponents(f-e,r-m,s-n,c-v).normalize();b[5].setComponents(f+e,r+m,s+n,c+v).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,
c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),
containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f){if(0==this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),f=a.copy(this.normal).applyMatrix3(f),g=this.coplanarPoint(b);g.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,g);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=
b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/180;return function(b){return b*
a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};
THREE.Spline=function(a){function b(a,b,c,d,e,f,g){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,g,k,m,r,q,l,n;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:f+
2;r=this.points[c[0]];q=this.points[c[1]];l=this.points[c[2]];n=this.points[c[3]];k=g*g;m=g*k;d.x=b(r.x,q.x,l.x,n.x,g,k,m);d.y=b(r.y,q.y,l.y,n.y,g,k,m);d.z=b(r.z,q.z,l.z,n.z,g,k,m);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=0,f=new THREE.Vector3,g=new THREE.Vector3,k=[],l=0;k[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=a/c,
d=this.getPoint(b),g.copy(d),l+=g.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=e&&(k[b]=l,e=b);k[k.length]=l;return{chunks:k,total:l}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,k=[],l=new THREE.Vector3,m=this.getLength();k.push(l.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=m.chunks[b]-m.chunks[b-1];g=Math.ceil(a*c/m.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<g-1;c++)d=e+1/g*c*(f-e),d=this.getPoint(d),k.push(l.copy(d).clone());
k.push(l.copy(this.points[b]).clone())}this.points=k}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g,k){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var m=b.dot(b);g=b.dot(c);var r=d*m-e*e;k=k||new THREE.Vector3;if(0==r)return k.set(-2,-1,-1);r=1/r;m=(m*f-e*g)*r;d=(d*g-e*f)*r;return k.set(1-m-d,d,m)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,e=0;e<d;e++)c[e]=b[e];for(e=0;e<d;e++)c[e].call(this,a)}}}};
(function(a){a.Raycaster=function(b,c,f,g){this.ray=new a.Ray(b,c);this.near=f||0;this.far=g||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var b=function(a,b){return a.distance-b.distance},c=function(a,b,f,g){a.raycast(b,f);if(!0===g){a=a.children;g=0;for(var k=a.length;g<k;g++)c(a[g],b,f,!0)}};a.Raycaster.prototype={constructor:a.Raycaster,precision:1E-4,linePrecision:1,set:function(a,b){this.ray.set(a,b)},intersectObject:function(a,e){var f=[];c(a,this,f,e);
f.sort(b);return f},intersectObjects:function(a,e){for(var f=[],g=0,k=a.length;g<k;g++)c(a[g],this,f,e);f.sort(b);return f}}})(THREE);
THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.parent=void 0;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},
scale:{enumerable:!0,value:d}});this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=!0;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,
c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));
return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,
b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add:",
a,"can't be added as a child of itself."),this;if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}else console.error("THREE.Object3D.add:",a,"is not an instance of THREE.Object3D.");return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);
if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},raycast:function(){},traverse:function(a){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverseVisible(a)}},getObjectById:function(a,b){for(var c=0,d=this.children.length;c<
d;c++){var e=this.children[c];if(e.id===a||!0===b&&(e=e.getObjectById(a,b),void 0!==e))return e}},getObjectByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getObjectByName(a,b),void 0!==e))return e}},getChildByName:function(a,b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a,b)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);
this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D);void 0===b&&(b=!0);a.name=this.name;a.up.copy(this.up);
a.position.copy(this.position);a.quaternion.copy(this.quaternion);a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));if(!0===
b)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Projector=function(){function a(){if(l===s){var a=new THREE.RenderableVertex;n.push(a);s++;l++;return a}return n[l++]}function b(){if(t===w){var a=new THREE.RenderableFace;v.push(a);w++;t++;return a}return v[t++]}function c(){if(A===u){var a=new THREE.RenderableLine;y.push(a);u++;A++;return a}return y[A++]}function d(){if(C===D){var a=new THREE.RenderableSprite;z.push(a);D++;C++;return a}return z[C++]}function e(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function f(a,b){var c=0,d=
1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,h=-b.z+b.w;if(0<=e&&0<=f&&0<=g&&0<=h)return!0;if(0>e&&0>f||0>g&&0>h)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var g,k,m=[],r=0,q,l,n=[],s=0,h,t,v=[],w=0,x,A,y=[],u=0,B,C,z=[],D=0,E={objects:[],lights:[],elements:[]},O=new THREE.Vector3,Z=new THREE.Vector3,P=new THREE.Vector3,H=new THREE.Vector3,K=new THREE.Vector4,L=new THREE.Box3(new THREE.Vector3(-1,
-1,-1),new THREE.Vector3(1,1,1)),G=new THREE.Box3,I=Array(3),Q=new THREE.Matrix4,T=new THREE.Matrix4,X,J=new THREE.Matrix4,R=new THREE.Matrix3,F=new THREE.Frustum,N=new THREE.Vector4,V=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);T.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(T)};this.unprojectVector=function(){var a=new THREE.Matrix4;return function(b,c){a.getInverse(c.projectionMatrix);T.multiplyMatrices(c.matrixWorld,
a);return b.applyProjection(T)}}();this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,c)};var Y=new function(){var d=[],e=[],f=null,g=null,k=new THREE.Matrix3,l=function(a){var b=a.positionWorld,c=a.positionScreen;b.copy(a.position).applyMatrix4(X);c.copy(b).applyMatrix4(T);b=1/c.w;c.x*=b;c.y*=b;c.z*=b;a.visible=-1<=c.x&&1>=c.x&&-1<=c.y&&1>=c.y&&-1<=c.z&&1>=c.z},m=function(a,
b,c){if(!0===a.visible||!0===b.visible||!0===c.visible)return!0;I[0]=a.positionScreen;I[1]=b.positionScreen;I[2]=c.positionScreen;return L.isIntersectionBox(G.setFromPoints(I))},r=function(a,b,c){return 0>(c.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(c.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)};return{setObject:function(a){f=a;g=f.material;k.getNormalMatrix(f.matrixWorld);d.length=0;e.length=0},projectVertex:l,checkTriangleVisibility:m,
checkBackfaceCulling:r,pushVertex:function(b,c,d){q=a();q.position.set(b,c,d);l(q)},pushNormal:function(a,b,c){d.push(a,b,c)},pushUv:function(a,b){e.push(a,b)},pushLine:function(a,b){var d=n[a],e=n[b];x=c();x.id=f.id;x.v1.copy(d);x.v2.copy(e);x.z=(d.positionScreen.z+e.positionScreen.z)/2;x.material=f.material;E.elements.push(x)},pushTriangle:function(a,c,l){var q=n[a],s=n[c],t=n[l];if(!1!==m(q,s,t)&&(g.side===THREE.DoubleSide||!0===r(q,s,t))){h=b();h.id=f.id;h.v1.copy(q);h.v2.copy(s);h.v3.copy(t);
h.z=(q.positionScreen.z+s.positionScreen.z+t.positionScreen.z)/3;for(q=0;3>q;q++)s=3*arguments[q],t=h.vertexNormalsModel[q],t.set(d[s],d[s+1],d[s+2]),t.applyMatrix3(k).normalize(),s=2*arguments[q],h.uvs[q].set(e[s],e[s+1]);h.vertexNormalsLength=3;h.material=f.material;E.elements.push(h)}}}};this.projectScene=function(q,s,w,v){C=A=t=0;E.elements.length=0;!0===q.autoUpdate&&q.updateMatrixWorld();void 0===s.parent&&s.updateMatrixWorld();Q.copy(s.matrixWorldInverse.getInverse(s.matrixWorld));T.multiplyMatrices(s.projectionMatrix,
Q);F.setFromMatrix(T);k=0;E.objects.length=0;E.lights.length=0;q.traverseVisible(function(a){if(a instanceof THREE.Light)E.lights.push(a);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Sprite)if(!1===a.frustumCulled||!0===F.intersectsObject(a)){if(k===r){var b=new THREE.RenderableObject;m.push(b);r++;k++;g=b}else g=m[k++];g.id=a.id;g.object=a;null!==a.renderDepth?g.z=a.renderDepth:(H.setFromMatrixPosition(a.matrixWorld),H.applyProjection(T),g.z=H.z);E.objects.push(g)}});
!0===w&&E.objects.sort(e);q=0;for(w=E.objects.length;q<w;q++){var u=E.objects[q].object,z=u.geometry;Y.setObject(u);X=u.matrixWorld;l=0;if(u instanceof THREE.Mesh)if(z instanceof THREE.BufferGeometry){var y=z.attributes,u=z.offsets;if(void 0!==y.position){for(var D=y.position.array,z=0,I=D.length;z<I;z+=3)Y.pushVertex(D[z],D[z+1],D[z+2]);if(void 0!==y.normal)for(var G=y.normal.array,z=0,I=G.length;z<I;z+=3)Y.pushNormal(G[z],G[z+1],G[z+2]);if(void 0!==y.uv)for(G=y.uv.array,z=0,I=G.length;z<I;z+=2)Y.pushUv(G[z],
G[z+1]);if(void 0!==y.index)if(y=y.index.array,0<u.length)for(q=0;q<u.length;q++)for(I=u[q],D=I.index,z=I.start,I=I.start+I.count;z<I;z+=3)Y.pushTriangle(y[z]+D,y[z+1]+D,y[z+2]+D);else for(z=0,I=y.length;z<I;z+=3)Y.pushTriangle(y[z],y[z+1],y[z+2]);else for(z=0,I=D.length/3;z<I;z+=3)Y.pushTriangle(z,z+1,z+2)}}else{if(z instanceof THREE.Geometry){var L=z.vertices,I=z.faces,y=z.faceVertexUvs[0];R.getNormalMatrix(X);for(var D=u.material instanceof THREE.MeshFaceMaterial,G=!0===D?u.material:null,ma=0,
ca=L.length;ma<ca;ma++){var ia=L[ma];Y.pushVertex(ia.x,ia.y,ia.z)}L=0;for(ma=I.length;L<ma;L++){var ca=I[L],xa=!0===D?G.materials[ca.materialIndex]:u.material;if(void 0!==xa){var la=xa.side,ia=n[ca.a],sa=n[ca.b],qa=n[ca.c];if(!0===xa.morphTargets){var Ca=z.morphTargets,za=u.morphTargetInfluences,fa=ia.position,ta=sa.position,Ia=qa.position;O.set(0,0,0);Z.set(0,0,0);P.set(0,0,0);for(var Ra=0,Sa=Ca.length;Ra<Sa;Ra++){var Da=za[Ra];if(0!==Da){var ua=Ca[Ra].vertices;O.x+=(ua[ca.a].x-fa.x)*Da;O.y+=(ua[ca.a].y-
fa.y)*Da;O.z+=(ua[ca.a].z-fa.z)*Da;Z.x+=(ua[ca.b].x-ta.x)*Da;Z.y+=(ua[ca.b].y-ta.y)*Da;Z.z+=(ua[ca.b].z-ta.z)*Da;P.x+=(ua[ca.c].x-Ia.x)*Da;P.y+=(ua[ca.c].y-Ia.y)*Da;P.z+=(ua[ca.c].z-Ia.z)*Da}}ia.position.add(O);sa.position.add(Z);qa.position.add(P);Y.projectVertex(ia);Y.projectVertex(sa);Y.projectVertex(qa)}if(!1!==Y.checkTriangleVisibility(ia,sa,qa)){Ca=Y.checkBackfaceCulling(ia,sa,qa);if(la!==THREE.DoubleSide){if(la===THREE.FrontSide&&!1===Ca)continue;if(la===THREE.BackSide&&!0===Ca)continue}h=
b();h.id=u.id;h.v1.copy(ia);h.v2.copy(sa);h.v3.copy(qa);h.normalModel.copy(ca.normal);!1!==Ca||la!==THREE.BackSide&&la!==THREE.DoubleSide||h.normalModel.negate();h.normalModel.applyMatrix3(R).normalize();za=ca.vertexNormals;fa=0;for(ta=Math.min(za.length,3);fa<ta;fa++)Ia=h.vertexNormalsModel[fa],Ia.copy(za[fa]),!1!==Ca||la!==THREE.BackSide&&la!==THREE.DoubleSide||Ia.negate(),Ia.applyMatrix3(R).normalize();h.vertexNormalsLength=za.length;la=y[L];if(void 0!==la)for(Ca=0;3>Ca;Ca++)h.uvs[Ca].copy(la[Ca]);
h.color=ca.color;h.material=xa;h.z=(ia.positionScreen.z+sa.positionScreen.z+qa.positionScreen.z)/3;E.elements.push(h)}}}}}else if(u instanceof THREE.Line)if(z instanceof THREE.BufferGeometry){if(y=z.attributes,void 0!==y.position){D=y.position.array;z=0;for(I=D.length;z<I;z+=3)Y.pushVertex(D[z],D[z+1],D[z+2]);if(void 0!==y.index)for(y=y.index.array,z=0,I=y.length;z<I;z+=2)Y.pushLine(y[z],y[z+1]);else for(y=u.type===THREE.LinePieces?2:1,z=0,I=D.length/3-1;z<I;z+=y)Y.pushLine(z,z+1)}}else{if(z instanceof
THREE.Geometry&&(J.multiplyMatrices(T,X),L=u.geometry.vertices,0!==L.length))for(ia=a(),ia.positionScreen.copy(L[0]).applyMatrix4(J),y=u.type===THREE.LinePieces?2:1,ma=1,ca=L.length;ma<ca;ma++)ia=a(),ia.positionScreen.copy(L[ma]).applyMatrix4(J),0<(ma+1)%y||(sa=n[l-2],N.copy(ia.positionScreen),V.copy(sa.positionScreen),!0===f(N,V)&&(N.multiplyScalar(1/N.w),V.multiplyScalar(1/V.w),x=c(),x.id=u.id,x.v1.positionScreen.copy(N),x.v2.positionScreen.copy(V),x.z=Math.max(N.z,V.z),x.material=u.material,u.material.vertexColors===
THREE.VertexColors&&(x.vertexColors[0].copy(u.geometry.colors[ma]),x.vertexColors[1].copy(u.geometry.colors[ma-1])),E.elements.push(x)))}else u instanceof THREE.Sprite&&(K.set(X.elements[12],X.elements[13],X.elements[14],1),K.applyMatrix4(T),z=1/K.w,K.z*=z,-1<=K.z&&1>=K.z&&(B=d(),B.id=u.id,B.x=K.x*z,B.y=K.y*z,B.z=K.z,B.object=u,B.rotation=u.rotation,B.scale.x=u.scale.x*Math.abs(B.x-(K.x+s.projectionMatrix.elements[0])/(K.w+s.projectionMatrix.elements[12])),B.scale.y=u.scale.y*Math.abs(B.y-(K.y+s.projectionMatrix.elements[5])/
(K.w+s.projectionMatrix.elements[13])),B.material=u.material,E.elements.push(B)))}!0===v&&E.elements.sort(e);return E}};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.materialIndex=this.materialIndex;for(var b=0,c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}};
THREE.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,g)};THREE.BufferAttribute=function(a,b){this.array=a;this.itemSize=b};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},set:function(a){this.array.set(a);return this},setX:function(a,b){this.array[a*this.itemSize]=b;return this},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a]=b;this.array[a+1]=
c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this}};THREE.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int32Attribute=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.attributes={};this.offsets=this.drawcalls=[];this.boundingSphere=this.boundingBox=null};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c){!1===b instanceof THREE.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[a]={array:b,itemSize:c}):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),
b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0)},fromGeometry:function(a,b){b=b||{vertexColors:THREE.NoColors};var c=a.vertices,d=a.faces,e=a.faceVertexUvs,f=b.vertexColors,g=0<e[0].length,k=3==d[0].vertexNormals.length,m=new Float32Array(9*d.length);this.addAttribute("position",new THREE.BufferAttribute(m,3));var r=new Float32Array(9*d.length);this.addAttribute("normal",new THREE.BufferAttribute(r,3));if(f!==
THREE.NoColors){var q=new Float32Array(9*d.length);this.addAttribute("color",new THREE.BufferAttribute(q,3))}if(!0===g){var l=new Float32Array(6*d.length);this.addAttribute("uvs",new THREE.BufferAttribute(l,2))}for(var n=0,s=0,h=0;n<d.length;n++,s+=6,h+=9){var t=d[n],v=c[t.a],w=c[t.b],x=c[t.c];m[h]=v.x;m[h+1]=v.y;m[h+2]=v.z;m[h+3]=w.x;m[h+4]=w.y;m[h+5]=w.z;m[h+6]=x.x;m[h+7]=x.y;m[h+8]=x.z;!0===k?(v=t.vertexNormals[0],w=t.vertexNormals[1],x=t.vertexNormals[2],r[h]=v.x,r[h+1]=v.y,r[h+2]=v.z,r[h+3]=
w.x,r[h+4]=w.y,r[h+5]=w.z,r[h+6]=x.x,r[h+7]=x.y,r[h+8]=x.z):(v=t.normal,r[h]=v.x,r[h+1]=v.y,r[h+2]=v.z,r[h+3]=v.x,r[h+4]=v.y,r[h+5]=v.z,r[h+6]=v.x,r[h+7]=v.y,r[h+8]=v.z);f===THREE.FaceColors?(t=t.color,q[h]=t.r,q[h+1]=t.g,q[h+2]=t.b,q[h+3]=t.r,q[h+4]=t.g,q[h+5]=t.b,q[h+6]=t.r,q[h+7]=t.g,q[h+8]=t.b):f===THREE.VertexColors&&(v=t.vertexColors[0],w=t.vertexColors[1],t=t.vertexColors[2],q[h]=v.r,q[h+1]=v.g,q[h+2]=v.b,q[h+3]=w.r,q[h+4]=w.g,q[h+5]=w.b,q[h+6]=t.r,q[h+7]=t.g,q[h+8]=t.b);!0===g&&(t=e[0][n][0],
v=e[0][n][1],w=e[0][n][2],l[s]=t.x,l[s+1]=t.y,l[s+2]=v.x,l[s+3]=v.y,l[s+4]=w.x,l[s+5]=w.y)}this.computeBoundingSphere();return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var c=3,d=a.length;c<d;c+=3){var e=a[c],f=a[c+1],g=a[c+2];e<b.min.x?b.min.x=e:e>b.max.x&&(b.max.x=e);f<b.min.y?b.min.y=f:f>b.max.y&&
(b.max.y=f);g<b.min.z?b.min.z=g:g>b.max.z&&(b.max.z=g)}}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&
(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),a.expandByPoint(b);a.center(d);for(var g=0,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),g=Math.max(g,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(g);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),
computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else for(a=0,b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0;var e=this.attributes.position.array,f=this.attributes.normal.array,g,k,m,r,q,l,n=new THREE.Vector3,s=new THREE.Vector3,h=new THREE.Vector3,t=new THREE.Vector3,v=new THREE.Vector3;
if(this.attributes.index){var w=this.attributes.index.array,x=0<this.offsets.length?this.offsets:[{start:0,count:w.length,index:0}];c=0;for(d=x.length;c<d;++c){b=x[c].start;g=x[c].count;var A=x[c].index;a=b;for(b+=g;a<b;a+=3)g=A+w[a],k=A+w[a+1],m=A+w[a+2],r=e[3*g],q=e[3*g+1],l=e[3*g+2],n.set(r,q,l),r=e[3*k],q=e[3*k+1],l=e[3*k+2],s.set(r,q,l),r=e[3*m],q=e[3*m+1],l=e[3*m+2],h.set(r,q,l),t.subVectors(h,s),v.subVectors(n,s),t.cross(v),f[3*g]+=t.x,f[3*g+1]+=t.y,f[3*g+2]+=t.z,f[3*k]+=t.x,f[3*k+1]+=t.y,
f[3*k+2]+=t.z,f[3*m]+=t.x,f[3*m+1]+=t.y,f[3*m+2]+=t.z}}else for(a=0,b=e.length;a<b;a+=9)r=e[a],q=e[a+1],l=e[a+2],n.set(r,q,l),r=e[a+3],q=e[a+4],l=e[a+5],s.set(r,q,l),r=e[a+6],q=e[a+7],l=e[a+8],h.set(r,q,l),t.subVectors(h,s),v.subVectors(n,s),t.cross(v),f[a]=t.x,f[a+1]=t.y,f[a+2]=t.z,f[a+3]=t.x,f[a+4]=t.y,f[a+5]=t.z,f[a+6]=t.x,f[a+7]=t.y,f[a+8]=t.z;this.normalizeNormals();this.normalsNeedUpdate=!0}},computeTangents:function(){function a(a,b,c){l=d[3*a];n=d[3*a+1];s=d[3*a+2];h=d[3*b];t=d[3*b+1];v=d[3*
b+2];w=d[3*c];x=d[3*c+1];A=d[3*c+2];y=f[2*a];u=f[2*a+1];B=f[2*b];C=f[2*b+1];z=f[2*c];D=f[2*c+1];E=h-l;O=w-l;Z=t-n;P=x-n;H=v-s;K=A-s;L=B-y;G=z-y;I=C-u;Q=D-u;T=1/(L*Q-G*I);X.set((Q*E-I*O)*T,(Q*Z-I*P)*T,(Q*H-I*K)*T);J.set((L*O-G*E)*T,(L*P-G*Z)*T,(L*K-G*H)*T);m[a].add(X);m[b].add(X);m[c].add(X);r[a].add(J);r[b].add(J);r[c].add(J)}function b(a){ha.x=e[3*a];ha.y=e[3*a+1];ha.z=e[3*a+2];Pa.copy(ha);S=m[a];Ba.copy(S);Ba.sub(ha.multiplyScalar(ha.dot(S))).normalize();Na.crossVectors(Pa,S);La=Na.dot(r[a]);Ya=
0>La?-1:1;k[4*a]=Ba.x;k[4*a+1]=Ba.y;k[4*a+2]=Ba.z;k[4*a+3]=Ya}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var c=this.attributes.index.array,d=this.attributes.position.array,e=this.attributes.normal.array,f=this.attributes.uv.array,g=d.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent=
{itemSize:4,array:new Float32Array(4*g)});for(var k=this.attributes.tangent.array,m=[],r=[],q=0;q<g;q++)m[q]=new THREE.Vector3,r[q]=new THREE.Vector3;var l,n,s,h,t,v,w,x,A,y,u,B,C,z,D,E,O,Z,P,H,K,L,G,I,Q,T,X=new THREE.Vector3,J=new THREE.Vector3,R,F,N,V,Y,pa=this.offsets,q=0;for(F=pa.length;q<F;++q){R=pa[q].start;N=pa[q].count;var Ga=pa[q].index,g=R;for(R+=N;g<R;g+=3)N=Ga+c[g],V=Ga+c[g+1],Y=Ga+c[g+2],a(N,V,Y)}var Ba=new THREE.Vector3,Na=new THREE.Vector3,ha=new THREE.Vector3,Pa=new THREE.Vector3,
Ya,S,La,q=0;for(F=pa.length;q<F;++q)for(R=pa[q].start,N=pa[q].count,Ga=pa[q].index,g=R,R+=N;g<R;g+=3)N=Ga+c[g],V=Ga+c[g+1],Y=Ga+c[g+2],b(N),b(V),b(Y)}},computeOffsets:function(a){var b=a;void 0===a&&(b=65535);Date.now();a=this.attributes.index.array;for(var c=this.attributes.position.array,d=a.length/3,e=new Uint16Array(a.length),f=0,g=0,k=[{start:0,count:0,index:0}],m=k[0],r=0,q=0,l=new Int32Array(6),n=new Int32Array(c.length),s=new Int32Array(c.length),h=0;h<c.length;h++)n[h]=-1,s[h]=-1;for(c=0;c<
d;c++){for(var t=q=0;3>t;t++)h=a[3*c+t],-1==n[h]?(l[2*t]=h,l[2*t+1]=-1,q++):n[h]<m.index?(l[2*t]=h,l[2*t+1]=-1,r++):(l[2*t]=h,l[2*t+1]=n[h]);if(g+q>m.index+b)for(m={start:f,count:0,index:g},k.push(m),q=0;6>q;q+=2)t=l[q+1],-1<t&&t<m.index&&(l[q+1]=-1);for(q=0;6>q;q+=2)h=l[q],t=l[q+1],-1===t&&(t=g++),n[h]=t,s[t]=h,e[f++]=t-m.index,m.count++}this.reorderBuffers(e,s,g);return this.offsets=k},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var a=this.attributes.normal.array,
b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},reorderBuffers:function(a,b,c){var d={},e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f;for(f in this.attributes)if("index"!=f)for(var g=this.attributes[f].array,k=0,m=e.length;k<m;k++){var r=e[k];if(g instanceof r){d[f]=new r(this.attributes[f].itemSize*c);break}}for(e=0;e<c;e++)for(f in g=b[e],this.attributes)if("index"!=
f)for(var k=this.attributes[f].array,m=this.attributes[f].itemSize,r=d[f],q=0;q<m;q++)r[e*m+q]=k[g*m+q];this.attributes.index.array=a;for(f in this.attributes)"index"!=f&&(this.attributes[f].array=d[f],this.attributes[f].numItems=this.attributes[f].itemSize*c)},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,
array:null},d=0,g=b.length;d<g;d++){var k=b[d];if(e instanceof k){f.array=new k(e);break}}a.attributes[c]=f}d=0;for(g=this.offsets.length;d<g;d++)b=this.offsets[d],a.offsets.push({start:b.start,index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);
THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.groupsNeedUpdate=this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=
this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},
center:function(){this.computeBoundingBox();var a=new THREE.Vector3;a.addVectors(this.boundingBox.min,this.boundingBox.max);a.multiplyScalar(-.5);this.applyMatrix((new THREE.Matrix4).makeTranslation(a.x,a.y,a.z));this.computeBoundingBox();return a},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},
computeVertexNormals:function(a){var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)d[b]=new THREE.Vector3;if(a){var e,f,g,k=new THREE.Vector3,m=new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],k.subVectors(g,f),m.subVectors(e,f),k.cross(m),d[c.a].add(k),d[c.b].add(k),d[c.c].add(k)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],
d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.vertexNormals[0]=d[c.a].clone(),c.vertexNormals[1]=d[c.b].clone(),c.vertexNormals[2]=d[c.c].clone()},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||
(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var g=this.morphNormals[a].vertexNormals,k,m;c=
0;for(d=this.faces.length;c<d;c++)k=new THREE.Vector3,m={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(k),g.push(m)}g=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],k=g.faceNormals[c],m=g.vertexNormals[c],k.copy(e.normal),m.a.copy(e.vertexNormals[0]),m.b.copy(e.vertexNormals[1]),m.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=
e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,f,g,k,m,r,q,l,n,s,h,t,v,w=[],x=[];c=new THREE.Vector3;var A=new THREE.Vector3,y=new THREE.Vector3,u=new THREE.Vector3,B=new THREE.Vector3;a=0;for(b=this.vertices.length;a<b;a++)w[a]=new THREE.Vector3,x[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],f=this.faceVertexUvs[0][a],d=e.a,v=e.b,e=e.c,g=this.vertices[d],k=this.vertices[v],m=this.vertices[e],r=f[0],q=f[1],l=f[2],
f=k.x-g.x,n=m.x-g.x,s=k.y-g.y,h=m.y-g.y,k=k.z-g.z,g=m.z-g.z,m=q.x-r.x,t=l.x-r.x,q=q.y-r.y,r=l.y-r.y,l=1/(m*r-t*q),c.set((r*f-q*n)*l,(r*s-q*h)*l,(r*k-q*g)*l),A.set((m*n-t*f)*l,(m*h-t*s)*l,(m*g-t*k)*l),w[d].add(c),w[v].add(c),w[e].add(c),x[d].add(A),x[v].add(A),x[e].add(A);A=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(e=this.faces[a],c=0;c<Math.min(e.vertexNormals.length,3);c++)B.copy(e.vertexNormals[c]),d=e[A[c]],v=w[d],y.copy(v),y.sub(B.multiplyScalar(B.dot(v))).normalize(),u.crossVectors(e.vertexNormals[c],
v),d=u.dot(x[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(y.x,y.y,y.z,d);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},
merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var d,e=this.vertices.length,f=this.vertices,g=a.vertices,k=this.faces,m=a.faces,r=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var q=0,l=g.length;q<l;q++){var n=g[q].clone();void 0!==b&&n.applyMatrix4(b);f.push(n)}q=0;for(l=m.length;q<l;q++){var g=m[q],s,h=g.vertexNormals,t=
g.vertexColors,n=new THREE.Face3(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=h.length;b<f;b++)s=h[b].clone(),void 0!==d&&s.applyMatrix3(d).normalize(),n.vertexNormals.push(s);n.color.copy(g.color);b=0;for(f=t.length;b<f;b++)s=t[b],n.vertexColors.push(s.clone());n.materialIndex=g.materialIndex+c;k.push(n)}q=0;for(l=a.length;q<l;q++)if(c=a[q],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(new THREE.Vector2(c[b].x,c[b].y));r.push(d)}}},mergeVertices:function(){var a=
{},b=[],c=[],d,e=Math.pow(10,4),f,g;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(g=this.faces.length;f<g;f++)for(e=this.faces[f],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]==e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(e,
1);f=this.vertices.length-b.length;this.vertices=b;return f},makeGroups:function(){var a=0;return function(b,c){var d,e,f,g,k={},m,r=this.morphTargets.length,q=this.morphNormals.length;this.geometryGroups={};this.geometryGroupsList=[];d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],f=b?f.materialIndex:0,f in k||(k[f]={hash:f,counter:0}),g=k[f].hash+"_"+k[f].counter,g in this.geometryGroups||(m={id:a++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:r,numMorphNormals:q},this.geometryGroups[g]=
m,this.geometryGroupsList.push(m)),this.geometryGroups[g].vertices+3>c&&(k[f].counter+=1,g=k[f].hash+"_"+k[f].counter,g in this.geometryGroups||(m={id:a++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:r,numMorphNormals:q},this.geometryGroups[g]=m,this.geometryGroupsList.push(m))),this.geometryGroups[g].faces3.push(d),this.geometryGroups[g].vertices+=3}}(),clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=
b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],g=0,k=e.length;g<k;g++)f.push(new THREE.Vector2(e[g].x,e[g].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};
THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);return a};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new THREE.Vector3(0,-1,0));this.add(g);var k=new THREE.PerspectiveCamera(90,
1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,1));this.add(k);var m=new THREE.PerspectiveCamera(90,1,a,b);m.up.set(0,-1,0);m.lookAt(new THREE.Vector3(0,0,-1));this.add(m);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,n=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=
2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,k,c);c.generateMipmaps=n;c.activeCubeFace=5;a.render(b,m,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};
THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};
THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=.5;this.quadraticAttenuation=.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,.99,.998];this.shadowCascadeFarZ=[.99,.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraLeft=this.shadowCameraLeft;a.shadowCameraRight=this.shadowCameraRight;a.shadowCameraTop=this.shadowCameraTop;a.shadowCameraBottom=this.shadowCameraBottom;a.shadowCameraVisible=
this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;a.shadowCascade=this.shadowCascade;a.shadowCascadeOffset.copy(this.shadowCascadeOffset);a.shadowCascadeCount=this.shadowCascadeCount;a.shadowCascadeBias=this.shadowCascadeBias.slice(0);a.shadowCascadeWidth=this.shadowCascadeWidth.slice(0);a.shadowCascadeHeight=this.shadowCascadeHeight.slice(0);a.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0);
a.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0);return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};
THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};
THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);
THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraFov=this.shadowCameraFov;a.shadowCameraVisible=this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=
this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};THREE.Cache=function(){this.files={}};THREE.Cache.prototype={constructor:THREE.Cache,add:function(a,b){this.files[a]=b},get:function(a){return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.imageLoader=new THREE.ImageLoader;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+
"%"):b+((a.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=this.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function d(a,
d,e,g,k,h,m){var v=b+e,w,x=THREE.Loader.Handlers.get(v);null!==x?w=x.load(v):(w=new THREE.Texture,x=f.imageLoader,x.crossOrigin=f.crossOrigin,x.load(v,function(a){if(!1===THREE.Math.isPowerOfTwo(a.width)||!1===THREE.Math.isPowerOfTwo(a.height)){var b=c(a.width),d=c(a.height),e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(a,0,0,b,d);w.image=e}else w.image=a;w.needsUpdate=!0}));w.sourceFile=e;g&&(w.repeat.set(g[0],g[1]),1!==g[0]&&(w.wrapS=THREE.RepeatWrapping),
1!==g[1]&&(w.wrapT=THREE.RepeatWrapping));k&&w.offset.set(k[0],k[1]);h&&(e={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==e[h[0]]&&(w.wrapS=e[h[0]]),void 0!==e[h[1]]&&(w.wrapT=e[h[1]]));m&&(w.anisotropy=m);a[d]=w}function e(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var f=this,g="MeshLambertMaterial",k={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var m=a.shading.toLowerCase();"phong"===m?g="MeshPhongMaterial":
"basic"===m&&(g="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(k.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)k.transparent=a.transparent;void 0!==a.depthTest&&(k.depthTest=a.depthTest);void 0!==a.depthWrite&&(k.depthWrite=a.depthWrite);void 0!==a.visible&&(k.visible=a.visible);void 0!==a.flipSided&&(k.side=THREE.BackSide);void 0!==a.doubleSided&&(k.side=THREE.DoubleSide);void 0!==a.wireframe&&(k.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===
a.vertexColors?k.vertexColors=THREE.FaceColors:a.vertexColors&&(k.vertexColors=THREE.VertexColors));a.colorDiffuse?k.color=e(a.colorDiffuse):a.DbgColor&&(k.color=a.DbgColor);a.colorSpecular&&(k.specular=e(a.colorSpecular));a.colorAmbient&&(k.ambient=e(a.colorAmbient));a.colorEmissive&&(k.emissive=e(a.colorEmissive));a.transparency&&(k.opacity=a.transparency);a.specularCoef&&(k.shininess=a.specularCoef);a.mapDiffuse&&b&&d(k,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,
a.mapDiffuseAnisotropy);a.mapLight&&b&&d(k,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&d(k,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&d(k,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&d(k,"specularMap",a.mapSpecular,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapAlpha&&
b&&d(k,"alphaMap",a.mapAlpha,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);a.mapBumpScale&&(k.bumpScale=a.mapBumpScale);a.mapNormal?(g=THREE.ShaderLib.normalmap,m=THREE.UniformsUtils.clone(g.uniforms),m.tNormal.value=k.normalMap,a.mapNormalFactor&&m.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),k.map&&(m.tDiffuse.value=k.map,m.enableDiffuse.value=!0),k.specularMap&&(m.tSpecular.value=k.specularMap,m.enableSpecular.value=!0),k.lightMap&&(m.tAO.value=k.lightMap,
m.enableAO.value=!0),m.diffuse.value.setHex(k.color),m.specular.value.setHex(k.specular),m.ambient.value.setHex(k.ambient),m.shininess.value=k.shininess,void 0!==k.opacity&&(m.opacity.value=k.opacity),g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:m,lights:!0,fog:!0}),k.transparent&&(g.transparent=!0)):g=new THREE[g](k);void 0!==a.DbgName&&(g.name=a.DbgName);return g}};
THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=0,c=this.handlers.length;b<c;b+=2){var d=this.handlers[b+1];if(this.handlers[b].test(a))return d}return null}};THREE.XHRLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);void 0!==f?b&&b(f):(f=new XMLHttpRequest,f.open("GET",a,!0),f.addEventListener("load",function(c){e.cache.add(a,this.response);b&&b(this.response);e.manager.itemEnd(a)},!1),void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&f.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(f.responseType=
this.responseType),f.send(null),e.manager.itemStart(a))},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);if(void 0!==f)b(f);else return f=document.createElement("img"),void 0!==b&&f.addEventListener("load",function(c){e.cache.add(a,this);b(this);e.manager.itemEnd(a)},!1),void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&f.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),f.src=a,e.manager.itemStart(a),f},setCrossOrigin:function(a){this.crossOrigin=
a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var k=JSON.parse(f.responseText);if(void 0!==k.metadata&&"scene"===k.metadata.type){console.error('THREE.JSONLoader: "'+b+'" seems to be a Scene. Use THREE.SceneLoader instead.');return}k=a.parse(k,d);c(k.geometry,k.materials)}else console.error('THREE.JSONLoader: "'+b+'" seems to be unreachable or the file is empty.');
a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+b+'" ('+f.status+")");else f.readyState===f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),e({total:g,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(g=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.withCredentials=this.withCredentials;f.send(null)};
THREE.JSONLoader.prototype.parse=function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,g,k,m,r,q,l,n,s,h,t,v,w,x=a.faces;q=a.vertices;var A=a.normals,y=a.colors,u=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&u++;for(d=0;d<u;d++)c.faceVertexUvs[d]=[]}m=0;for(r=q.length;m<r;)d=new THREE.Vector3,d.x=q[m++]*b,d.y=q[m++]*b,d.z=q[m++]*b,c.vertices.push(d);m=0;for(r=x.length;m<r;)if(b=x[m++],s=b&1,k=b&2,d=b&8,l=b&16,h=b&32,q=b&64,b&=128,s){s=new THREE.Face3;
s.a=x[m];s.b=x[m+1];s.c=x[m+3];t=new THREE.Face3;t.a=x[m+1];t.b=x[m+2];t.c=x[m+3];m+=4;k&&(k=x[m++],s.materialIndex=k,t.materialIndex=k);k=c.faces.length;if(d)for(d=0;d<u;d++)for(v=a.uvs[d],c.faceVertexUvs[d][k]=[],c.faceVertexUvs[d][k+1]=[],g=0;4>g;g++)n=x[m++],w=v[2*n],n=v[2*n+1],w=new THREE.Vector2(w,n),2!==g&&c.faceVertexUvs[d][k].push(w),0!==g&&c.faceVertexUvs[d][k+1].push(w);l&&(l=3*x[m++],s.normal.set(A[l++],A[l++],A[l]),t.normal.copy(s.normal));if(h)for(d=0;4>d;d++)l=3*x[m++],h=new THREE.Vector3(A[l++],
A[l++],A[l]),2!==d&&s.vertexNormals.push(h),0!==d&&t.vertexNormals.push(h);q&&(q=x[m++],q=y[q],s.color.setHex(q),t.color.setHex(q));if(b)for(d=0;4>d;d++)q=x[m++],q=y[q],2!==d&&s.vertexColors.push(new THREE.Color(q)),0!==d&&t.vertexColors.push(new THREE.Color(q));c.faces.push(s);c.faces.push(t)}else{s=new THREE.Face3;s.a=x[m++];s.b=x[m++];s.c=x[m++];k&&(k=x[m++],s.materialIndex=k);k=c.faces.length;if(d)for(d=0;d<u;d++)for(v=a.uvs[d],c.faceVertexUvs[d][k]=[],g=0;3>g;g++)n=x[m++],w=v[2*n],n=v[2*n+1],
w=new THREE.Vector2(w,n),c.faceVertexUvs[d][k].push(w);l&&(l=3*x[m++],s.normal.set(A[l++],A[l++],A[l]));if(h)for(d=0;3>d;d++)l=3*x[m++],h=new THREE.Vector3(A[l++],A[l++],A[l]),s.vertexNormals.push(h);q&&(q=x[m++],s.color.setHex(y[q]));if(b)for(d=0;3>d;d++)q=x[m++],s.vertexColors.push(new THREE.Color(y[q]));c.faces.push(s)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],
1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+
"), and skinWeights ("+c.skinWeights.length+") should match.");c.animation=a.animation;c.animations=a.animations})();(function(b){if(void 0!==a.morphTargets){var d,g,k,m,r,q;d=0;for(g=a.morphTargets.length;d<g;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=a.morphTargets[d].name,c.morphTargets[d].vertices=[],r=c.morphTargets[d].vertices,q=a.morphTargets[d].vertices,k=0,m=q.length;k<m;k+=3){var l=new THREE.Vector3;l.x=q[k]*b;l.y=q[k+1]*b;l.z=q[k+2]*b;r.push(l)}}if(void 0!==a.morphColors)for(d=
0,g=a.morphColors.length;d<g;d++)for(c.morphColors[d]={},c.morphColors[d].name=a.morphColors[d].name,c.morphColors[d].colors=[],m=c.morphColors[d].colors,r=a.morphColors[d].colors,b=0,k=r.length;b<k;b+=3)q=new THREE.Color(16755200),q.setRGB(r[b],r[b+1],r[b+2]),m.push(q)})(d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=this.initMaterials(a.materials,b);this.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}};
THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){f++};this.itemEnd=function(a){e++;if(void 0!==d.onProgress)d.onProgress(a,e,f);if(e===f&&void 0!==d.onLoad)d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d;for(d in c){var e=c[d];b.attributes[d]={itemSize:e.itemSize,array:new self[e.type](e.array)}}c=a.offsets;void 0!==c&&(b.offsets=JSON.parse(JSON.stringify(c)));a=a.boundingSphere;
void 0!==a&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==a.center?a.center:[0,0,0]),a.radius));return b}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.ambient&&b.ambient.setHex(a.ambient);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&
(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&(b.wireframe=a.wireframe);if(void 0!==a.materials)for(var c=
0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader(e.manager);f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials);return this.parseObject(a.object,b,c)},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,
e=0,f=a.length;e<f;e++){var g,k=a[e];switch(k.type){case "PlaneGeometry":g=new THREE.PlaneGeometry(k.width,k.height,k.widthSegments,k.heightSegments);break;case "BoxGeometry":case "CubeGeometry":g=new THREE.BoxGeometry(k.width,k.height,k.depth,k.widthSegments,k.heightSegments,k.depthSegments);break;case "CircleGeometry":g=new THREE.CircleGeometry(k.radius,k.segments);break;case "CylinderGeometry":g=new THREE.CylinderGeometry(k.radiusTop,k.radiusBottom,k.height,k.radialSegments,k.heightSegments,k.openEnded);
break;case "SphereGeometry":g=new THREE.SphereGeometry(k.radius,k.widthSegments,k.heightSegments,k.phiStart,k.phiLength,k.thetaStart,k.thetaLength);break;case "IcosahedronGeometry":g=new THREE.IcosahedronGeometry(k.radius,k.detail);break;case "TorusGeometry":g=new THREE.TorusGeometry(k.radius,k.tube,k.radialSegments,k.tubularSegments,k.arc);break;case "TorusKnotGeometry":g=new THREE.TorusKnotGeometry(k.radius,k.tube,k.radialSegments,k.tubularSegments,k.p,k.q,k.heightScale);break;case "BufferGeometry":g=
d.parse(k.data);break;case "Geometry":g=c.parse(k.data).geometry}g.uuid=k.uuid;void 0!==k.name&&(g.name=k.name);b[k.uuid]=g}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;d<e;d++){var f=a[d],g=c.parse(f);g.uuid=f.uuid;void 0!==f.name&&(g.name=f.name);b[f.uuid]=g}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,
b.aspect,b.near,b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,
b.groundColor,b.intensity);break;case "Mesh":e=c[b.geometry];var f=d[b.material];void 0===e&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry);void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Mesh(e,f);break;case "Sprite":f=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Sprite(f);break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?
(a.fromArray(b.matrix),a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var g in b.children)e.add(this.parseObject(b.children[g],c,d));return e}}()};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=new THREE.ImageLoader(this.manager);e.setCrossOrigin(this.crossOrigin);e.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)},c,d)},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;
a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.wrapAround=this.metal=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=
1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};THREE.PointCloudMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.PointCloudMaterial.prototype.clone=function(){var a=new THREE.PointCloudMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.defines={};this.uniforms={};this.attributes=null;this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=
!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a)};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.clone=function(){var a=new THREE.RawShaderMaterial;THREE.ShaderMaterial.prototype.clone.call(this,a);return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};
THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.fog=this.fog;return a};THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(a,c){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial;
THREE.Texture=function(a,b,c,d,e,f,g,k,m){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==m?m:1;this.format=void 0!==
g?g:THREE.RGBAFormat;this.type=void 0!==k?k:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this._needsUpdate=!1;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=
this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CubeTexture=function(a,b,c,d,e,f,g,k,m){THREE.Texture.call(this,a,b,c,d,e,f,g,k,m);this.images=a};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.clone=function(a){void 0===a&&(a=new THREE.CubeTexture);THREE.Texture.prototype.clone.call(this,a);a.images=this.images;return a};THREE.CompressedTexture=function(a,b,c,d,e,f,g,k,m,r,q){THREE.Texture.call(this,null,f,g,k,m,r,d,e,q);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,d,e,f,g,k,m,r,q){THREE.Texture.call(this,null,f,g,k,m,r,d,e,q);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};
THREE.PointCloud=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointCloudMaterial({color:16777215*Math.random()});this.sortParticles=!1};THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype);
THREE.PointCloud.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){var e=this,f=e.geometry,g=c.params.PointCloud.threshold;a.getInverse(this.matrixWorld);b.copy(c.ray).applyMatrix4(a);if(null===f.boundingBox||!1!==b.isIntersectionBox(f.boundingBox)){var k=g/((this.scale.x+this.scale.y+this.scale.z)/3),m=new THREE.Vector3,g=function(a,f){var g=b.distanceToPoint(a);if(g<k){var h=b.closestPointToPoint(a);h.applyMatrix4(e.matrixWorld);var l=c.ray.origin.distanceTo(h);
d.push({distance:l,distanceToRay:g,point:h.clone(),index:f,face:null,object:e})}};if(f instanceof THREE.BufferGeometry){var r=f.attributes,q=r.position.array;if(void 0!==r.index){var r=r.index.array,l=f.offsets;0===l.length&&(l=[{start:0,count:r.length,index:0}]);for(var n=0,s=l.length;n<s;++n)for(var h=l[n].start,t=l[n].index,f=h,h=h+l[n].count;f<h;f++){var v=t+r[f];m.set(q[3*v],q[3*v+1],q[3*v+2]);g(m,v)}}else for(r=q.length/3,f=0;f<r;f++)m.set(q[3*f],q[3*f+1],q[3*f+2]),g(m,f)}else for(m=this.geometry.vertices,
f=0;f<m.length;f++)g(m[f],f)}}}();THREE.PointCloud.prototype.clone=function(a){void 0===a&&(a=new THREE.PointCloud(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud.");return new THREE.PointCloud(a,b)};
THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==d.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(d.ray).applyMatrix4(a),g instanceof THREE.Geometry))for(var g=g.vertices,k=g.length,m=new THREE.Vector3,r=new THREE.Vector3,q=this.type===THREE.LineStrip?
1:2,l=0;l<k-1;l+=q)if(!(b.distanceSqToSegment(g[l],g[l+1],r,m)>f)){var n=b.origin.distanceTo(r);n<d.near||n>d.far||e.push({distance:n,point:m.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}();THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3;return function(g,k){var m=this.geometry;null===m.boundingSphere&&m.computeBoundingSphere();c.copy(m.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==g.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(g.ray).applyMatrix4(a),null===m.boundingBox||!1!==b.isIntersectionBox(m.boundingBox)))if(m instanceof THREE.BufferGeometry){var r=
this.material;if(void 0!==r){var q=m.attributes,l,n,s=g.precision;if(void 0!==q.index){var h=q.index.array,t=q.position.array,v=m.offsets;0===v.length&&(v=[{start:0,count:h.length,index:0}]);for(var w=0,x=v.length;w<x;++w)for(var q=v[w].start,A=v[w].index,m=q,y=q+v[w].count;m<y;m+=3){q=A+h[m];l=A+h[m+1];n=A+h[m+2];d.set(t[3*q],t[3*q+1],t[3*q+2]);e.set(t[3*l],t[3*l+1],t[3*l+2]);f.set(t[3*n],t[3*n+1],t[3*n+2]);var u=r.side===THREE.BackSide?b.intersectTriangle(f,e,d,!0):b.intersectTriangle(d,e,f,r.side!==
THREE.DoubleSide);if(null!==u){u.applyMatrix4(this.matrixWorld);var B=g.ray.origin.distanceTo(u);B<s||B<g.near||B>g.far||k.push({distance:B,point:u,indices:[q,l,n],face:null,faceIndex:null,object:this})}}}else for(t=q.position.array,h=m=0,y=t.length;m<y;m+=3,h+=9)q=m,l=m+1,n=m+2,d.set(t[h],t[h+1],t[h+2]),e.set(t[h+3],t[h+4],t[h+5]),f.set(t[h+6],t[h+7],t[h+8]),u=r.side===THREE.BackSide?b.intersectTriangle(f,e,d,!0):b.intersectTriangle(d,e,f,r.side!==THREE.DoubleSide),null!==u&&(u.applyMatrix4(this.matrixWorld),
B=g.ray.origin.distanceTo(u),B<s||B<g.near||B>g.far||k.push({distance:B,point:u,indices:[q,l,n],face:null,faceIndex:null,object:this}))}}else if(m instanceof THREE.Geometry)for(h=this.material instanceof THREE.MeshFaceMaterial,t=!0===h?this.material.materials:null,s=g.precision,v=m.vertices,w=0,x=m.faces.length;w<x;w++)if(A=m.faces[w],r=!0===h?t[A.materialIndex]:this.material,void 0!==r){q=v[A.a];l=v[A.b];n=v[A.c];if(!0===r.morphTargets){u=m.morphTargets;B=this.morphTargetInfluences;d.set(0,0,0);
e.set(0,0,0);f.set(0,0,0);for(var y=0,C=u.length;y<C;y++){var z=B[y];if(0!==z){var D=u[y].vertices;d.x+=(D[A.a].x-q.x)*z;d.y+=(D[A.a].y-q.y)*z;d.z+=(D[A.a].z-q.z)*z;e.x+=(D[A.b].x-l.x)*z;e.y+=(D[A.b].y-l.y)*z;e.z+=(D[A.b].z-l.z)*z;f.x+=(D[A.c].x-n.x)*z;f.y+=(D[A.c].y-n.y)*z;f.z+=(D[A.c].z-n.z)*z}}d.add(q);e.add(l);f.add(n);q=d;l=e;n=f}u=r.side===THREE.BackSide?b.intersectTriangle(n,l,q,!0):b.intersectTriangle(q,l,n,r.side!==THREE.DoubleSide);null!==u&&(u.applyMatrix4(this.matrixWorld),B=g.ray.origin.distanceTo(u),
B<s||B<g.near||B>g.far||k.push({distance:B,point:u,face:A,faceIndex:w,object:this}))}}}();THREE.Mesh.prototype.clone=function(a,b){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a,b);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);
THREE.Bone.prototype.updateMatrixWorld=function(a){THREE.Object3D.prototype.updateMatrixWorld.call(this,a);this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0};
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=
THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}};
THREE.Skeleton.prototype.pose=function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};
THREE.Skeleton.prototype.update=function(){for(var a=new THREE.Matrix4,b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)};
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e,f,g,k=0,m=this.geometry.bones.length;k<m;++k)d=this.geometry.bones[k],e=d.pos,f=d.rotq,g=d.scl,b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.set(e[0],e[1],e[2]),b.quaternion.set(f[0],f[1],f[2],f[3]),void 0!==g?b.scale.set(g[0],g[1],g[2]):b.scale.set(1,1,1);k=0;for(m=
this.geometry.bones.length;k<m;++k)d=this.geometry.bones[k],-1!==d.parent?a[d.parent].add(a[k]):this.add(a[k])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c))};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.bind=function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)};THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)};
THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)_?(\d+)/,e=0,f=a.morphTargets.length;e<f;e++){var g=a.morphTargets[e].name.match(d);if(g&&1<g.length){g=g[1];c[g]||(c[g]={start:Infinity,end:-Infinity});var k=c[g];e<k.start&&(k.start=e);e>k.end&&(k.end=e);b||(b=g)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=(c.end-c.start)/b*1E3,this.time=0):console.warn("animation["+a+"] undefined")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a!==this.currentKeyframe&&
(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[a]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=a);b=this.time%b/b;this.directionBackwards&&(b=1-b);this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};
THREE.MorphAnimMesh.prototype.interpolateTargets=function(a,b,c){for(var d=this.morphTargetInfluences,e=0,f=d.length;e<f;e++)d[e]=0;-1<a&&(d[a]=1-c);-1<b&&(d[b]=c)};
THREE.MorphAnimMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material));a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);
THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var d=1,e=this.objects.length;d<e;d++)if(c>=this.objects[d].distance)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;else break;for(;d<e;d++)this.objects[d].object.visible=!1}}}();
THREE.LOD.prototype.clone=function(a){void 0===a&&(a=new THREE.LOD);THREE.Object3D.prototype.clone.call(this,a);for(var b=0,c=this.objects.length;b<c;b++){var d=this.objects[b].object.clone();d.visible=0===b;a.addLevel(d,this.objects[b].distance)}return a};
THREE.Sprite=function(){var a=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0]),b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(a,3));return function(a){THREE.Object3D.call(this);this.geometry=b;this.material=void 0!==a?a:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);
THREE.Sprite.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceToPoint(a);d>this.scale.x||c.push({distance:d,point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};
THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}this.dispatchEvent({type:"objectAdded",object:a});a.dispatchEvent({type:"addedToScene",scene:this});for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));this.dispatchEvent({type:"objectRemoved",object:a});a.dispatchEvent({type:"removedFromScene",scene:this});for(b=
0;b<a.children.length;b++)this.__removeObject(a.children[b])};THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};
THREE.CanvasRenderer=function(a){function b(a,b,c,d){r(b);q(c);l(d);n(a.getStyle());H.stroke();ta.expandByScalar(2*b)}function c(a){s(a.getStyle());H.fill()}function d(a){e(a.target)}function e(a){if(!(a instanceof THREE.CompressedTexture)){var b=a.wrapS===THREE.RepeatWrapping,c=a.wrapT===THREE.RepeatWrapping,d=a.image,e=document.createElement("canvas");e.width=d.width;e.height=d.height;var f=e.getContext("2d");f.setTransform(1,0,0,-1,0,d.height);f.drawImage(d,0,0);ma[a.id]=H.createPattern(e,!0===
b&&!0===c?"repeat":!0===b&&!1===c?"repeat-x":!1===b&&!0===c?"repeat-y":"no-repeat")}}function f(a,b,c,f,g,h,k,l,m,n,q,r,t){if(!(t instanceof THREE.DataTexture)){!1===t.hasEventListener("update",d)&&(void 0!==t.image&&0<t.image.width&&e(t),t.addEventListener("update",d));var p=ma[t.id];if(void 0!==p){s(p);var p=t.offset.x/t.repeat.x,w=t.offset.y/t.repeat.y,u=t.image.width*t.repeat.x;t=t.image.height*t.repeat.y;k=(k+p)*u;l=(l+w)*t;c-=a;f-=b;g-=a;h-=b;m=(m+p)*u-k;n=(n+w)*t-l;q=(q+p)*u-k;r=(r+w)*t-l;
t=m*r-q*n;0!==t&&(p=1/t,t=(r*c-n*g)*p,n=(r*f-n*h)*p,c=(m*g-q*c)*p,f=(m*h-q*f)*p,a=a-t*k-c*l,b=b-n*k-f*l,H.save(),H.transform(t,n,c,f,a,b),H.fill(),H.restore())}else s("rgba(0,0,0,1)"),H.fill()}}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function k(a){G!==a&&(G=H.globalAlpha=a)}function m(a){I!==a&&(a===THREE.NormalBlending?H.globalCompositeOperation="source-over":a===THREE.AdditiveBlending?H.globalCompositeOperation="lighter":
a===THREE.SubtractiveBlending&&(H.globalCompositeOperation="darker"),I=a)}function r(a){X!==a&&(X=H.lineWidth=a)}function q(a){J!==a&&(J=H.lineCap=a)}function l(a){R!==a&&(R=H.lineJoin=a)}function n(a){Q!==a&&(Q=H.strokeStyle=a)}function s(a){T!==a&&(T=H.fillStyle=a)}function h(a){F.length!==a.length&&(H.setLineDash(a),F=a)}console.log("THREE.CanvasRenderer",THREE.REVISION);var t=THREE.Math.smoothstep;a=a||{};var v=this,w,x,A,y=new THREE.Projector,u=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
B=u.width,C=u.height,z=Math.floor(B/2),D=Math.floor(C/2),E=0,O=0,Z=B,P=C,H=u.getContext("2d",{alpha:!0===a.alpha}),K=new THREE.Color(0),L=0,G=1,I=0,Q=null,T=null,X=null,J=null,R=null,F=[],N,V,Y,pa;new THREE.RenderableVertex;new THREE.RenderableVertex;var Ga,Ba,Na,ha,Pa,Ya,S=new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;var La=new THREE.Color,Qa=new THREE.Color,hb=new THREE.Color,ma={},ca,ia,xa,la,sa,qa,Ca,za=new THREE.Box2,fa=new THREE.Box2,ta=new THREE.Box2,Ia=new THREE.Color,
Ra=new THREE.Color,Sa=new THREE.Color,Da=new THREE.Vector3,ua=new THREE.Vector3,va=new THREE.Vector3,Ha=new THREE.Matrix3;void 0===H.setLineDash&&(H.setLineDash=function(){});this.domElement=u;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=function(a,
b,c){B=a*this.devicePixelRatio;C=b*this.devicePixelRatio;u.width=B;u.height=C;z=Math.floor(B/2);D=Math.floor(C/2);!1!==c&&(u.style.width=a+"px",u.style.height=b+"px");za.min.set(-z,-D);za.max.set(z,D);fa.min.set(-z,-D);fa.max.set(z,D);G=1;I=0;R=J=X=T=Q=null;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){E=a*this.devicePixelRatio;O=b*this.devicePixelRatio;Z=c*this.devicePixelRatio;P=d*this.devicePixelRatio};this.setScissor=function(){};this.enableScissorTest=function(){};this.setClearColor=
function(a,b){K.set(a);L=void 0!==b?b:1;fa.min.set(-z,-D);fa.max.set(z,D)};this.setClearColorHex=function(a,b){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return K};this.getClearAlpha=function(){return L};this.getMaxAnisotropy=function(){return 0};this.clear=function(){!1===fa.empty()&&(fa.intersect(za),fa.expandByScalar(2),fa.min.x+=z,fa.min.y=-fa.min.y+D,fa.max.x+=z,fa.max.y=-fa.max.y+
D,1>L&&H.clearRect(fa.min.x|0,fa.min.y|0,fa.max.x-fa.min.x|0,fa.max.y-fa.min.y|0),0<L&&(m(THREE.NormalBlending),k(1),s("rgba("+Math.floor(255*K.r)+","+Math.floor(255*K.g)+","+Math.floor(255*K.b)+","+L+")"),H.fillRect(fa.min.x|0,fa.min.y|0,fa.max.x-fa.min.x|0,fa.max.y-fa.min.y|0)),fa.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(a,u){if(!1===u instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");
else{!0===this.autoClear&&this.clear();v.info.render.vertices=0;v.info.render.faces=0;H.setTransform(Z/B,0,0,-P/C,E,C-O);H.translate(z,D);w=y.projectScene(a,u,this.sortObjects,this.sortElements);x=w.elements;A=w.lights;N=u;Ha.getNormalMatrix(u.matrixWorldInverse);Ia.setRGB(0,0,0);Ra.setRGB(0,0,0);Sa.setRGB(0,0,0);for(var T=0,X=A.length;T<X;T++){var J=A[T],F=J.color;J instanceof THREE.AmbientLight?Ia.add(F):J instanceof THREE.DirectionalLight?Ra.add(F):J instanceof THREE.PointLight&&Sa.add(F)}T=0;
for(X=x.length;T<X;T++){var R=x[T],I=R.material;if(void 0!==I&&0!==I.opacity){ta.makeEmpty();if(R instanceof THREE.RenderableSprite){V=R;V.x*=z;V.y*=D;var J=V,K=R,F=I;k(F.opacity);m(F.blending);var G=K.scale.x*z,K=K.scale.y*D,R=.5*Math.sqrt(G*G+K*K);ta.min.set(J.x-R,J.y-R);ta.max.set(J.x+R,J.y+R);if(F instanceof THREE.SpriteMaterial){var L=F.map;if(null!==L&&void 0!==L.image){!1===L.hasEventListener("update",d)&&(0<L.image.width&&e(L),L.addEventListener("update",d));R=ma[L.id];void 0!==R?s(R):s("rgba( 0, 0, 0, 1 )");
var Q=L.image,R=Q.width*L.offset.x,I=Q.height*L.offset.y,ra=Q.width*L.repeat.x,L=Q.height*L.repeat.y,Q=G/ra,p=K/L;H.save();H.translate(J.x,J.y);0!==F.rotation&&H.rotate(F.rotation);H.translate(-G/2,-K/2);H.scale(Q,p);H.translate(-R,-I);H.fillRect(R,I,ra,L)}else s(F.color.getStyle()),H.save(),H.translate(J.x,J.y),0!==F.rotation&&H.rotate(F.rotation),H.scale(G,-K),H.fillRect(-.5,-.5,1,1);H.restore()}else F instanceof THREE.SpriteCanvasMaterial&&(n(F.color.getStyle()),s(F.color.getStyle()),H.save(),
H.translate(J.x,J.y),0!==F.rotation&&H.rotate(F.rotation),H.scale(G,K),F.program(H),H.restore())}else if(R instanceof THREE.RenderableLine){if(V=R.v1,Y=R.v2,V.positionScreen.x*=z,V.positionScreen.y*=D,Y.positionScreen.x*=z,Y.positionScreen.y*=D,ta.setFromPoints([V.positionScreen,Y.positionScreen]),!0===za.isIntersectionBox(ta))if(J=V,F=Y,G=R,K=I,k(K.opacity),m(K.blending),H.beginPath(),H.moveTo(J.positionScreen.x,J.positionScreen.y),H.lineTo(F.positionScreen.x,F.positionScreen.y),K instanceof THREE.LineBasicMaterial){r(K.linewidth);
q(K.linecap);l(K.linejoin);if(K.vertexColors!==THREE.VertexColors)n(K.color.getStyle());else if(R=G.vertexColors[0].getStyle(),G=G.vertexColors[1].getStyle(),R===G)n(R);else{try{var fb=H.createLinearGradient(J.positionScreen.x,J.positionScreen.y,F.positionScreen.x,F.positionScreen.y);fb.addColorStop(0,R);fb.addColorStop(1,G)}catch(zb){fb=R}n(fb)}H.stroke();ta.expandByScalar(2*K.linewidth)}else K instanceof THREE.LineDashedMaterial&&(r(K.linewidth),q(K.linecap),l(K.linejoin),n(K.color.getStyle()),
h([K.dashSize,K.gapSize]),H.stroke(),ta.expandByScalar(2*K.linewidth),h([]))}else if(R instanceof THREE.RenderableFace){V=R.v1;Y=R.v2;pa=R.v3;if(-1>V.positionScreen.z||1<V.positionScreen.z)continue;if(-1>Y.positionScreen.z||1<Y.positionScreen.z)continue;if(-1>pa.positionScreen.z||1<pa.positionScreen.z)continue;V.positionScreen.x*=z;V.positionScreen.y*=D;Y.positionScreen.x*=z;Y.positionScreen.y*=D;pa.positionScreen.x*=z;pa.positionScreen.y*=D;0<I.overdraw&&(g(V.positionScreen,Y.positionScreen,I.overdraw),
g(Y.positionScreen,pa.positionScreen,I.overdraw),g(pa.positionScreen,V.positionScreen,I.overdraw));ta.setFromPoints([V.positionScreen,Y.positionScreen,pa.positionScreen]);if(!0===za.isIntersectionBox(ta)){F=V;G=Y;K=pa;J=I;v.info.render.vertices+=3;v.info.render.faces++;k(J.opacity);m(J.blending);Ga=F.positionScreen.x;Ba=F.positionScreen.y;Na=G.positionScreen.x;ha=G.positionScreen.y;Pa=K.positionScreen.x;Ya=K.positionScreen.y;var I=Ga,ra=Ba,L=Na,Q=ha,p=Pa,gb=Ya;H.beginPath();H.moveTo(I,ra);H.lineTo(L,
Q);H.lineTo(p,gb);H.closePath();if((J instanceof THREE.MeshLambertMaterial||J instanceof THREE.MeshPhongMaterial)&&null===J.map){La.copy(J.color);Qa.copy(J.emissive);J.vertexColors===THREE.FaceColors&&La.multiply(R.color);S.copy(Ia);ua.copy(F.positionWorld).add(G.positionWorld).add(K.positionWorld).divideScalar(3);F=ua;G=R.normalModel;K=S;R=0;for(I=A.length;R<I;R++)ra=A[R],hb.copy(ra.color),ra instanceof THREE.DirectionalLight?(L=Da.setFromMatrixPosition(ra.matrixWorld).normalize(),Q=G.dot(L),0>=
Q||(Q*=ra.intensity,K.add(hb.multiplyScalar(Q)))):ra instanceof THREE.PointLight&&(L=Da.setFromMatrixPosition(ra.matrixWorld),Q=G.dot(Da.subVectors(L,F).normalize()),0>=Q||(Q*=0==ra.distance?1:1-Math.min(F.distanceTo(L)/ra.distance,1),0!=Q&&(Q*=ra.intensity,K.add(hb.multiplyScalar(Q)))));S.multiply(La).add(Qa);!0===J.wireframe?b(S,J.wireframeLinewidth,J.wireframeLinecap,J.wireframeLinejoin):c(S)}else J instanceof THREE.MeshBasicMaterial||J instanceof THREE.MeshLambertMaterial||J instanceof THREE.MeshPhongMaterial?
null!==J.map?J.map.mapping instanceof THREE.UVMapping&&(ca=R.uvs,f(Ga,Ba,Na,ha,Pa,Ya,ca[0].x,ca[0].y,ca[1].x,ca[1].y,ca[2].x,ca[2].y,J.map)):null!==J.envMap?J.envMap.mapping instanceof THREE.SphericalReflectionMapping?(va.copy(R.vertexNormalsModel[0]).applyMatrix3(Ha),ia=.5*va.x+.5,xa=.5*va.y+.5,va.copy(R.vertexNormalsModel[1]).applyMatrix3(Ha),la=.5*va.x+.5,sa=.5*va.y+.5,va.copy(R.vertexNormalsModel[2]).applyMatrix3(Ha),qa=.5*va.x+.5,Ca=.5*va.y+.5,f(Ga,Ba,Na,ha,Pa,Ya,ia,xa,la,sa,qa,Ca,J.envMap)):
J.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(va.copy(R.vertexNormalsModel[0]).applyMatrix3(Ha),ia=-.5*va.x+.5,xa=-.5*va.y+.5,va.copy(R.vertexNormalsModel[1]).applyMatrix3(Ha),la=-.5*va.x+.5,sa=-.5*va.y+.5,va.copy(R.vertexNormalsModel[2]).applyMatrix3(Ha),qa=-.5*va.x+.5,Ca=-.5*va.y+.5,f(Ga,Ba,Na,ha,Pa,Ya,ia,xa,la,sa,qa,Ca,J.envMap)):(S.copy(J.color),J.vertexColors===THREE.FaceColors&&S.multiply(R.color),!0===J.wireframe?b(S,J.wireframeLinewidth,J.wireframeLinecap,J.wireframeLinejoin):
c(S)):(J instanceof THREE.MeshDepthMaterial?S.r=S.g=S.b=1-t(F.positionScreen.z*F.positionScreen.w,N.near,N.far):J instanceof THREE.MeshNormalMaterial?(va.copy(R.normalModel).applyMatrix3(Ha),S.setRGB(va.x,va.y,va.z).multiplyScalar(.5).addScalar(.5)):S.setRGB(1,1,1),!0===J.wireframe?b(S,J.wireframeLinewidth,J.wireframeLinecap,J.wireframeLinejoin):c(S))}}fa.union(ta)}}H.setTransform(1,0,0,1,0,0)}}};THREE.ShaderChunk={};THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n";
THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif";
THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;";
THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif";
THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";
THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif";THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif";
THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n";THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n";
THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif";
THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif";
THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";
THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif";THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif";
THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif";
THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";
THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d;return e}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",
value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},
hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},
opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,
THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,
THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,
{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,
THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",
THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},
specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,
THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,
THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",
THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,
"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,
"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,
"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",
value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},
specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n\tuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\n\tvec3 specularTex = vec3( 1.0 );\n\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n\tnormalTex.xy *= uNormalScale;\n\tnormalTex = normalize( normalTex );\n\tif( enableDiffuse ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\n\t\t\ttexelColor.xyz *= texelColor.xyz;\n\t\t\tgl_FragColor = gl_FragColor * texelColor;\n\t\t#else\n\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n\t\t#endif\n\t}\n\tif( enableAO ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 aoColor = texture2D( tAO, vUv );\n\t\t\taoColor.xyz *= aoColor.xyz;\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n\t\t#else\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n\t\t#endif\n\t}",
THREE.ShaderChunk.alphatest_fragment,"\tif( enableSpecular )\n\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\n\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n\tvec3 finalNormal = tsb * normalTex;\n\t#ifdef FLIP_SIDED\n\t\tfinalNormal = -finalNormal;\n\t#endif\n\tvec3 normal = normalize( finalNormal );\n\tvec3 viewPosition = normalize( vViewPosition );\n\t#if MAX_POINT_LIGHTS > 0\n\t\tvec3 pointDiffuse = vec3( 0.0 );\n\t\tvec3 pointSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat pointDistance = 1.0;\n\t\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n\t\t\tpointVector = normalize( pointVector );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n\t\t\t#endif\n\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\n\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\tvec3 spotDiffuse = vec3( 0.0 );\n\t\tvec3 spotSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat spotDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n\t\t\tspotVector = normalize( spotVector );\n\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\t\t\t\t#ifdef WRAP_AROUND\n\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\t\t\t\t#else\n\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t#endif\n\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\n\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n\t\t\t}\n\t\t}\n\t#endif\n\t#if MAX_DIR_LIGHTS > 0\n\t\tvec3 dirDiffuse = vec3( 0.0 );\n\t\tvec3 dirSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\t\tvec3 dirVector = normalize( lDirection.xyz );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n\t\t\t#endif\n\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\tvec3 hemiDiffuse = vec3( 0.0 );\n\t\tvec3 hemiSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\t\tvec3 lVector = normalize( lDirection.xyz );\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\t\t\themiDiffuse += diffuse * hemiColor;\n\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\t\t\tvec3 lVectorGround = -lVector;\n\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\t\t}\n\t#endif\n\tvec3 totalDiffuse = vec3( 0.0 );\n\tvec3 totalSpecular = vec3( 0.0 );\n\t#if MAX_DIR_LIGHTS > 0\n\t\ttotalDiffuse += dirDiffuse;\n\t\ttotalSpecular += dirSpecular;\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\ttotalDiffuse += hemiDiffuse;\n\t\ttotalSpecular += hemiSpecular;\n\t#endif\n\t#if MAX_POINT_LIGHTS > 0\n\t\ttotalDiffuse += pointDiffuse;\n\t\ttotalSpecular += pointSpecular;\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\ttotalDiffuse += spotDiffuse;\n\t\ttotalSpecular += spotSpecular;\n\t#endif\n\t#ifdef METAL\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\t#else\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\t#endif\n\tif ( enableReflection ) {\n\t\tvec3 vReflect;\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tif ( useRefract ) {\n\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\n\t\t} else {\n\t\t\tvReflect = reflect( cameraToVertex, normal );\n\t\t}\n\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n\t\t#ifdef GAMMA_INPUT\n\t\t\tcubeColor.xyz *= cubeColor.xyz;\n\t\t#endif\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n\t}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n\tuniform sampler2D tDisplacement;\n\tuniform float uDisplacementScale;\n\tuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"\t#ifdef USE_SKINNING\n\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\n\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n\t#else\n\t\tvNormal = normalize( normalMatrix * normal );\n\t\tvTangent = normalize( normalMatrix * tangent.xyz );\n\t#endif\n\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n\tvUv = uv * uRepeat + uOffset;\n\tvec3 displacedPosition;\n\t#ifdef VERTEX_TEXTURES\n\t\tif ( enableDisplacement ) {\n\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\n\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\n\t\t\tdisplacedPosition = position + normalize( normal ) * df;\n\t\t} else {\n\t\t\t#ifdef USE_SKINNING\n\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\t\tdisplacedPosition = skinned.xyz;\n\t\t\t#else\n\t\t\t\tdisplacedPosition = position;\n\t\t\t#endif\n\t\t}\n\t#else\n\t\t#ifdef USE_SKINNING\n\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\tdisplacedPosition = skinned.xyz;\n\t\t#else\n\t\t\tdisplacedPosition = position;\n\t\t#endif\n\t#endif\n\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;\n\tvViewPosition = -mvPosition.xyz;\n\t#ifdef USE_SHADOWMAP\n\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\t\t}\n\t#endif\n}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",
THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3);f.size=g;f.array=new Float32Array(c*g);f.buffer=p.createBuffer();f.buffer.belongsToAttribute=e;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}
function c(a,b){var c=b.geometry,g=a.faces3,h=3*g.length,k=1*g.length,Oa=3*g.length,g=d(b,a),l=f(g),m=e(g),n=g.vertexColors?g.vertexColors:!1;a.__vertexArray=new Float32Array(3*h);m&&(a.__normalArray=new Float32Array(3*h));c.hasTangents&&(a.__tangentArray=new Float32Array(4*h));n&&(a.__colorArray=new Float32Array(3*h));l&&(0<c.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*h)),1<c.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*h)));b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&
(a.__skinIndexArray=new Float32Array(4*h),a.__skinWeightArray=new Float32Array(4*h));c=null!==rb&&21845<k?Uint32Array:Uint16Array;a.__typeArray=c;a.__faceArray=new c(3*k);a.__lineArray=new c(2*Oa);if(a.numMorphTargets)for(a.__morphTargetsArrays=[],c=0,l=a.numMorphTargets;c<l;c++)a.__morphTargetsArrays.push(new Float32Array(3*h));if(a.numMorphNormals)for(a.__morphNormalsArrays=[],c=0,l=a.numMorphNormals;c<l;c++)a.__morphNormalsArrays.push(new Float32Array(3*h));a.__webglFaceCount=3*k;a.__webglLineCount=
2*Oa;if(g.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var q in g.attributes){var k=g.attributes[q],Oa={},s;for(s in k)Oa[s]=k[s];if(!Oa.__webglInitialized||Oa.createUniqueBuffers)Oa.__webglInitialized=!0,c=1,"v2"===Oa.type?c=2:"v3"===Oa.type?c=3:"v4"===Oa.type?c=4:"c"===Oa.type&&(c=3),Oa.size=c,Oa.array=new Float32Array(h*c),Oa.buffer=p.createBuffer(),Oa.buffer.belongsToAttribute=q,k.needsUpdate=!0,Oa.__original=k;a.__webglCustomAttributesList.push(Oa)}}a.__inittedArrays=
!0}function d(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function f(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a instanceof THREE.ShaderMaterial?!0:!1}function g(a){for(var b in a.attributes){var c=
"index"===b?p.ELEMENT_ARRAY_BUFFER:p.ARRAY_BUFFER,d=a.attributes[b];d.buffer=p.createBuffer();p.bindBuffer(c,d.buffer);p.bufferData(c,d.array,p.STATIC_DRAW)}}function k(a,b,c,d){for(var e in b){var f=b[e],g=c[e];if(0<=f)if(g){var h=g.itemSize;p.bindBuffer(p.ARRAY_BUFFER,g.buffer);r(f);p.vertexAttribPointer(f,h,p.FLOAT,!1,0,d*h*4)}else a.defaultAttributeValues&&(2===a.defaultAttributeValues[e].length?p.vertexAttrib2fv(f,a.defaultAttributeValues[e]):3===a.defaultAttributeValues[e].length&&p.vertexAttrib3fv(f,
a.defaultAttributeValues[e]))}q()}function m(){for(var a=0,b=Va.length;a<b;a++)Va[a]=0}function r(a){Va[a]=1;0===qb[a]&&(p.enableVertexAttribArray(a),qb[a]=1)}function q(){for(var a=0,b=qb.length;a<b;a++)qb[a]!==Va[a]&&(p.disableVertexAttribArray(a),qb[a]=0)}function l(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function n(a,b){return a.z!==b.z?a.z-b.z:a.id-b.id}function s(a,b){return b[0]-a[0]}function h(a,b,k){if(!1!==b.visible){var l=a.__webglObjects[b.id];if(l&&(!1===b.frustumCulled||!0===Xb.intersectsObject(b))){var m=
b.geometry,n,Oa,ab;if(m instanceof THREE.BufferGeometry){var q=p.DYNAMIC_DRAW,r=m.attributes,t,w;for(t in r)w=r[t],w.needsUpdate&&("index"===t?(p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,w.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,w.array,q)):(p.bindBuffer(p.ARRAY_BUFFER,w.buffer),p.bufferData(p.ARRAY_BUFFER,w.array,q)),w.needsUpdate=!1)}else if(b instanceof THREE.Mesh){if(m.buffersNeedUpdate||m.groupsNeedUpdate)m instanceof THREE.BufferGeometry?g(m):b instanceof THREE.Mesh&&A(a,b,m);for(var v=0,T=m.geometryGroupsList.length;v<
T;v++)if(n=m.geometryGroupsList[v],ab=d(b,n),(m.buffersNeedUpdate||m.groupsNeedUpdate)&&c(n,b),Oa=ab.attributes&&u(ab),m.verticesNeedUpdate||m.morphTargetsNeedUpdate||m.elementsNeedUpdate||m.uvsNeedUpdate||m.normalsNeedUpdate||m.colorsNeedUpdate||m.tangentsNeedUpdate||Oa){var x=n,z=b,C=p.DYNAMIC_DRAW,y=!m.dynamic,J=ab;if(x.__inittedArrays){var X=e(J),F=J.vertexColors?J.vertexColors:!1,R=f(J),D=X===THREE.SmoothShading,W=void 0,E=void 0,O=void 0,N=void 0,I=void 0,V=void 0,Xa=void 0,tc=void 0,Qb=void 0,
ib=void 0,Ma=void 0,aa=void 0,ba=void 0,ga=void 0,cc=void 0,K=void 0,dc=void 0,H=void 0,P=void 0,Z=void 0,L=void 0,G=void 0,Q=void 0,pa=void 0,Y=void 0,ha=void 0,Ga=void 0,Ba=void 0,fa=void 0,ca=void 0,Na=void 0,La=void 0,ka=void 0,oa=void 0,ia=void 0,va=void 0,ma=void 0,la=void 0,ta=void 0,Ca=void 0,ra=0,sa=0,Da=0,Ea=0,Ia=0,Qa=0,qa=0,za=0,xa=0,Ja=0,Ta=0,U=0,ua=void 0,Ha=x.__vertexArray,Va=x.__uvArray,Wa=x.__uv2Array,Ra=x.__normalArray,jb=x.__tangentArray,Sa=x.__colorArray,kb=x.__skinIndexArray,lb=
x.__skinWeightArray,fb=x.__morphTargetsArrays,gb=x.__morphNormalsArrays,eb=x.__webglCustomAttributesList,M=void 0,hb=x.__faceArray,Za=x.__lineArray,bb=z.geometry,pb=bb.elementsNeedUpdate,mb=bb.uvsNeedUpdate,rb=bb.normalsNeedUpdate,vb=bb.tangentsNeedUpdate,Jb=bb.colorsNeedUpdate,Kb=bb.morphTargetsNeedUpdate,qb=bb.vertices,na=x.faces3,Ab=bb.faces,zb=bb.faceVertexUvs[0],Hb=bb.faceVertexUvs[1],yb=bb.skinIndices,sb=bb.skinWeights,wb=bb.morphTargets,Pb=bb.morphNormals;if(bb.verticesNeedUpdate){W=0;for(E=
na.length;W<E;W++)N=Ab[na[W]],aa=qb[N.a],ba=qb[N.b],ga=qb[N.c],Ha[sa]=aa.x,Ha[sa+1]=aa.y,Ha[sa+2]=aa.z,Ha[sa+3]=ba.x,Ha[sa+4]=ba.y,Ha[sa+5]=ba.z,Ha[sa+6]=ga.x,Ha[sa+7]=ga.y,Ha[sa+8]=ga.z,sa+=9;p.bindBuffer(p.ARRAY_BUFFER,x.__webglVertexBuffer);p.bufferData(p.ARRAY_BUFFER,Ha,C)}if(Kb)for(ia=0,va=wb.length;ia<va;ia++){W=Ta=0;for(E=na.length;W<E;W++)ta=na[W],N=Ab[ta],aa=wb[ia].vertices[N.a],ba=wb[ia].vertices[N.b],ga=wb[ia].vertices[N.c],ma=fb[ia],ma[Ta]=aa.x,ma[Ta+1]=aa.y,ma[Ta+2]=aa.z,ma[Ta+3]=ba.x,
ma[Ta+4]=ba.y,ma[Ta+5]=ba.z,ma[Ta+6]=ga.x,ma[Ta+7]=ga.y,ma[Ta+8]=ga.z,J.morphNormals&&(D?(Ca=Pb[ia].vertexNormals[ta],H=Ca.a,P=Ca.b,Z=Ca.c):Z=P=H=Pb[ia].faceNormals[ta],la=gb[ia],la[Ta]=H.x,la[Ta+1]=H.y,la[Ta+2]=H.z,la[Ta+3]=P.x,la[Ta+4]=P.y,la[Ta+5]=P.z,la[Ta+6]=Z.x,la[Ta+7]=Z.y,la[Ta+8]=Z.z),Ta+=9;p.bindBuffer(p.ARRAY_BUFFER,x.__webglMorphTargetsBuffers[ia]);p.bufferData(p.ARRAY_BUFFER,fb[ia],C);J.morphNormals&&(p.bindBuffer(p.ARRAY_BUFFER,x.__webglMorphNormalsBuffers[ia]),p.bufferData(p.ARRAY_BUFFER,
gb[ia],C))}if(sb.length){W=0;for(E=na.length;W<E;W++)N=Ab[na[W]],pa=sb[N.a],Y=sb[N.b],ha=sb[N.c],lb[Ja]=pa.x,lb[Ja+1]=pa.y,lb[Ja+2]=pa.z,lb[Ja+3]=pa.w,lb[Ja+4]=Y.x,lb[Ja+5]=Y.y,lb[Ja+6]=Y.z,lb[Ja+7]=Y.w,lb[Ja+8]=ha.x,lb[Ja+9]=ha.y,lb[Ja+10]=ha.z,lb[Ja+11]=ha.w,Ga=yb[N.a],Ba=yb[N.b],fa=yb[N.c],kb[Ja]=Ga.x,kb[Ja+1]=Ga.y,kb[Ja+2]=Ga.z,kb[Ja+3]=Ga.w,kb[Ja+4]=Ba.x,kb[Ja+5]=Ba.y,kb[Ja+6]=Ba.z,kb[Ja+7]=Ba.w,kb[Ja+8]=fa.x,kb[Ja+9]=fa.y,kb[Ja+10]=fa.z,kb[Ja+11]=fa.w,Ja+=12;0<Ja&&(p.bindBuffer(p.ARRAY_BUFFER,
x.__webglSkinIndicesBuffer),p.bufferData(p.ARRAY_BUFFER,kb,C),p.bindBuffer(p.ARRAY_BUFFER,x.__webglSkinWeightsBuffer),p.bufferData(p.ARRAY_BUFFER,lb,C))}if(Jb&&F){W=0;for(E=na.length;W<E;W++)N=Ab[na[W]],Xa=N.vertexColors,tc=N.color,3===Xa.length&&F===THREE.VertexColors?(L=Xa[0],G=Xa[1],Q=Xa[2]):Q=G=L=tc,Sa[xa]=L.r,Sa[xa+1]=L.g,Sa[xa+2]=L.b,Sa[xa+3]=G.r,Sa[xa+4]=G.g,Sa[xa+5]=G.b,Sa[xa+6]=Q.r,Sa[xa+7]=Q.g,Sa[xa+8]=Q.b,xa+=9;0<xa&&(p.bindBuffer(p.ARRAY_BUFFER,x.__webglColorBuffer),p.bufferData(p.ARRAY_BUFFER,
Sa,C))}if(vb&&bb.hasTangents){W=0;for(E=na.length;W<E;W++)N=Ab[na[W]],Qb=N.vertexTangents,cc=Qb[0],K=Qb[1],dc=Qb[2],jb[qa]=cc.x,jb[qa+1]=cc.y,jb[qa+2]=cc.z,jb[qa+3]=cc.w,jb[qa+4]=K.x,jb[qa+5]=K.y,jb[qa+6]=K.z,jb[qa+7]=K.w,jb[qa+8]=dc.x,jb[qa+9]=dc.y,jb[qa+10]=dc.z,jb[qa+11]=dc.w,qa+=12;p.bindBuffer(p.ARRAY_BUFFER,x.__webglTangentBuffer);p.bufferData(p.ARRAY_BUFFER,jb,C)}if(rb&&X){W=0;for(E=na.length;W<E;W++)if(N=Ab[na[W]],I=N.vertexNormals,V=N.normal,3===I.length&&D)for(ca=0;3>ca;ca++)La=I[ca],Ra[Qa]=
La.x,Ra[Qa+1]=La.y,Ra[Qa+2]=La.z,Qa+=3;else for(ca=0;3>ca;ca++)Ra[Qa]=V.x,Ra[Qa+1]=V.y,Ra[Qa+2]=V.z,Qa+=3;p.bindBuffer(p.ARRAY_BUFFER,x.__webglNormalBuffer);p.bufferData(p.ARRAY_BUFFER,Ra,C)}if(mb&&zb&&R){W=0;for(E=na.length;W<E;W++)if(O=na[W],ib=zb[O],void 0!==ib)for(ca=0;3>ca;ca++)ka=ib[ca],Va[Da]=ka.x,Va[Da+1]=ka.y,Da+=2;0<Da&&(p.bindBuffer(p.ARRAY_BUFFER,x.__webglUVBuffer),p.bufferData(p.ARRAY_BUFFER,Va,C))}if(mb&&Hb&&R){W=0;for(E=na.length;W<E;W++)if(O=na[W],Ma=Hb[O],void 0!==Ma)for(ca=0;3>ca;ca++)oa=
Ma[ca],Wa[Ea]=oa.x,Wa[Ea+1]=oa.y,Ea+=2;0<Ea&&(p.bindBuffer(p.ARRAY_BUFFER,x.__webglUV2Buffer),p.bufferData(p.ARRAY_BUFFER,Wa,C))}if(pb){W=0;for(E=na.length;W<E;W++)hb[Ia]=ra,hb[Ia+1]=ra+1,hb[Ia+2]=ra+2,Ia+=3,Za[za]=ra,Za[za+1]=ra+1,Za[za+2]=ra,Za[za+3]=ra+2,Za[za+4]=ra+1,Za[za+5]=ra+2,za+=6,ra+=3;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,x.__webglFaceBuffer);p.bufferData(p.ELEMENT_ARRAY_BUFFER,hb,C);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,x.__webglLineBuffer);p.bufferData(p.ELEMENT_ARRAY_BUFFER,Za,C)}if(eb)for(ca=
0,Na=eb.length;ca<Na;ca++)if(M=eb[ca],M.__original.needsUpdate){U=0;if(1===M.size)if(void 0===M.boundTo||"vertices"===M.boundTo)for(W=0,E=na.length;W<E;W++)N=Ab[na[W]],M.array[U]=M.value[N.a],M.array[U+1]=M.value[N.b],M.array[U+2]=M.value[N.c],U+=3;else{if("faces"===M.boundTo)for(W=0,E=na.length;W<E;W++)ua=M.value[na[W]],M.array[U]=ua,M.array[U+1]=ua,M.array[U+2]=ua,U+=3}else if(2===M.size)if(void 0===M.boundTo||"vertices"===M.boundTo)for(W=0,E=na.length;W<E;W++)N=Ab[na[W]],aa=M.value[N.a],ba=M.value[N.b],
ga=M.value[N.c],M.array[U]=aa.x,M.array[U+1]=aa.y,M.array[U+2]=ba.x,M.array[U+3]=ba.y,M.array[U+4]=ga.x,M.array[U+5]=ga.y,U+=6;else{if("faces"===M.boundTo)for(W=0,E=na.length;W<E;W++)ga=ba=aa=ua=M.value[na[W]],M.array[U]=aa.x,M.array[U+1]=aa.y,M.array[U+2]=ba.x,M.array[U+3]=ba.y,M.array[U+4]=ga.x,M.array[U+5]=ga.y,U+=6}else if(3===M.size){var Fa;Fa="c"===M.type?["r","g","b"]:["x","y","z"];if(void 0===M.boundTo||"vertices"===M.boundTo)for(W=0,E=na.length;W<E;W++)N=Ab[na[W]],aa=M.value[N.a],ba=M.value[N.b],
ga=M.value[N.c],M.array[U]=aa[Fa[0]],M.array[U+1]=aa[Fa[1]],M.array[U+2]=aa[Fa[2]],M.array[U+3]=ba[Fa[0]],M.array[U+4]=ba[Fa[1]],M.array[U+5]=ba[Fa[2]],M.array[U+6]=ga[Fa[0]],M.array[U+7]=ga[Fa[1]],M.array[U+8]=ga[Fa[2]],U+=9;else if("faces"===M.boundTo)for(W=0,E=na.length;W<E;W++)ga=ba=aa=ua=M.value[na[W]],M.array[U]=aa[Fa[0]],M.array[U+1]=aa[Fa[1]],M.array[U+2]=aa[Fa[2]],M.array[U+3]=ba[Fa[0]],M.array[U+4]=ba[Fa[1]],M.array[U+5]=ba[Fa[2]],M.array[U+6]=ga[Fa[0]],M.array[U+7]=ga[Fa[1]],M.array[U+
8]=ga[Fa[2]],U+=9;else if("faceVertices"===M.boundTo)for(W=0,E=na.length;W<E;W++)ua=M.value[na[W]],aa=ua[0],ba=ua[1],ga=ua[2],M.array[U]=aa[Fa[0]],M.array[U+1]=aa[Fa[1]],M.array[U+2]=aa[Fa[2]],M.array[U+3]=ba[Fa[0]],M.array[U+4]=ba[Fa[1]],M.array[U+5]=ba[Fa[2]],M.array[U+6]=ga[Fa[0]],M.array[U+7]=ga[Fa[1]],M.array[U+8]=ga[Fa[2]],U+=9}else if(4===M.size)if(void 0===M.boundTo||"vertices"===M.boundTo)for(W=0,E=na.length;W<E;W++)N=Ab[na[W]],aa=M.value[N.a],ba=M.value[N.b],ga=M.value[N.c],M.array[U]=aa.x,
M.array[U+1]=aa.y,M.array[U+2]=aa.z,M.array[U+3]=aa.w,M.array[U+4]=ba.x,M.array[U+5]=ba.y,M.array[U+6]=ba.z,M.array[U+7]=ba.w,M.array[U+8]=ga.x,M.array[U+9]=ga.y,M.array[U+10]=ga.z,M.array[U+11]=ga.w,U+=12;else if("faces"===M.boundTo)for(W=0,E=na.length;W<E;W++)ga=ba=aa=ua=M.value[na[W]],M.array[U]=aa.x,M.array[U+1]=aa.y,M.array[U+2]=aa.z,M.array[U+3]=aa.w,M.array[U+4]=ba.x,M.array[U+5]=ba.y,M.array[U+6]=ba.z,M.array[U+7]=ba.w,M.array[U+8]=ga.x,M.array[U+9]=ga.y,M.array[U+10]=ga.z,M.array[U+11]=ga.w,
U+=12;else if("faceVertices"===M.boundTo)for(W=0,E=na.length;W<E;W++)ua=M.value[na[W]],aa=ua[0],ba=ua[1],ga=ua[2],M.array[U]=aa.x,M.array[U+1]=aa.y,M.array[U+2]=aa.z,M.array[U+3]=aa.w,M.array[U+4]=ba.x,M.array[U+5]=ba.y,M.array[U+6]=ba.z,M.array[U+7]=ba.w,M.array[U+8]=ga.x,M.array[U+9]=ga.y,M.array[U+10]=ga.z,M.array[U+11]=ga.w,U+=12;p.bindBuffer(p.ARRAY_BUFFER,M.buffer);p.bufferData(p.ARRAY_BUFFER,M.array,C)}y&&(delete x.__inittedArrays,delete x.__colorArray,delete x.__normalArray,delete x.__tangentArray,
delete x.__uvArray,delete x.__uv2Array,delete x.__faceArray,delete x.__vertexArray,delete x.__lineArray,delete x.__skinIndexArray,delete x.__skinWeightArray)}}m.verticesNeedUpdate=!1;m.morphTargetsNeedUpdate=!1;m.elementsNeedUpdate=!1;m.uvsNeedUpdate=!1;m.normalsNeedUpdate=!1;m.colorsNeedUpdate=!1;m.tangentsNeedUpdate=!1;m.buffersNeedUpdate=!1;ab.attributes&&B(ab)}else if(b instanceof THREE.Line){ab=d(b,m);Oa=ab.attributes&&u(ab);if(m.verticesNeedUpdate||m.colorsNeedUpdate||m.lineDistancesNeedUpdate||
Oa){var Gb=p.DYNAMIC_DRAW,tb,ub,xb,Ib,Aa,Ob,Vb=m.vertices,Wb=m.colors,ac=m.lineDistances,ec=Vb.length,Ac=Wb.length,Bc=ac.length,fc=m.__vertexArray,gc=m.__colorArray,uc=m.__lineDistanceArray,Cc=m.colorsNeedUpdate,Dc=m.lineDistancesNeedUpdate,nc=m.__webglCustomAttributesList,hc,vc,Ua,Zb,cb,ya;if(m.verticesNeedUpdate){for(tb=0;tb<ec;tb++)Ib=Vb[tb],Aa=3*tb,fc[Aa]=Ib.x,fc[Aa+1]=Ib.y,fc[Aa+2]=Ib.z;p.bindBuffer(p.ARRAY_BUFFER,m.__webglVertexBuffer);p.bufferData(p.ARRAY_BUFFER,fc,Gb)}if(Cc){for(ub=0;ub<Ac;ub++)Ob=
Wb[ub],Aa=3*ub,gc[Aa]=Ob.r,gc[Aa+1]=Ob.g,gc[Aa+2]=Ob.b;p.bindBuffer(p.ARRAY_BUFFER,m.__webglColorBuffer);p.bufferData(p.ARRAY_BUFFER,gc,Gb)}if(Dc){for(xb=0;xb<Bc;xb++)uc[xb]=ac[xb];p.bindBuffer(p.ARRAY_BUFFER,m.__webglLineDistanceBuffer);p.bufferData(p.ARRAY_BUFFER,uc,Gb)}if(nc)for(hc=0,vc=nc.length;hc<vc;hc++)if(ya=nc[hc],ya.needsUpdate&&(void 0===ya.boundTo||"vertices"===ya.boundTo)){Aa=0;Zb=ya.value.length;if(1===ya.size)for(Ua=0;Ua<Zb;Ua++)ya.array[Ua]=ya.value[Ua];else if(2===ya.size)for(Ua=
0;Ua<Zb;Ua++)cb=ya.value[Ua],ya.array[Aa]=cb.x,ya.array[Aa+1]=cb.y,Aa+=2;else if(3===ya.size)if("c"===ya.type)for(Ua=0;Ua<Zb;Ua++)cb=ya.value[Ua],ya.array[Aa]=cb.r,ya.array[Aa+1]=cb.g,ya.array[Aa+2]=cb.b,Aa+=3;else for(Ua=0;Ua<Zb;Ua++)cb=ya.value[Ua],ya.array[Aa]=cb.x,ya.array[Aa+1]=cb.y,ya.array[Aa+2]=cb.z,Aa+=3;else if(4===ya.size)for(Ua=0;Ua<Zb;Ua++)cb=ya.value[Ua],ya.array[Aa]=cb.x,ya.array[Aa+1]=cb.y,ya.array[Aa+2]=cb.z,ya.array[Aa+3]=cb.w,Aa+=4;p.bindBuffer(p.ARRAY_BUFFER,ya.buffer);p.bufferData(p.ARRAY_BUFFER,
ya.array,Gb)}}m.verticesNeedUpdate=!1;m.colorsNeedUpdate=!1;m.lineDistancesNeedUpdate=!1;ab.attributes&&B(ab)}else if(b instanceof THREE.PointCloud){ab=d(b,m);Oa=ab.attributes&&u(ab);if(m.verticesNeedUpdate||m.colorsNeedUpdate||b.sortParticles||Oa){var oc=p.DYNAMIC_DRAW,db,Bb,Cb,ea,Db,Rb,ic=m.vertices,pc=ic.length,qc=m.colors,wc=qc.length,Sb=m.__vertexArray,Tb=m.__colorArray,Mb=m.__sortArray,xc=m.verticesNeedUpdate,yc=m.colorsNeedUpdate,Nb=m.__webglCustomAttributesList,nb,$b,ja,ob,wa,da;if(b.sortParticles){Yb.copy(Lb);
Yb.multiply(b.matrixWorld);for(db=0;db<pc;db++)Cb=ic[db],Ka.copy(Cb),Ka.applyProjection(Yb),Mb[db]=[Ka.z,db];Mb.sort(s);for(db=0;db<pc;db++)Cb=ic[Mb[db][1]],ea=3*db,Sb[ea]=Cb.x,Sb[ea+1]=Cb.y,Sb[ea+2]=Cb.z;for(Bb=0;Bb<wc;Bb++)ea=3*Bb,Rb=qc[Mb[Bb][1]],Tb[ea]=Rb.r,Tb[ea+1]=Rb.g,Tb[ea+2]=Rb.b;if(Nb)for(nb=0,$b=Nb.length;nb<$b;nb++)if(da=Nb[nb],void 0===da.boundTo||"vertices"===da.boundTo)if(ea=0,ob=da.value.length,1===da.size)for(ja=0;ja<ob;ja++)Db=Mb[ja][1],da.array[ja]=da.value[Db];else if(2===da.size)for(ja=
0;ja<ob;ja++)Db=Mb[ja][1],wa=da.value[Db],da.array[ea]=wa.x,da.array[ea+1]=wa.y,ea+=2;else if(3===da.size)if("c"===da.type)for(ja=0;ja<ob;ja++)Db=Mb[ja][1],wa=da.value[Db],da.array[ea]=wa.r,da.array[ea+1]=wa.g,da.array[ea+2]=wa.b,ea+=3;else for(ja=0;ja<ob;ja++)Db=Mb[ja][1],wa=da.value[Db],da.array[ea]=wa.x,da.array[ea+1]=wa.y,da.array[ea+2]=wa.z,ea+=3;else if(4===da.size)for(ja=0;ja<ob;ja++)Db=Mb[ja][1],wa=da.value[Db],da.array[ea]=wa.x,da.array[ea+1]=wa.y,da.array[ea+2]=wa.z,da.array[ea+3]=wa.w,
ea+=4}else{if(xc)for(db=0;db<pc;db++)Cb=ic[db],ea=3*db,Sb[ea]=Cb.x,Sb[ea+1]=Cb.y,Sb[ea+2]=Cb.z;if(yc)for(Bb=0;Bb<wc;Bb++)Rb=qc[Bb],ea=3*Bb,Tb[ea]=Rb.r,Tb[ea+1]=Rb.g,Tb[ea+2]=Rb.b;if(Nb)for(nb=0,$b=Nb.length;nb<$b;nb++)if(da=Nb[nb],da.needsUpdate&&(void 0===da.boundTo||"vertices"===da.boundTo))if(ob=da.value.length,ea=0,1===da.size)for(ja=0;ja<ob;ja++)da.array[ja]=da.value[ja];else if(2===da.size)for(ja=0;ja<ob;ja++)wa=da.value[ja],da.array[ea]=wa.x,da.array[ea+1]=wa.y,ea+=2;else if(3===da.size)if("c"===
da.type)for(ja=0;ja<ob;ja++)wa=da.value[ja],da.array[ea]=wa.r,da.array[ea+1]=wa.g,da.array[ea+2]=wa.b,ea+=3;else for(ja=0;ja<ob;ja++)wa=da.value[ja],da.array[ea]=wa.x,da.array[ea+1]=wa.y,da.array[ea+2]=wa.z,ea+=3;else if(4===da.size)for(ja=0;ja<ob;ja++)wa=da.value[ja],da.array[ea]=wa.x,da.array[ea+1]=wa.y,da.array[ea+2]=wa.z,da.array[ea+3]=wa.w,ea+=4}if(xc||b.sortParticles)p.bindBuffer(p.ARRAY_BUFFER,m.__webglVertexBuffer),p.bufferData(p.ARRAY_BUFFER,Sb,oc);if(yc||b.sortParticles)p.bindBuffer(p.ARRAY_BUFFER,
m.__webglColorBuffer),p.bufferData(p.ARRAY_BUFFER,Tb,oc);if(Nb)for(nb=0,$b=Nb.length;nb<$b;nb++)if(da=Nb[nb],da.needsUpdate||b.sortParticles)p.bindBuffer(p.ARRAY_BUFFER,da.buffer),p.bufferData(p.ARRAY_BUFFER,da.array,oc)}m.verticesNeedUpdate=!1;m.colorsNeedUpdate=!1;ab.attributes&&B(ab)}for(var Ub=0,rc=l.length;Ub<rc;Ub++){var jc=l[Ub],Eb=jc,zc=Eb.object,Ec=Eb.buffer,Fc=zc.geometry,Fb=zc.material;Fb instanceof THREE.MeshFaceMaterial?(Fb=Fb.materials[Fc instanceof THREE.BufferGeometry?0:Ec.materialIndex],
Fb.transparent?(Eb.material=Fb,Ya.push(Eb)):(Eb.material=Fb,Pa.push(Eb))):Fb&&(Fb.transparent?(Eb.material=Fb,Ya.push(Eb)):(Eb.material=Fb,Pa.push(Eb)));jc.render=!0;!0===S.sortObjects&&(null!==b.renderDepth?jc.z=b.renderDepth:(Ka.setFromMatrixPosition(b.matrixWorld),Ka.applyProjection(Lb),jc.z=Ka.z))}}Ub=0;for(rc=b.children.length;Ub<rc;Ub++)h(a,b.children[Ub],k)}}function t(a,b,c){if(0!==a.length)for(var d=0,e=a.length;d<e;d++)ia=Qa=null,ma=ca=sa=la=Ia=ta=qa=-1,mb=!0,a[d].render(b,c,Za,yb),ia=Qa=
null,ma=ca=sa=la=Ia=ta=qa=-1,mb=!0}function v(a,b,c,d,e,f){for(var g,h,k,m=a.length-1;-1!==m;m--){g=a[m];h=g.object;k=g.buffer;O(h,b);if(f)g=f;else{g=g.material;if(!g)continue;e&&S.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst);S.setDepthTest(g.depthTest);S.setDepthWrite(g.depthWrite);K(g.polygonOffset,g.polygonOffsetFactor,g.polygonOffsetUnits)}S.setMaterialFaces(g);k instanceof THREE.BufferGeometry?S.renderBufferDirect(b,c,d,g,k,h):S.renderBuffer(b,c,d,g,k,h)}}function w(a,b,c,d,
e,f,g){for(var h,k,m=0,l=a.length;m<l;m++)if(h=a[m],k=h.object,k.visible){if(g)h=g;else{h=h[b];if(!h)continue;f&&S.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst);S.setDepthTest(h.depthTest);S.setDepthWrite(h.depthWrite);K(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}S.renderImmediateObject(c,d,e,h,k)}}function x(a){var b=a.object.material;b.transparent?(a.transparent=b,a.opaque=null):(a.opaque=b,a.transparent=null)}function A(a,b,d){var e,f=!1;e=b.material;if(void 0===
d.geometryGroups||d.groupsNeedUpdate)delete a.__webglObjects[b.id],d.makeGroups(e instanceof THREE.MeshFaceMaterial,rb?4294967296:65535),d.groupsNeedUpdate=!1;for(var g=0,h=d.geometryGroupsList.length;g<h;g++){e=d.geometryGroupsList[g];if(e.__webglVertexBuffer)f=!1;else{f=e;f.__webglVertexBuffer=p.createBuffer();f.__webglNormalBuffer=p.createBuffer();f.__webglTangentBuffer=p.createBuffer();f.__webglColorBuffer=p.createBuffer();f.__webglUVBuffer=p.createBuffer();f.__webglUV2Buffer=p.createBuffer();
f.__webglSkinIndicesBuffer=p.createBuffer();f.__webglSkinWeightsBuffer=p.createBuffer();f.__webglFaceBuffer=p.createBuffer();f.__webglLineBuffer=p.createBuffer();var k=void 0,m=void 0;if(f.numMorphTargets)for(f.__webglMorphTargetsBuffers=[],k=0,m=f.numMorphTargets;k<m;k++)f.__webglMorphTargetsBuffers.push(p.createBuffer());if(f.numMorphNormals)for(f.__webglMorphNormalsBuffers=[],k=0,m=f.numMorphNormals;k<m;k++)f.__webglMorphNormalsBuffers.push(p.createBuffer());S.info.memory.geometries++;c(e,b);d.verticesNeedUpdate=
!0;d.morphTargetsNeedUpdate=!0;d.elementsNeedUpdate=!0;d.uvsNeedUpdate=!0;d.normalsNeedUpdate=!0;d.tangentsNeedUpdate=!0;f=d.colorsNeedUpdate=!0}(f||void 0===b.__webglActive)&&y(a.__webglObjects,e,b)}b.__webglActive=!0}function y(a,b,c){var d=c.id;a[d]=a[d]||[];a[d].push({id:d,buffer:b,object:c,material:null,z:0})}function u(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function B(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function C(a,b){if(a instanceof
THREE.Mesh||a instanceof THREE.PointCloud||a instanceof THREE.Line)delete b.__webglObjects[a.id];else if(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)for(var c=b.__webglObjectsImmediate,d=c.length-1;0<=d;d--)c[d].object===a&&c.splice(d,1);delete a.__webglActive}function z(a,b,c,d,e){xa=0;d.needsUpdate&&(d.program&&Wa(d),S.initMaterial(d,b,c,e),d.needsUpdate=!1);d.morphTargets&&!e.__webglMorphTargetInfluences&&(e.__webglMorphTargetInfluences=new Float32Array(S.maxMorphTargets));
var f=!1,g=!1,h=!1,k=d.program,m=k.uniforms,l=d.__webglShader.uniforms;k.id!==Qa&&(p.useProgram(k.program),Qa=k.id,h=g=f=!0);d.id!==ma&&(-1===ma&&(h=!0),ma=d.id,g=!0);if(f||a!==ia)p.uniformMatrix4fv(m.projectionMatrix,!1,a.projectionMatrix.elements),Ba&&p.uniform1f(m.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==ia&&(ia=a),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&null!==m.cameraPosition&&(Ka.setFromMatrixPosition(a.matrixWorld),p.uniform3f(m.cameraPosition,
Ka.x,Ka.y,Ka.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&null!==m.viewMatrix&&p.uniformMatrix4fv(m.viewMatrix,!1,a.matrixWorldInverse.elements);d.skinning&&(e.bindMatrix&&null!==m.bindMatrix&&p.uniformMatrix4fv(m.bindMatrix,!1,e.bindMatrix.elements),e.bindMatrixInverse&&null!==m.bindMatrixInverse&&p.uniformMatrix4fv(m.bindMatrixInverse,!1,e.bindMatrixInverse.elements),Gb&&e.skeleton&&e.skeleton.useVertexTexture?
(null!==m.boneTexture&&(f=E(),p.uniform1i(m.boneTexture,f),S.setTexture(e.skeleton.boneTexture,f)),null!==m.boneTextureWidth&&p.uniform1i(m.boneTextureWidth,e.skeleton.boneTextureWidth),null!==m.boneTextureHeight&&p.uniform1i(m.boneTextureHeight,e.skeleton.boneTextureHeight)):e.skeleton&&e.skeleton.boneMatrices&&null!==m.boneGlobalMatrices&&p.uniformMatrix4fv(m.boneGlobalMatrices,!1,e.skeleton.boneMatrices));if(g){c&&d.fog&&(l.fogColor.value=c.color,c instanceof THREE.Fog?(l.fogNear.value=c.near,
l.fogFar.value=c.far):c instanceof THREE.FogExp2&&(l.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(mb){var h=!0,n,q=f=0,s=0,r,t,w,u=ra,v=u.directional.colors,x=u.directional.positions,z=u.point.colors,C=u.point.positions,J=u.point.distances,y=u.spot.colors,A=u.spot.positions,B=u.spot.distances,F=u.spot.directions,R=u.spot.anglesCos,N=u.spot.exponents,Xa=u.hemi.skyColors,O=u.hemi.groundColors,Qb=u.hemi.positions,ib=0,Ma=0,
aa=0,ba=0,ga=0,I=0,V=0,K=0,H=0;c=w=H=0;for(g=b.length;c<g;c++)n=b[c],n.onlyShadow||(r=n.color,t=n.intensity,w=n.distance,n instanceof THREE.AmbientLight?n.visible&&(S.gammaInput?(f+=r.r*r.r,q+=r.g*r.g,s+=r.b*r.b):(f+=r.r,q+=r.g,s+=r.b)):n instanceof THREE.DirectionalLight?(ga+=1,n.visible&&(Ea.setFromMatrixPosition(n.matrixWorld),Ka.setFromMatrixPosition(n.target.matrixWorld),Ea.sub(Ka),Ea.normalize(),n=3*ib,x[n]=Ea.x,x[n+1]=Ea.y,x[n+2]=Ea.z,S.gammaInput?Z(v,n,r,t*t):P(v,n,r,t),ib+=1)):n instanceof
THREE.PointLight?(I+=1,n.visible&&(H=3*Ma,S.gammaInput?Z(z,H,r,t*t):P(z,H,r,t),Ka.setFromMatrixPosition(n.matrixWorld),C[H]=Ka.x,C[H+1]=Ka.y,C[H+2]=Ka.z,J[Ma]=w,Ma+=1)):n instanceof THREE.SpotLight?(V+=1,n.visible&&(H=3*aa,S.gammaInput?Z(y,H,r,t*t):P(y,H,r,t),Ka.setFromMatrixPosition(n.matrixWorld),A[H]=Ka.x,A[H+1]=Ka.y,A[H+2]=Ka.z,B[aa]=w,Ea.copy(Ka),Ka.setFromMatrixPosition(n.target.matrixWorld),Ea.sub(Ka),Ea.normalize(),F[H]=Ea.x,F[H+1]=Ea.y,F[H+2]=Ea.z,R[aa]=Math.cos(n.angle),N[aa]=n.exponent,
aa+=1)):n instanceof THREE.HemisphereLight&&(K+=1,n.visible&&(Ea.setFromMatrixPosition(n.matrixWorld),Ea.normalize(),w=3*ba,Qb[w]=Ea.x,Qb[w+1]=Ea.y,Qb[w+2]=Ea.z,r=n.color,n=n.groundColor,S.gammaInput?(t*=t,Z(Xa,w,r,t),Z(O,w,n,t)):(P(Xa,w,r,t),P(O,w,n,t)),ba+=1)));c=3*ib;for(g=Math.max(v.length,3*ga);c<g;c++)v[c]=0;c=3*Ma;for(g=Math.max(z.length,3*I);c<g;c++)z[c]=0;c=3*aa;for(g=Math.max(y.length,3*V);c<g;c++)y[c]=0;c=3*ba;for(g=Math.max(Xa.length,3*K);c<g;c++)Xa[c]=0;c=3*ba;for(g=Math.max(O.length,
3*K);c<g;c++)O[c]=0;u.directional.length=ib;u.point.length=Ma;u.spot.length=aa;u.hemi.length=ba;u.ambient[0]=f;u.ambient[1]=q;u.ambient[2]=s;mb=!1}h?(h=ra,l.ambientLightColor.value=h.ambient,l.directionalLightColor.value=h.directional.colors,l.directionalLightDirection.value=h.directional.positions,l.pointLightColor.value=h.point.colors,l.pointLightPosition.value=h.point.positions,l.pointLightDistance.value=h.point.distances,l.spotLightColor.value=h.spot.colors,l.spotLightPosition.value=h.spot.positions,
l.spotLightDistance.value=h.spot.distances,l.spotLightDirection.value=h.spot.directions,l.spotLightAngleCos.value=h.spot.anglesCos,l.spotLightExponent.value=h.spot.exponents,l.hemisphereLightSkyColor.value=h.hemi.skyColors,l.hemisphereLightGroundColor.value=h.hemi.groundColors,l.hemisphereLightDirection.value=h.hemi.positions,D(l,!0)):D(l,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){l.opacity.value=d.opacity;S.gammaInput?
l.diffuse.value.copyGammaToLinear(d.color):l.diffuse.value=d.color;l.map.value=d.map;l.lightMap.value=d.lightMap;l.specularMap.value=d.specularMap;l.alphaMap.value=d.alphaMap;d.bumpMap&&(l.bumpMap.value=d.bumpMap,l.bumpScale.value=d.bumpScale);d.normalMap&&(l.normalMap.value=d.normalMap,l.normalScale.value.copy(d.normalScale));var G;d.map?G=d.map:d.specularMap?G=d.specularMap:d.normalMap?G=d.normalMap:d.bumpMap?G=d.bumpMap:d.alphaMap&&(G=d.alphaMap);void 0!==G&&(h=G.offset,G=G.repeat,l.offsetRepeat.value.set(h.x,
h.y,G.x,G.y));l.envMap.value=d.envMap;l.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;l.reflectivity.value=d.reflectivity;l.refractionRatio.value=d.refractionRatio;l.combine.value=d.combine;l.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(l.diffuse.value=d.color,l.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(l.diffuse.value=d.color,l.opacity.value=d.opacity,l.dashSize.value=d.dashSize,
l.totalSize.value=d.dashSize+d.gapSize,l.scale.value=d.scale):d instanceof THREE.PointCloudMaterial?(l.psColor.value=d.color,l.opacity.value=d.opacity,l.size.value=d.size,l.scale.value=X.height/2,l.map.value=d.map):d instanceof THREE.MeshPhongMaterial?(l.shininess.value=d.shininess,S.gammaInput?(l.ambient.value.copyGammaToLinear(d.ambient),l.emissive.value.copyGammaToLinear(d.emissive),l.specular.value.copyGammaToLinear(d.specular)):(l.ambient.value=d.ambient,l.emissive.value=d.emissive,l.specular.value=
d.specular),d.wrapAround&&l.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?(S.gammaInput?(l.ambient.value.copyGammaToLinear(d.ambient),l.emissive.value.copyGammaToLinear(d.emissive)):(l.ambient.value=d.ambient,l.emissive.value=d.emissive),d.wrapAround&&l.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(l.mNear.value=a.near,l.mFar.value=a.far,l.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(l.opacity.value=d.opacity);if(e.receiveShadow&&
!d._shadowPass&&l.shadowMatrix)for(G=a=0,h=b.length;G<h;G++)c=b[G],c.castShadow&&(c instanceof THREE.SpotLight||c instanceof THREE.DirectionalLight&&!c.shadowCascade)&&(l.shadowMap.value[a]=c.shadowMap,l.shadowMapSize.value[a]=c.shadowMapSize,l.shadowMatrix.value[a]=c.shadowMatrix,l.shadowDarkness.value[a]=c.shadowDarkness,l.shadowBias.value[a]=c.shadowBias,a++);b=d.uniformsList;d=0;for(l=b.length;d<l;d++)if(a=b[d][0],!1!==a.needsUpdate)switch(c=a.type,h=a.value,G=b[d][1],c){case "1i":p.uniform1i(G,
h);break;case "1f":p.uniform1f(G,h);break;case "2f":p.uniform2f(G,h[0],h[1]);break;case "3f":p.uniform3f(G,h[0],h[1],h[2]);break;case "4f":p.uniform4f(G,h[0],h[1],h[2],h[3]);break;case "1iv":p.uniform1iv(G,h);break;case "3iv":p.uniform3iv(G,h);break;case "1fv":p.uniform1fv(G,h);break;case "2fv":p.uniform2fv(G,h);break;case "3fv":p.uniform3fv(G,h);break;case "4fv":p.uniform4fv(G,h);break;case "Matrix3fv":p.uniformMatrix3fv(G,!1,h);break;case "Matrix4fv":p.uniformMatrix4fv(G,!1,h);break;case "i":p.uniform1i(G,
h);break;case "f":p.uniform1f(G,h);break;case "v2":p.uniform2f(G,h.x,h.y);break;case "v3":p.uniform3f(G,h.x,h.y,h.z);break;case "v4":p.uniform4f(G,h.x,h.y,h.z,h.w);break;case "c":p.uniform3f(G,h.r,h.g,h.b);break;case "iv1":p.uniform1iv(G,h);break;case "iv":p.uniform3iv(G,h);break;case "fv1":p.uniform1fv(G,h);break;case "fv":p.uniform3fv(G,h);break;case "v2v":void 0===a._array&&(a._array=new Float32Array(2*h.length));c=0;for(g=h.length;c<g;c++)f=2*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y;p.uniform2fv(G,
a._array);break;case "v3v":void 0===a._array&&(a._array=new Float32Array(3*h.length));c=0;for(g=h.length;c<g;c++)f=3*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y,a._array[f+2]=h[c].z;p.uniform3fv(G,a._array);break;case "v4v":void 0===a._array&&(a._array=new Float32Array(4*h.length));c=0;for(g=h.length;c<g;c++)f=4*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y,a._array[f+2]=h[c].z,a._array[f+3]=h[c].w;p.uniform4fv(G,a._array);break;case "m3":p.uniformMatrix3fv(G,!1,h.elements);break;case "m3v":void 0===a._array&&
(a._array=new Float32Array(9*h.length));c=0;for(g=h.length;c<g;c++)h[c].flattenToArrayOffset(a._array,9*c);p.uniformMatrix3fv(G,!1,a._array);break;case "m4":p.uniformMatrix4fv(G,!1,h.elements);break;case "m4v":void 0===a._array&&(a._array=new Float32Array(16*h.length));c=0;for(g=h.length;c<g;c++)h[c].flattenToArrayOffset(a._array,16*c);p.uniformMatrix4fv(G,!1,a._array);break;case "t":f=h;h=E();p.uniform1i(G,h);if(!f)continue;if(f instanceof THREE.CubeTexture||f.image instanceof Array&&6===f.image.length){if(a=
f,G=h,6===a.image.length)if(a.needsUpdate){a.image.__webglTextureCube||(a.addEventListener("dispose",Hb),a.image.__webglTextureCube=p.createTexture(),S.info.memory.textures++);p.activeTexture(p.TEXTURE0+G);p.bindTexture(p.TEXTURE_CUBE_MAP,a.image.__webglTextureCube);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a.flipY);G=a instanceof THREE.CompressedTexture;h=[];for(c=0;6>c;c++)S.autoScaleCubemaps&&!G?(g=h,f=c,q=a.image[c],u=ac,q.width<=u&&q.height<=u||(v=Math.max(q.width,q.height),s=Math.floor(q.width*u/
v),u=Math.floor(q.height*u/v),v=document.createElement("canvas"),v.width=s,v.height=u,v.getContext("2d").drawImage(q,0,0,q.width,q.height,0,0,s,u),q=v),g[f]=q):h[c]=a.image[c];c=h[0];g=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height);f=T(a.format);q=T(a.type);L(p.TEXTURE_CUBE_MAP,a,g);for(c=0;6>c;c++)if(G)for(u=h[c].mipmaps,v=0,x=u.length;v<x;v++)s=u[v],a.format!==THREE.RGBAFormat?p.compressedTexImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+c,v,f,s.width,s.height,0,s.data):p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+
c,v,f,s.width,s.height,0,f,q,s.data);else p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,f,f,q,h[c]);a.generateMipmaps&&g&&p.generateMipmap(p.TEXTURE_CUBE_MAP);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else p.activeTexture(p.TEXTURE0+G),p.bindTexture(p.TEXTURE_CUBE_MAP,a.image.__webglTextureCube)}else f instanceof THREE.WebGLRenderTargetCube?(a=f,p.activeTexture(p.TEXTURE0+h),p.bindTexture(p.TEXTURE_CUBE_MAP,a.__webglTexture)):S.setTexture(f,h);break;case "tv":void 0===a._array&&(a._array=[]);c=
0;for(g=a.value.length;c<g;c++)a._array[c]=E();p.uniform1iv(G,a._array);c=0;for(g=a.value.length;c<g;c++)f=a.value[c],h=a._array[c],f&&S.setTexture(f,h);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+c)}}p.uniformMatrix4fv(m.modelViewMatrix,!1,e._modelViewMatrix.elements);m.normalMatrix&&p.uniformMatrix3fv(m.normalMatrix,!1,e._normalMatrix.elements);null!==m.modelMatrix&&p.uniformMatrix4fv(m.modelMatrix,!1,e.matrixWorld.elements);return k}function D(a,b){a.ambientLightColor.needsUpdate=
b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=b;a.pointLightColor.needsUpdate=b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=
b}function E(){var a=xa;a>=Ob&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+Ob);xa+=1;return a}function O(a,b){a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld);a._normalMatrix.getNormalMatrix(a._modelViewMatrix)}function Z(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function P(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function H(a){a!==ua&&(p.lineWidth(a),ua=a)}function K(a,b,c){Ra!==a&&(a?p.enable(p.POLYGON_OFFSET_FILL):
p.disable(p.POLYGON_OFFSET_FILL),Ra=a);!a||Sa===b&&Da===c||(p.polygonOffset(b,c),Sa=b,Da=c)}function L(a,b,c){c?(p.texParameteri(a,p.TEXTURE_WRAP_S,T(b.wrapS)),p.texParameteri(a,p.TEXTURE_WRAP_T,T(b.wrapT)),p.texParameteri(a,p.TEXTURE_MAG_FILTER,T(b.magFilter)),p.texParameteri(a,p.TEXTURE_MIN_FILTER,T(b.minFilter))):(p.texParameteri(a,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(a,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(a,p.TEXTURE_MAG_FILTER,Q(b.magFilter)),p.texParameteri(a,p.TEXTURE_MIN_FILTER,
Q(b.minFilter)));gb&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy)&&(p.texParameterf(a,gb.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Vb)),b.__oldAnisotropy=b.anisotropy)}function G(a,b){p.bindRenderbuffer(p.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_COMPONENT16,b.width,b.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,
b.width,b.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,a)):p.renderbufferStorage(p.RENDERBUFFER,p.RGBA4,b.width,b.height)}function I(a){a instanceof THREE.WebGLRenderTargetCube?(p.bindTexture(p.TEXTURE_CUBE_MAP,a.__webglTexture),p.generateMipmap(p.TEXTURE_CUBE_MAP),p.bindTexture(p.TEXTURE_CUBE_MAP,null)):(p.bindTexture(p.TEXTURE_2D,a.__webglTexture),p.generateMipmap(p.TEXTURE_2D),p.bindTexture(p.TEXTURE_2D,null))}function Q(a){return a===THREE.NearestFilter||
a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?p.NEAREST:p.LINEAR}function T(a){if(a===THREE.RepeatWrapping)return p.REPEAT;if(a===THREE.ClampToEdgeWrapping)return p.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return p.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return p.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return p.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return p.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return p.LINEAR;if(a===
THREE.LinearMipMapNearestFilter)return p.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return p.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return p.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return p.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return p.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return p.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return p.BYTE;if(a===THREE.ShortType)return p.SHORT;if(a===THREE.UnsignedShortType)return p.UNSIGNED_SHORT;
if(a===THREE.IntType)return p.INT;if(a===THREE.UnsignedIntType)return p.UNSIGNED_INT;if(a===THREE.FloatType)return p.FLOAT;if(a===THREE.AlphaFormat)return p.ALPHA;if(a===THREE.RGBFormat)return p.RGB;if(a===THREE.RGBAFormat)return p.RGBA;if(a===THREE.LuminanceFormat)return p.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return p.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return p.FUNC_ADD;if(a===THREE.SubtractEquation)return p.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return p.FUNC_REVERSE_SUBTRACT;
if(a===THREE.ZeroFactor)return p.ZERO;if(a===THREE.OneFactor)return p.ONE;if(a===THREE.SrcColorFactor)return p.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return p.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return p.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return p.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return p.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return p.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return p.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return p.ONE_MINUS_DST_COLOR;
if(a===THREE.SrcAlphaSaturateFactor)return p.SRC_ALPHA_SATURATE;if(void 0!==eb){if(a===THREE.RGB_S3TC_DXT1_Format)return eb.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return eb.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return eb.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return eb.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var X=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
J=void 0!==a.context?a.context:null,R=void 0!==a.precision?a.precision:"highp",F=void 0!==a.alpha?a.alpha:!1,N=void 0!==a.depth?a.depth:!0,V=void 0!==a.stencil?a.stencil:!0,Y=void 0!==a.antialias?a.antialias:!1,pa=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,Ga=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Ba=void 0!==a.logarithmicDepthBuffer?a.logarithmicDepthBuffer:!1,Na=new THREE.Color(0),ha=0,Pa=[],Ya=[];this.domElement=X;this.context=null;this.devicePixelRatio=void 0!==
a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=
[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var S=this,La=[],Qa=null,hb=null,ma=-1,ca=null,ia=null,xa=0,la=-1,sa=-1,qa=-1,Ca=-1,za=-1,fa=-1,ta=-1,Ia=-1,Ra=null,Sa=null,Da=null,ua=null,va=0,Ha=0,Jb=X.width,Kb=X.height,Za=0,yb=0,Va=new Uint8Array(16),qb=new Uint8Array(16),Xb=new THREE.Frustum,Lb=new THREE.Matrix4,Yb=new THREE.Matrix4,Ka=new THREE.Vector3,Ea=new THREE.Vector3,mb=!0,ra={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},
point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},p,fb,zb,gb,eb,rb;(function(){try{var a={alpha:F,depth:N,stencil:V,antialias:Y,premultipliedAlpha:pa,preserveDrawingBuffer:Ga};p=J||X.getContext("webgl",a)||X.getContext("experimental-webgl",a);if(null===p)throw"Error creating WebGL context.";}catch(b){console.error(b)}fb=p.getExtension("OES_texture_float");
p.getExtension("OES_texture_float_linear");zb=p.getExtension("OES_standard_derivatives");gb=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic");eb=p.getExtension("WEBGL_compressed_texture_s3tc")||p.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");rb=p.getExtension("OES_element_index_uint");null===fb&&console.log("THREE.WebGLRenderer: Float textures not supported.");
null===zb&&console.log("THREE.WebGLRenderer: Standard derivatives not supported.");null===gb&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");null===eb&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");null===rb&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});Ba&&p.getExtension("EXT_frag_depth")})();
p.clearColor(0,0,0,1);p.clearDepth(1);p.clearStencil(0);p.enable(p.DEPTH_TEST);p.depthFunc(p.LEQUAL);p.frontFace(p.CCW);p.cullFace(p.BACK);p.enable(p.CULL_FACE);p.enable(p.BLEND);p.blendEquation(p.FUNC_ADD);p.blendFunc(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA);p.viewport(va,Ha,Jb,Kb);p.clearColor(Na.r,Na.g,Na.b,ha);this.context=p;var Ob=p.getParameter(p.MAX_TEXTURE_IMAGE_UNITS),ec=p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS);p.getParameter(p.MAX_TEXTURE_SIZE);var ac=p.getParameter(p.MAX_CUBE_MAP_TEXTURE_SIZE),
Vb=gb?p.getParameter(gb.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,sb=0<ec,Gb=sb&&fb;eb&&p.getParameter(p.COMPRESSED_TEXTURE_FORMATS);var pb=p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_FLOAT),tb=p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_FLOAT);p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_FLOAT);var ub=p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_FLOAT),oa=p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_FLOAT);p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_FLOAT);var Wb=
0<pb.precision&&0<ub.precision,vb=0<tb.precision&&0<oa.precision;"highp"!==R||Wb||(vb?(R="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(R="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp.")));"mediump"!==R||vb||(R="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));this.getContext=function(){return p};this.supportsVertexTextures=function(){return sb};this.supportsFloatTextures=function(){return fb};
this.supportsStandardDerivatives=function(){return zb};this.supportsCompressedTextureS3TC=function(){return eb};this.getMaxAnisotropy=function(){return Vb};this.getPrecision=function(){return R};this.setSize=function(a,b,c){X.width=a*this.devicePixelRatio;X.height=b*this.devicePixelRatio;!1!==c&&(X.style.width=a+"px",X.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){va=a*this.devicePixelRatio;Ha=b*this.devicePixelRatio;Jb=c*this.devicePixelRatio;Kb=d*this.devicePixelRatio;
p.viewport(va,Ha,Jb,Kb)};this.setScissor=function(a,b,c,d){p.scissor(a*this.devicePixelRatio,b*this.devicePixelRatio,c*this.devicePixelRatio,d*this.devicePixelRatio)};this.enableScissorTest=function(a){a?p.enable(p.SCISSOR_TEST):p.disable(p.SCISSOR_TEST)};this.setClearColor=function(a,b){Na.set(a);ha=void 0!==b?b:1;p.clearColor(Na.r,Na.g,Na.b,ha)};this.setClearColorHex=function(a,b){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,
b)};this.getClearColor=function(){return Na};this.getClearAlpha=function(){return ha};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=p.COLOR_BUFFER_BIT;if(void 0===b||b)d|=p.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=p.STENCIL_BUFFER_BIT;p.clear(d)};this.clearColor=function(){p.clear(p.COLOR_BUFFER_BIT)};this.clearDepth=function(){p.clear(p.DEPTH_BUFFER_BIT)};this.clearStencil=function(){p.clear(p.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};
this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){Qa=null;ma=ca=Ia=ta=qa=-1;mb=!0;sa=la=-1;ka(a);this.shadowMapPlugin.update(a,b)};var wb=function(a){a=a.target;a.removeEventListener("dispose",wb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){a=a.attributes;for(var b in a)void 0!==a[b].buffer&&p.deleteBuffer(a[b].buffer);S.info.memory.geometries--}else if(void 0!==
a.geometryGroups){b=0;for(var c=a.geometryGroupsList.length;b<c;b++){var d=a.geometryGroupsList[b];if(void 0!==d.numMorphTargets)for(var e=0,f=d.numMorphTargets;e<f;e++)p.deleteBuffer(d.__webglMorphTargetsBuffers[e]);if(void 0!==d.numMorphNormals)for(e=0,f=d.numMorphNormals;e<f;e++)p.deleteBuffer(d.__webglMorphNormalsBuffers[e]);Pb(d)}}else Pb(a)},Hb=function(a){a=a.target;a.removeEventListener("dispose",Hb);a.image&&a.image.__webglTextureCube?p.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&
(a.__webglInit=!1,p.deleteTexture(a.__webglTexture));S.info.memory.textures--},xb=function(a){a=a.target;a.removeEventListener("dispose",xb);if(a&&a.__webglTexture)if(p.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)p.deleteFramebuffer(a.__webglFramebuffer[b]),p.deleteRenderbuffer(a.__webglRenderbuffer[b]);else p.deleteFramebuffer(a.__webglFramebuffer),p.deleteRenderbuffer(a.__webglRenderbuffer);S.info.memory.textures--},Ib=function(a){a=a.target;a.removeEventListener("dispose",
Ib);Wa(a)},Pb=function(a){void 0!==a.__webglVertexBuffer&&p.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&p.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&p.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&p.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&p.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&p.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&p.deleteBuffer(a.__webglSkinIndicesBuffer);
void 0!==a.__webglSkinWeightsBuffer&&p.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&p.deleteBuffer(a.__webglFaceBuffer);void 0!==a.__webglLineBuffer&&p.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&p.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)p.deleteBuffer(a.__webglCustomAttributesList[b].buffer);S.info.memory.geometries--},Wa=function(a){var b=a.program.program;
if(void 0!==b){a.program=void 0;var c,d,e=!1;a=0;for(c=La.length;a<c;a++)if(d=La[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=[];a=0;for(c=La.length;a<c;a++)d=La[a],d.program!==b&&e.push(d);La=e;p.deleteProgram(b);S.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){m();a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=p.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=p.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&
(a.__webglUvBuffer=p.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=p.createBuffer());a.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,a.__webglVertexBuffer),p.bufferData(p.ARRAY_BUFFER,a.positionArray,p.DYNAMIC_DRAW),r(b.attributes.position),p.vertexAttribPointer(b.attributes.position,3,p.FLOAT,!1,0,0));if(a.hasNormals){p.bindBuffer(p.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var d,e,f,h,g,k,l,n,s,t,u,w=3*a.count;for(u=0;u<w;u+=9)t=a.normalArray,
d=t[u],e=t[u+1],f=t[u+2],h=t[u+3],k=t[u+4],n=t[u+5],g=t[u+6],l=t[u+7],s=t[u+8],d=(d+h+g)/3,e=(e+k+l)/3,f=(f+n+s)/3,t[u]=d,t[u+1]=e,t[u+2]=f,t[u+3]=d,t[u+4]=e,t[u+5]=f,t[u+6]=d,t[u+7]=e,t[u+8]=f}p.bufferData(p.ARRAY_BUFFER,a.normalArray,p.DYNAMIC_DRAW);r(b.attributes.normal);p.vertexAttribPointer(b.attributes.normal,3,p.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(p.bindBuffer(p.ARRAY_BUFFER,a.__webglUvBuffer),p.bufferData(p.ARRAY_BUFFER,a.uvArray,p.DYNAMIC_DRAW),r(b.attributes.uv),p.vertexAttribPointer(b.attributes.uv,
2,p.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(p.bindBuffer(p.ARRAY_BUFFER,a.__webglColorBuffer),p.bufferData(p.ARRAY_BUFFER,a.colorArray,p.DYNAMIC_DRAW),r(b.attributes.color),p.vertexAttribPointer(b.attributes.color,3,p.FLOAT,!1,0,0));q();p.drawArrays(p.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var h=z(a,b,c,d,f);a=h.attributes;b=e.attributes;c=!1;h=16777215*e.id+2*h.id+(d.wireframe?1:0);h!==ca&&(ca=h,c=!0);c&&m();if(f instanceof
THREE.Mesh)if(h=b.index){var g,l;h.array instanceof Uint32Array?(g=p.UNSIGNED_INT,l=4):(g=p.UNSIGNED_SHORT,l=2);e=e.offsets;if(0===e.length)c&&(k(d,a,b,0),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,h.buffer)),p.drawElements(p.TRIANGLES,h.array.length,g,0),S.info.render.calls++,S.info.render.vertices+=h.array.length,S.info.render.faces+=h.array.length/3;else{c=!0;for(var n=0,q=e.length;n<q;n++){var s=e[n].index;c&&(k(d,a,b,s),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,h.buffer));p.drawElements(p.TRIANGLES,e[n].count,
g,e[n].start*l);S.info.render.calls++;S.info.render.vertices+=e[n].count;S.info.render.faces+=e[n].count/3}}}else c&&k(d,a,b,0),d=e.attributes.position,p.drawArrays(p.TRIANGLES,0,d.array.length/3),S.info.render.calls++,S.info.render.vertices+=d.array.length/3,S.info.render.faces+=d.array.length/9;else if(f instanceof THREE.PointCloud)c&&k(d,a,b,0),d=b.position,p.drawArrays(p.POINTS,0,d.array.length/3),S.info.render.calls++,S.info.render.points+=d.array.length/3;else if(f instanceof THREE.Line)if(f=
f.type===THREE.LineStrip?p.LINE_STRIP:p.LINES,H(d.linewidth),h=b.index)if(h.array instanceof Uint32Array?(g=p.UNSIGNED_INT,l=4):(g=p.UNSIGNED_SHORT,l=2),e=e.offsets,0===e.length)c&&(k(d,a,b,0),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,h.buffer)),p.drawElements(f,h.array.length,g,0),S.info.render.calls++,S.info.render.vertices+=h.array.length;else for(1<e.length&&(c=!0),n=0,q=e.length;n<q;n++)s=e[n].index,c&&(k(d,a,b,s),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,h.buffer)),p.drawElements(f,e[n].count,g,e[n].start*
l),S.info.render.calls++,S.info.render.vertices+=e[n].count;else c&&k(d,a,b,0),d=b.position,p.drawArrays(f,0,d.array.length/3),S.info.render.calls++,S.info.render.points+=d.array.length/3}};this.renderBuffer=function(a,b,c,d,e,f){if(!1!==d.visible){var h,g;c=z(a,b,c,d,f);b=c.attributes;a=!1;c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==ca&&(ca=c,a=!0);a&&m();if(!d.morphTargets&&0<=b.position)a&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglVertexBuffer),r(b.position),p.vertexAttribPointer(b.position,3,p.FLOAT,
!1,0,0));else if(f.morphTargetBase){c=d.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),r(c.position),p.vertexAttribPointer(c.position,3,p.FLOAT,!1,0,0)):0<=c.position&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglVertexBuffer),r(c.position),p.vertexAttribPointer(c.position,3,p.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var k=0;g=f.morphTargetForcedOrder;for(h=f.morphTargetInfluences;k<d.numSupportedMorphTargets&&
k<g.length;)0<=c["morphTarget"+k]&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[g[k]]),r(c["morphTarget"+k]),p.vertexAttribPointer(c["morphTarget"+k],3,p.FLOAT,!1,0,0)),0<=c["morphNormal"+k]&&d.morphNormals&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[g[k]]),r(c["morphNormal"+k]),p.vertexAttribPointer(c["morphNormal"+k],3,p.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[k]=h[g[k]],k++}else{g=[];h=f.morphTargetInfluences;var l,n=h.length;for(l=0;l<n;l++)k=h[l],0<k&&g.push([k,
l]);g.length>d.numSupportedMorphTargets?(g.sort(s),g.length=d.numSupportedMorphTargets):g.length>d.numSupportedMorphNormals?g.sort(s):0===g.length&&g.push([0,0]);for(k=0;k<d.numSupportedMorphTargets;)g[k]?(l=g[k][1],0<=c["morphTarget"+k]&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[l]),r(c["morphTarget"+k]),p.vertexAttribPointer(c["morphTarget"+k],3,p.FLOAT,!1,0,0)),0<=c["morphNormal"+k]&&d.morphNormals&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[l]),r(c["morphNormal"+
k]),p.vertexAttribPointer(c["morphNormal"+k],3,p.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[k]=h[l]):f.__webglMorphTargetInfluences[k]=0,k++}null!==d.program.uniforms.morphTargetInfluences&&p.uniform1fv(d.program.uniforms.morphTargetInfluences,f.__webglMorphTargetInfluences)}if(a){if(e.__webglCustomAttributesList)for(h=0,g=e.__webglCustomAttributesList.length;h<g;h++)c=e.__webglCustomAttributesList[h],0<=b[c.buffer.belongsToAttribute]&&(p.bindBuffer(p.ARRAY_BUFFER,c.buffer),r(b[c.buffer.belongsToAttribute]),
p.vertexAttribPointer(b[c.buffer.belongsToAttribute],c.size,p.FLOAT,!1,0,0));0<=b.color&&(0<f.geometry.colors.length||0<f.geometry.faces.length?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglColorBuffer),r(b.color),p.vertexAttribPointer(b.color,3,p.FLOAT,!1,0,0)):d.defaultAttributeValues&&p.vertexAttrib3fv(b.color,d.defaultAttributeValues.color));0<=b.normal&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglNormalBuffer),r(b.normal),p.vertexAttribPointer(b.normal,3,p.FLOAT,!1,0,0));0<=b.tangent&&(p.bindBuffer(p.ARRAY_BUFFER,
e.__webglTangentBuffer),r(b.tangent),p.vertexAttribPointer(b.tangent,4,p.FLOAT,!1,0,0));0<=b.uv&&(f.geometry.faceVertexUvs[0]?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglUVBuffer),r(b.uv),p.vertexAttribPointer(b.uv,2,p.FLOAT,!1,0,0)):d.defaultAttributeValues&&p.vertexAttrib2fv(b.uv,d.defaultAttributeValues.uv));0<=b.uv2&&(f.geometry.faceVertexUvs[1]?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglUV2Buffer),r(b.uv2),p.vertexAttribPointer(b.uv2,2,p.FLOAT,!1,0,0)):d.defaultAttributeValues&&p.vertexAttrib2fv(b.uv2,
d.defaultAttributeValues.uv2));d.skinning&&0<=b.skinIndex&&0<=b.skinWeight&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),r(b.skinIndex),p.vertexAttribPointer(b.skinIndex,4,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),r(b.skinWeight),p.vertexAttribPointer(b.skinWeight,4,p.FLOAT,!1,0,0));0<=b.lineDistance&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglLineDistanceBuffer),r(b.lineDistance),p.vertexAttribPointer(b.lineDistance,1,p.FLOAT,!1,0,0))}q();f instanceof THREE.Mesh?
(f=e.__typeArray===Uint32Array?p.UNSIGNED_INT:p.UNSIGNED_SHORT,d.wireframe?(H(d.wireframeLinewidth),a&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),p.drawElements(p.LINES,e.__webglLineCount,f,0)):(a&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),p.drawElements(p.TRIANGLES,e.__webglFaceCount,f,0)),S.info.render.calls++,S.info.render.vertices+=e.__webglFaceCount,S.info.render.faces+=e.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?p.LINE_STRIP:p.LINES,
H(d.linewidth),p.drawArrays(f,0,e.__webglLineCount),S.info.render.calls++):f instanceof THREE.PointCloud&&(p.drawArrays(p.POINTS,0,e.__webglParticleCount),S.info.render.calls++,S.info.render.points+=e.__webglParticleCount)}};this.render=function(a,b,c,d){function e(a){a instanceof THREE.SkinnedMesh&&a.skeleton.update();for(var b=0,c=a.children.length;b<c;b++)e(a.children[b])}if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var f,
g,k,m,q=a.__lights,s=a.fog;ma=-1;ia=null;mb=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();e(a);b.matrixWorldInverse.getInverse(b.matrixWorld);Lb.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);Xb.setFromMatrix(Lb);ka(a);Pa.length=0;Ya.length=0;h(a,a,b);!0===S.sortObjects&&(Pa.sort(l),Ya.sort(n));t(this.renderPluginsPre,a,b);S.info.render.calls=0;S.info.render.vertices=0;S.info.render.faces=0;S.info.render.points=0;this.setRenderTarget(c);(this.autoClear||
d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);m=a.__webglObjectsImmediate;d=0;for(f=m.length;d<f;d++)g=m[d],k=g.object,k.visible&&(O(k,b),x(g));a.overrideMaterial?(d=a.overrideMaterial,this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),K(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),v(Pa,b,q,s,!0,d),v(Ya,b,q,s,!0,d),w(a.__webglObjectsImmediate,"",b,q,s,!1,d)):(d=null,this.setBlending(THREE.NoBlending),
v(Pa,b,q,s,!1,d),w(a.__webglObjectsImmediate,"opaque",b,q,s,!1,d),v(Ya,b,q,s,!0,d),w(a.__webglObjectsImmediate,"transparent",b,q,s,!0,d));t(this.renderPluginsPost,a,b);c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&I(c);this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,b,c,d,e){var f=z(a,b,c,d,e);ca=-1;S.setMaterialFaces(d);e.immediateRenderCallback?e.immediateRenderCallback(f,p,Xb):e.render(function(a){S.renderBufferImmediate(a,
f,d)})};var ka=function(a){for(a.__webglObjects||(a.__webglObjects={},a.__webglObjectsImmediate=[]);a.__objectsAdded.length;){var c=a.__objectsAdded[0],d=a,e=void 0,f=void 0;void 0===c.__webglInit&&(c.__webglInit=!0,c._modelViewMatrix=new THREE.Matrix4,c._normalMatrix=new THREE.Matrix3);e=c.geometry;if(void 0!==e&&void 0===e.__webglInit)if(e.__webglInit=!0,e.addEventListener("dispose",wb),e instanceof THREE.BufferGeometry)g(e);else if(c instanceof THREE.Mesh)void 0!==c.__webglActive&&C(c,d),A(d,c,
e);else if(c instanceof THREE.Line){if(!e.__webglVertexBuffer){f=e;f.__webglVertexBuffer=p.createBuffer();f.__webglColorBuffer=p.createBuffer();f.__webglLineDistanceBuffer=p.createBuffer();S.info.memory.geometries++;var f=e,h=c,k=f.vertices.length;f.__vertexArray=new Float32Array(3*k);f.__colorArray=new Float32Array(3*k);f.__lineDistanceArray=new Float32Array(1*k);f.__webglLineCount=k;b(f,h);e.verticesNeedUpdate=!0;e.colorsNeedUpdate=!0;e.lineDistancesNeedUpdate=!0}}else c instanceof THREE.PointCloud&&
!e.__webglVertexBuffer&&(f=e,f.__webglVertexBuffer=p.createBuffer(),f.__webglColorBuffer=p.createBuffer(),S.info.memory.geometries++,f=e,h=c,k=f.vertices.length,f.__vertexArray=new Float32Array(3*k),f.__colorArray=new Float32Array(3*k),f.__sortArray=[],f.__webglParticleCount=k,b(f,h),e.verticesNeedUpdate=!0,e.colorsNeedUpdate=!0);if(void 0===c.__webglActive){if(c instanceof THREE.Mesh)if(e=c.geometry,e instanceof THREE.BufferGeometry)y(d.__webglObjects,e,c);else{if(e instanceof THREE.Geometry)for(h=
0,k=e.geometryGroupsList.length;h<k;h++)f=e.geometryGroupsList[h],y(d.__webglObjects,f,c)}else c instanceof THREE.Line||c instanceof THREE.PointCloud?(e=c.geometry,y(d.__webglObjects,e,c)):(c instanceof THREE.ImmediateRenderObject||c.immediateRenderCallback)&&d.__webglObjectsImmediate.push({id:null,object:c,opaque:null,transparent:null,z:0});c.__webglActive=!0}a.__objectsAdded.splice(0,1)}for(;a.__objectsRemoved.length;)C(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1)};this.initMaterial=
function(a,b,c,d){var e,f,h,g;a.addEventListener("dispose",Ib);var k,l,m,n;a instanceof THREE.MeshDepthMaterial?n="depth":a instanceof THREE.MeshNormalMaterial?n="normal":a instanceof THREE.MeshBasicMaterial?n="basic":a instanceof THREE.MeshLambertMaterial?n="lambert":a instanceof THREE.MeshPhongMaterial?n="phong":a instanceof THREE.LineBasicMaterial?n="basic":a instanceof THREE.LineDashedMaterial?n="dashed":a instanceof THREE.PointCloudMaterial&&(n="particle_basic");n?(e=THREE.ShaderLib[n],a.__webglShader=
{uniforms:THREE.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}):a.__webglShader={uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader};m=g=h=f=e=0;for(var q=b.length;m<q;m++){var s=b[m];s.onlyShadow||!1===s.visible||(s instanceof THREE.DirectionalLight&&e++,s instanceof THREE.PointLight&&f++,s instanceof THREE.SpotLight&&h++,s instanceof THREE.HemisphereLight&&g++)}q=m=0;for(s=b.length;q<s;q++){var t=b[q];t.castShadow&&(t instanceof
THREE.SpotLight&&m++,t instanceof THREE.DirectionalLight&&!t.shadowCascade&&m++)}b=m;Gb&&d&&d.skeleton&&d.skeleton.useVertexTexture?m=1024:(m=p.getParameter(p.MAX_VERTEX_UNIFORM_VECTORS),m=Math.floor((m-20)/4),void 0!==d&&d instanceof THREE.SkinnedMesh&&(m=Math.min(d.skeleton.bones.length,m),m<d.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+d.skeleton.bones.length+", this GPU supports just "+m+" (try OpenGL instead of ANGLE)")));c={precision:R,supportsVertexTextures:sb,map:!!a.map,
envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:Ba,skinning:a.skinning,maxBones:m,useVertexTexture:Gb&&d&&d.skeleton&&d.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:e,
maxPointLights:f,maxSpotLights:h,maxHemiLights:g,maxShadows:b,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow&&0<b,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide};d=[];n?d.push(n):(d.push(a.fragmentShader),d.push(a.vertexShader));for(var r in a.defines)d.push(r),d.push(a.defines[r]);for(l in c)d.push(l),
d.push(c[l]);n=d.join();var u;l=0;for(r=La.length;l<r;l++)if(d=La[l],d.code===n){u=d;u.usedTimes++;break}void 0===u&&(u=new THREE.WebGLProgram(this,n,a,c),La.push(u),S.info.memory.programs=La.length);a.program=u;u=a.program.attributes;if(a.morphTargets)for(a.numSupportedMorphTargets=0,r="morphTarget",l=0;l<this.maxMorphTargets;l++)n=r+l,0<=u[n]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(a.numSupportedMorphNormals=0,r="morphNormal",l=0;l<this.maxMorphNormals;l++)n=r+l,0<=u[n]&&a.numSupportedMorphNormals++;
a.uniformsList=[];for(k in a.__webglShader.uniforms)(l=a.program.uniforms[k])&&a.uniformsList.push([a.__webglShader.uniforms[k],l])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?p.disable(p.CULL_FACE):(b===THREE.FrontFaceDirectionCW?p.frontFace(p.CW):p.frontFace(p.CCW),a===THREE.CullFaceBack?p.cullFace(p.BACK):a===THREE.CullFaceFront?p.cullFace(p.FRONT):p.cullFace(p.FRONT_AND_BACK),p.enable(p.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide;a=a.side===THREE.BackSide;
la!==b&&(b?p.disable(p.CULL_FACE):p.enable(p.CULL_FACE),la=b);sa!==a&&(a?p.frontFace(p.CW):p.frontFace(p.CCW),sa=a)};this.setDepthTest=function(a){ta!==a&&(a?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),ta=a)};this.setDepthWrite=function(a){Ia!==a&&(p.depthMask(a),Ia=a)};this.setBlending=function(a,b,c,d){a!==qa&&(a===THREE.NoBlending?p.disable(p.BLEND):a===THREE.AdditiveBlending?(p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.SRC_ALPHA,p.ONE)):a===THREE.SubtractiveBlending?(p.enable(p.BLEND),
p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.SRC_COLOR)):a===THREE.CustomBlending?p.enable(p.BLEND):(p.enable(p.BLEND),p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA)),qa=a);if(a===THREE.CustomBlending){if(b!==Ca&&(p.blendEquation(T(b)),Ca=b),c!==za||d!==fa)p.blendFunc(T(c),T(d)),za=c,fa=d}else fa=
za=Ca=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",Hb),a.__webglTexture=p.createTexture(),S.info.memory.textures++);p.activeTexture(p.TEXTURE0+b);p.bindTexture(p.TEXTURE_2D,a.__webglTexture);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a.flipY);p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);p.pixelStorei(p.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height),
e=T(a.format),f=T(a.type);L(p.TEXTURE_2D,a,d);var h=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<h.length&&d){for(var g=0,k=h.length;g<k;g++)c=h[g],p.texImage2D(p.TEXTURE_2D,g,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else p.texImage2D(p.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.CompressedTexture)for(g=0,k=h.length;g<k;g++)c=h[g],a.format!==THREE.RGBAFormat?p.compressedTexImage2D(p.TEXTURE_2D,g,e,c.width,c.height,0,c.data):p.texImage2D(p.TEXTURE_2D,g,
e,c.width,c.height,0,e,f,c.data);else if(0<h.length&&d){g=0;for(k=h.length;g<k;g++)c=h[g],p.texImage2D(p.TEXTURE_2D,g,e,e,f,c);a.generateMipmaps=!1}else p.texImage2D(p.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&p.generateMipmap(p.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else p.activeTexture(p.TEXTURE0+b),p.bindTexture(p.TEXTURE_2D,a.__webglTexture)};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&
(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",xb);a.__webglTexture=p.createTexture();S.info.memory.textures++;var c=THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height),d=T(a.format),e=T(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];p.bindTexture(p.TEXTURE_CUBE_MAP,a.__webglTexture);L(p.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=p.createFramebuffer();a.__webglRenderbuffer[f]=p.createRenderbuffer();
p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var h=a,g=p.TEXTURE_CUBE_MAP_POSITIVE_X+f;p.bindFramebuffer(p.FRAMEBUFFER,a.__webglFramebuffer[f]);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,g,h.__webglTexture,0);G(a.__webglRenderbuffer[f],a)}c&&p.generateMipmap(p.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=p.createFramebuffer(),a.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:p.createRenderbuffer(),p.bindTexture(p.TEXTURE_2D,a.__webglTexture),
L(p.TEXTURE_2D,a,c),p.texImage2D(p.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=p.TEXTURE_2D,p.bindFramebuffer(p.FRAMEBUFFER,a.__webglFramebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,d,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,a.__webglRenderbuffer):
G(a.__webglRenderbuffer,a),c&&p.generateMipmap(p.TEXTURE_2D);b?p.bindTexture(p.TEXTURE_CUBE_MAP,null):p.bindTexture(p.TEXTURE_2D,null);p.bindRenderbuffer(p.RENDERBUFFER,null);p.bindFramebuffer(p.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=Jb,a=Kb,d=va,e=Ha);b!==hb&&(p.bindFramebuffer(p.FRAMEBUFFER,b),p.viewport(d,e,c,a),hb=b);Za=c;yb=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);
this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};
THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(a,b){this.width=a;this.height=b},clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;
a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.WebGLProgram=function(){var a=0;return function(b,c,d,e){var f=b.context,g=d.defines,k=d.__webglShader.uniforms,m=d.attributes,r=d.__webglShader.vertexShader,q=d.__webglShader.fragmentShader,l=d.index0AttributeName;void 0===l&&!0===e.morphTargets&&(l="position");var n="SHADOWMAP_TYPE_BASIC";e.shadowMapType===THREE.PCFShadowMap?n="SHADOWMAP_TYPE_PCF":e.shadowMapType===THREE.PCFSoftShadowMap&&(n="SHADOWMAP_TYPE_PCF_SOFT");var s,h;s=[];for(var t in g)h=g[t],!1!==h&&(h="#define "+t+" "+h,s.push(h));
s=s.join("\n");g=f.createProgram();d instanceof THREE.RawShaderMaterial?b=d="":(d=["precision "+e.precision+" float;","precision "+e.precision+" int;",s,e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+e.maxDirLights,"#define MAX_POINT_LIGHTS "+e.maxPointLights,"#define MAX_SPOT_LIGHTS "+e.maxSpotLights,"#define MAX_HEMI_LIGHTS "+e.maxHemiLights,"#define MAX_SHADOWS "+e.maxShadows,"#define MAX_BONES "+
e.maxBones,e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.lightMap?"#define USE_LIGHTMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexColors?"#define USE_COLOR":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals?"#define USE_MORPHNORMALS":"",e.wrapAround?"#define WRAP_AROUND":
"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+n:"",e.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",e.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),
b=["precision "+e.precision+" float;","precision "+e.precision+" int;",e.bumpMap||e.normalMap?"#extension GL_OES_standard_derivatives : enable":"",s,"#define MAX_DIR_LIGHTS "+e.maxDirLights,"#define MAX_POINT_LIGHTS "+e.maxPointLights,"#define MAX_SPOT_LIGHTS "+e.maxSpotLights,"#define MAX_HEMI_LIGHTS "+e.maxHemiLights,"#define MAX_SHADOWS "+e.maxShadows,e.alphaTest?"#define ALPHATEST "+e.alphaTest:"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"",e.useFog&&e.fog?"#define USE_FOG":
"",e.useFog&&e.fogExp?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.lightMap?"#define USE_LIGHTMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexColors?"#define USE_COLOR":"",e.metal?"#define METAL":"",e.wrapAround?"#define WRAP_AROUND":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":
"",e.shadowMapEnabled?"#define "+n:"",e.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",e.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"));r=new THREE.WebGLShader(f,f.VERTEX_SHADER,d+r);q=new THREE.WebGLShader(f,f.FRAGMENT_SHADER,b+q);f.attachShader(g,r);f.attachShader(g,q);void 0!==l&&f.bindAttribLocation(g,0,l);f.linkProgram(g);!1===f.getProgramParameter(g,f.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),
console.error("gl.VALIDATE_STATUS",f.getProgramParameter(g,f.VALIDATE_STATUS)),console.error("gl.getError()",f.getError()));""!==f.getProgramInfoLog(g)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f.getProgramInfoLog(g));f.deleteShader(r);f.deleteShader(q);l="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" ");e.useVertexTexture?(l.push("boneTexture"),l.push("boneTextureWidth"),l.push("boneTextureHeight")):
l.push("boneGlobalMatrices");e.logarithmicDepthBuffer&&l.push("logDepthBufFC");for(var v in k)l.push(v);k=l;v={};l=0;for(b=k.length;l<b;l++)n=k[l],v[n]=f.getUniformLocation(g,n);this.uniforms=v;l="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(k=0;k<e.maxMorphTargets;k++)l.push("morphTarget"+k);for(k=0;k<e.maxMorphNormals;k++)l.push("morphNormal"+k);for(var w in m)l.push(w);e=l;m={};w=0;for(k=e.length;w<k;w++)v=e[w],m[v]=f.getAttribLocation(g,v);this.attributes=
m;this.id=a++;this.code=c;this.usedTimes=1;this.program=g;this.vertexShader=r;this.fragmentShader=q;return this}}();
THREE.WebGLShader=function(){var a=function(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")};return function(b,c,d){c=b.createShader(c);b.shaderSource(c,d);b.compileShader(c);!1===b.getShaderParameter(c,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(c)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b.getShaderInfoLog(c)),console.warn(a(d)));return c}}();
THREE.RenderableVertex=function(){this.position=new THREE.Vector3;this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};
THREE.RenderableFace=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.normalModel=new THREE.Vector3;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.color=new THREE.Color;this.material=null;this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];this.z=0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};
THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.Texture(void 0,b);e.load(a,function(a){f.image=a;f.needsUpdate=!0;c&&c(f)},void 0,function(a){d&&d(a)});f.sourceFile=a;return f},loadTextureCube:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.CubeTexture([],b);f.flipY=!1;var g=0;b=function(b){e.load(a[b],function(a){f.images[b]=a;g+=1;6===g&&(f.needsUpdate=!0,c&&
c(f))})};d=0;for(var k=a.length;d<k;++d)b(d);return f},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b|=1;var d=a.width,e=a.height,f=document.createElement("canvas");
f.width=d;f.height=e;var g=f.getContext("2d");g.drawImage(a,0,0);for(var k=g.getImageData(0,0,d,e).data,m=g.createImageData(d,e),r=m.data,q=0;q<d;q++)for(var l=0;l<e;l++){var n=0>l-1?0:l-1,s=l+1>e-1?e-1:l+1,h=0>q-1?0:q-1,t=q+1>d-1?d-1:q+1,v=[],w=[0,0,k[4*(l*d+q)]/255*b];v.push([-1,0,k[4*(l*d+h)]/255*b]);v.push([-1,-1,k[4*(n*d+h)]/255*b]);v.push([0,-1,k[4*(n*d+q)]/255*b]);v.push([1,-1,k[4*(n*d+t)]/255*b]);v.push([1,0,k[4*(l*d+t)]/255*b]);v.push([1,1,k[4*(s*d+t)]/255*b]);v.push([0,1,k[4*(s*d+q)]/255*
b]);v.push([-1,1,k[4*(s*d+h)]/255*b]);n=[];h=v.length;for(s=0;s<h;s++){var t=v[s],x=v[(s+1)%h],t=[t[0]-w[0],t[1]-w[1],t[2]-w[2]],x=[x[0]-w[0],x[1]-w[1],x[2]-w[2]];n.push(c([t[1]*x[2]-t[2]*x[1],t[2]*x[0]-t[0]*x[2],t[0]*x[1]-t[1]*x[0]]))}v=[0,0,0];for(s=0;s<n.length;s++)v[0]+=n[s][0],v[1]+=n[s][1],v[2]+=n[s][2];v[0]/=n.length;v[1]/=n.length;v[2]/=n.length;w=4*(l*d+q);r[w]=(v[0]+1)/2*255|0;r[w+1]=(v[1]+1)/2*255|0;r[w+2]=255*v[2]|0;r[w+3]=255}g.putImageData(m,0,0);return f},generateDataTexture:function(a,
b,c){var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),g=Math.floor(255*c.g);c=Math.floor(255*c.b);for(var k=0;k<d;k++)e[3*k]=f,e[3*k+1]=g,e[3*k+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(a){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=
a},drawText:function(a){var b=this.getFace(),c=this.size/b.resolution,d=0,e=String(a).split(""),f=e.length,g=[];for(a=0;a<f;a++){var k=new THREE.Path,k=this.extractGlyphPoints(e[a],b,c,d,k),d=d+k.offset;g.push(k.path)}return{paths:g,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var f=[],g,k,m,r,q,l,n,s,h,t,v,w=b.glyphs[a]||b.glyphs["?"];if(w){if(w.o)for(b=w._cachedOutline||(w._cachedOutline=w.o.split(" ")),r=b.length,a=0;a<r;)switch(m=b[a++],m){case "m":m=b[a++]*c+d;q=b[a++]*c;e.moveTo(m,q);
break;case "l":m=b[a++]*c+d;q=b[a++]*c;e.lineTo(m,q);break;case "q":m=b[a++]*c+d;q=b[a++]*c;s=b[a++]*c+d;h=b[a++]*c;e.quadraticCurveTo(s,h,m,q);if(g=f[f.length-1])for(l=g.x,n=g.y,g=1,k=this.divisions;g<=k;g++){var x=g/k;THREE.Shape.Utils.b2(x,l,s,m);THREE.Shape.Utils.b2(x,n,h,q)}break;case "b":if(m=b[a++]*c+d,q=b[a++]*c,s=b[a++]*c+d,h=b[a++]*c,t=b[a++]*c+d,v=b[a++]*c,e.bezierCurveTo(s,h,t,v,m,q),g=f[f.length-1])for(l=g.x,n=g.y,g=1,k=this.divisions;g<=k;g++)x=g/k,THREE.Shape.Utils.b3(x,l,s,t,m),THREE.Shape.Utils.b3(x,
n,h,v,q)}return{offset:w.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",f=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=f;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,f=b-1,g=0;g<b;f=g++)e+=a[f].x*a[g].y-a[g].x*a[f].y;return.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var f=[],g=[],k=[],m,r,q;if(0<b(a))for(r=0;r<e;r++)g[r]=r;else for(r=0;r<e;r++)g[r]=e-1-r;var l=2*e;for(r=e-1;2<e;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}m=r;e<=m&&(m=0);r=m+1;e<=r&&(r=0);q=r+1;e<=q&&(q=0);var n;a:{var s=void 0,h=void 0,t=void 0,v=void 0,w=void 0,x=void 0,A=void 0,y=void 0,
s=a[g[m]].x,h=a[g[m]].y,t=a[g[r]].x,v=a[g[r]].y,w=a[g[q]].x,x=a[g[q]].y;if(1E-10>(t-s)*(x-h)-(v-h)*(w-s))n=!1;else{var u=void 0,B=void 0,C=void 0,z=void 0,D=void 0,E=void 0,O=void 0,Z=void 0,P=void 0,H=void 0,P=Z=O=y=A=void 0,u=w-t,B=x-v,C=s-w,z=h-x,D=t-s,E=v-h;for(n=0;n<e;n++)if(A=a[g[n]].x,y=a[g[n]].y,!(A===s&&y===h||A===t&&y===v||A===w&&y===x)&&(O=A-s,Z=y-h,P=A-t,H=y-v,A-=w,y-=x,P=u*H-B*P,O=D*Z-E*O,Z=C*y-z*A,-1E-10<=P&&-1E-10<=Z&&-1E-10<=O)){n=!1;break a}n=!0}}if(n){f.push([a[g[m]],a[g[r]],a[g[q]]]);
k.push([g[m],g[r],g[q]]);m=r;for(q=r+1;q<e;m++,q++)g[m]=g[q];e--;l=2*e}}return d?k:f};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(a){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};
THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};
THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b};THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};
THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var g=0,k=e-1,m;g<=k;)if(d=Math.floor(g+(k-g)/2),m=c[d]-f,0>m)g=d+1;else if(0<m)k=d-1;else{k=d;break}d=k;if(c[d]==f)return d/(e-1);g=c[d];return(d+(f-g)/(c[d+1]-g))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};
THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};THREE.CurvePath.prototype.getPoint=function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,f,g;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var k,m,r,q,l=a[0]instanceof THREE.Vector3;q=l?new THREE.Vector3:new THREE.Vector2;m=0;for(r=a.length;m<r;m++)k=a[m],k.x>b?b=k.x:k.x<e&&(e=k.x),k.y>c?c=k.y:k.y<f&&(f=k.y),l&&(k.z>d?d=k.z:k.z<g&&(g=k.z)),q.add(k);a={minX:e,minY:f,maxX:b,maxY:c};l&&(a.maxZ=d,a.minZ=g);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,f,g,k,m;d=0;for(e=a.length;d<e;d++)f=a[d],g=f.x,k=f.y,m=g/c.maxX,m=b.getUtoTmapping(m,g),g=b.getPoint(m),m=b.getTangent(m),m.set(-m.y,m.x).multiplyScalar(k),f.x=g.x+m.x,f.y=g.y+m.y;return a};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;
THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(f);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g=Array.prototype.slice.call(arguments),k=this.actions[this.actions.length-1].args,k=new THREE.CubicBezierCurve(new THREE.Vector2(k[k.length-2],k[k.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(k);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:g})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,f){var g=this.actions[this.actions.length-1].args;this.absarc(a+g[g.length-2],b+g[g.length-1],c,d,e,f)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,g){var k=this.actions[this.actions.length-1].args;this.absellipse(a+k[k.length-2],b+k[k.length-1],c,d,e,f,g)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,g){var k=Array.prototype.slice.call(arguments),m=new THREE.EllipseCurve(a,b,c,d,e,f,g);this.curves.push(m);m=m.getPoint(1);k.push(m.x);k.push(m.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:k})};
THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;d<a;d++)c.push(this.getPoint(d/a));return c};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);a=a||12;var c=[],d,e,f,g,k,m,r,q,l,n,s,h,t;d=0;for(e=this.actions.length;d<e;d++)switch(f=this.actions[d],g=f.action,f=f.args,g){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:k=f[2];m=f[3];l=f[0];n=f[1];0<c.length?(g=c[c.length-1],s=g.x,
h=g.y):(g=this.actions[d-1].args,s=g[g.length-2],h=g[g.length-1]);for(f=1;f<=a;f++)t=f/a,g=THREE.Shape.Utils.b2(t,s,l,k),t=THREE.Shape.Utils.b2(t,h,n,m),c.push(new THREE.Vector2(g,t));break;case THREE.PathActions.BEZIER_CURVE_TO:k=f[4];m=f[5];l=f[0];n=f[1];r=f[2];q=f[3];0<c.length?(g=c[c.length-1],s=g.x,h=g.y):(g=this.actions[d-1].args,s=g[g.length-2],h=g[g.length-1]);for(f=1;f<=a;f++)t=f/a,g=THREE.Shape.Utils.b3(t,s,l,r,k),t=THREE.Shape.Utils.b3(t,h,n,q,m),c.push(new THREE.Vector2(g,t));break;case THREE.PathActions.CSPLINE_THRU:g=
this.actions[d-1].args;t=[new THREE.Vector2(g[g.length-2],g[g.length-1])];g=a*f[0].length;t=t.concat(f[0]);t=new THREE.SplineCurve(t);for(f=1;f<=g;f++)c.push(t.getPointAt(f/g));break;case THREE.PathActions.ARC:k=f[0];m=f[1];n=f[2];r=f[3];g=f[4];l=!!f[5];s=g-r;h=2*a;for(f=1;f<=h;f++)t=f/h,l||(t=1-t),t=r+t*s,g=k+n*Math.cos(t),t=m+n*Math.sin(t),c.push(new THREE.Vector2(g,t));break;case THREE.PathActions.ELLIPSE:for(k=f[0],m=f[1],n=f[2],q=f[3],r=f[4],g=f[5],l=!!f[6],s=g-r,h=2*a,f=1;f<=h;f++)t=f/h,l||
(t=1-t),t=r+t*s,g=k+n*Math.cos(t),t=m+q*Math.sin(t),c.push(new THREE.Vector2(g,t))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var h=b[e],g=b[f],k=g.x-h.x,l=g.y-h.y;if(1E-10<Math.abs(l)){if(0>l&&(h=b[f],k=-k,g=b[e],l=-l),!(a.y<h.y||a.y>g.y))if(a.y==h.y){if(a.x==h.x)return!0}else{e=l*(a.x-h.x)-k*(a.y-h.y);if(0==e)return!0;0>e||(d=!d)}}else if(a.y==h.y&&(g.x<=a.x&&a.x<=h.x||h.x<=a.x&&a.x<=
g.x))return!0}return d}var e=function(a){var b,c,d,e,f=[],h=new THREE.Path;b=0;for(c=a.length;b<c;b++)d=a[b],e=d.args,d=d.action,d==THREE.PathActions.MOVE_TO&&0!=h.actions.length&&(f.push(h),h=new THREE.Path),h[d].apply(h,e);0!=h.actions.length&&f.push(h);return f}(this.actions);if(0==e.length)return[];if(!0===b)return c(e);var f,g,k,m=[];if(1==e.length)return g=e[0],k=new THREE.Shape,k.actions=g.actions,k.curves=g.curves,m.push(k),m;var r=!THREE.Shape.Utils.isClockWise(e[0].getPoints()),r=a?!r:r;
k=[];var q=[],l=[],n=0,s;q[n]=void 0;l[n]=[];var h,t;h=0;for(t=e.length;h<t;h++)g=e[h],s=g.getPoints(),f=THREE.Shape.Utils.isClockWise(s),(f=a?!f:f)?(!r&&q[n]&&n++,q[n]={s:new THREE.Shape,p:s},q[n].s.actions=g.actions,q[n].s.curves=g.curves,r&&n++,l[n]=[]):l[n].push({h:g,p:s[0]});if(!q[0])return c(e);if(1<q.length){h=!1;t=[];g=0;for(e=q.length;g<e;g++)k[g]=[];g=0;for(e=q.length;g<e;g++)for(f=l[g],r=0;r<f.length;r++){n=f[r];s=!0;for(var v=0;v<q.length;v++)d(n.p,q[v].p)&&(g!=v&&t.push({froms:g,tos:v,
hole:r}),s?(s=!1,k[v].push(n)):h=!0);s&&k[g].push(n)}0<t.length&&(h||(l=k))}h=0;for(t=q.length;h<t;h++)for(k=q[h].s,m.push(k),g=l[h],e=0,f=g.length;e<f;e++)k.holes.push(g[e].h);return m};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};
THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};
THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={triangulateShape:function(a,b){function c(a,b,c){return a.x!=b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=b.x-a.x,k=b.y-a.y,l=e.x-d.x,m=e.y-d.y,q=a.x-d.x,r=a.y-d.y,C=k*l-g*m,z=k*q-g*r;if(1E-10<Math.abs(C)){if(0<C){if(0>z||z>C)return[];l=m*q-l*r;if(0>l||l>C)return[]}else{if(0<z||z<C)return[];l=m*q-l*r;if(0<l||l<C)return[]}if(0==l)return!f||0!=z&&z!=C?[a]:[];if(l==C)return!f||0!=z&&z!=C?[b]:[];if(0==z)return[d];
if(z==C)return[e];f=l/C;return[{x:a.x+f*g,y:a.y+f*k}]}if(0!=z||m*q!=l*r)return[];k=0==g&&0==k;l=0==l&&0==m;if(k&&l)return a.x!=d.x||a.y!=d.y?[]:[a];if(k)return c(d,e,a)?[a]:[];if(l)return c(a,b,d)?[d]:[];0!=g?(a.x<b.x?(g=a,l=a.x,k=b,a=b.x):(g=b,l=b.x,k=a,a=a.x),d.x<e.x?(b=d,C=d.x,m=e,d=e.x):(b=e,C=e.x,m=d,d=d.x)):(a.y<b.y?(g=a,l=a.y,k=b,a=b.y):(g=b,l=b.y,k=a,a=a.y),d.y<e.y?(b=d,C=d.y,m=e,d=e.y):(b=e,C=e.y,m=d,d=d.y));return l<=C?a<C?[]:a==C?f?[]:[b]:a<=d?[b,k]:[b,m]:l>d?[]:l==d?f?[]:[g]:a<=d?[g,k]:
[g,m]}function e(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return 1E-10<Math.abs(a)?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var f,g,k,m,r,q={};k=a.concat();f=0;for(g=b.length;f<g;f++)Array.prototype.push.apply(k,b[f]);f=0;for(g=k.length;f<g;f++)r=k[f].x+":"+k[f].y,void 0!==q[r]&&console.log("Duplicate point",r),q[r]=f;f=function(a,b){function c(a,b){var d=k.length-1,f=a-1;0>f&&(f=d);var g=a+1;g>d&&(g=0);d=e(k[a],k[f],k[g],l[b]);if(!d)return!1;
d=l.length-1;f=b-1;0>f&&(f=d);g=b+1;g>d&&(g=0);return e(l[b],l[f],l[g],k[a])?!0:!1}function f(a,b){var c,e;for(c=0;c<k.length;c++)if(e=c+1,e%=k.length,e=d(a,b,k[c],k[e],!0),0<e.length)return!0;return!1}function g(a,c){var e,f,h,k;for(e=0;e<m.length;e++)for(f=b[m[e]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=d(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var k=a.concat(),l,m=[],q,r,B,C,z,D=[],E,O,Z,P=0;for(q=b.length;P<q;P++)m.push(P);E=0;for(var H=2*m.length;0<m.length;){H--;if(0>H){console.log("Infinite Loop! Holes left:"+
m.length+", Probably Hole outside Shape!");break}for(r=E;r<k.length;r++){B=k[r];q=-1;for(P=0;P<m.length;P++)if(C=m[P],z=B.x+":"+B.y+":"+C,void 0===D[z]){l=b[C];for(O=0;O<l.length;O++)if(C=l[O],c(r,O)&&!f(B,C)&&!g(B,C)){q=O;m.splice(P,1);E=k.slice(0,r+1);C=k.slice(r);O=l.slice(q);Z=l.slice(0,q+1);k=E.concat(O).concat(Z).concat(C);E=r;break}if(0<=q)break;D[z]=!0}if(0<=q)break}}return k}(a,b);var l=THREE.FontUtils.Triangulate(f,!1);f=0;for(g=l.length;f<g;f++)for(m=l[f],k=0;3>k;k++)r=m[k].x+":"+m[k].y,
r=q[r],void 0!==r&&(m[k]=r);return l.concat()},isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,
b)+this.b3p1(a,c)+this.b3p2(a,d)+this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};
THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(a){var b=new THREE.Vector2,c=[],d=this.points,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};
THREE.EllipseCurve=function(a,b,c,d,e,f,g){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.getPoint=function(a){var b;b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);b=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(a,b)};THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);
THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b,c;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);a=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,c,a)});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b,c;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);a=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,c,a)});
THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;a*=d.length-1;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],g=d[c[2]],c=d[c[3]];b.x=THREE.Curve.Utils.interpolate(e.x,f.x,g.x,c.x,a);b.y=THREE.Curve.Utils.interpolate(e.y,f.y,g.y,c.y,a);b.z=THREE.Curve.Utils.interpolate(e.z,f.z,g.z,c.z,a);return b});
THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.z=THREE.Curve.Utils.interpolate(d[c[0]].z,
d[c[1]].z,d[c[2]].z,d[c[3]].z,e);return b});
THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(a){if(!0!==a.initialized){for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(0>a.hierarchy[b].keys[c].time&&(a.hierarchy[b].keys[c].time=
0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var d=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(d)}if(a.hierarchy[b].keys.length&&void 0!==a.hierarchy[b].keys[0].morphTargets){d={};for(c=0;c<a.hierarchy[b].keys.length;c++)for(var e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++){var f=a.hierarchy[b].keys[c].morphTargets[e];d[f]=-1}a.hierarchy[b].usedMorphTargets=d;for(c=0;c<a.hierarchy[b].keys.length;c++){var g=
{};for(f in d){for(e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++)if(a.hierarchy[b].keys[c].morphTargets[e]===f){g[f]=a.hierarchy[b].keys[c].morphTargetsInfluences[e];break}e===a.hierarchy[b].keys[c].morphTargets.length&&(g[f]=0)}a.hierarchy[b].keys[c].morphTargetsInfluences=g}}for(c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=
!0;return a}},parse:function(a){var b=function(a,c){c.push(a);for(var d=0;d<a.children.length;d++)b(a.children[d],c)},c=[];if(a instanceof THREE.SkinnedMesh)for(var d=0;d<a.skeleton.bones.length;d++)c.push(a.skeleton.bones[d]);else b(a,c);return c},play:function(a){-1===this.animations.indexOf(a)&&this.animations.push(a)},stop:function(a){a=this.animations.indexOf(a);-1!==a&&this.animations.splice(a,1)},update:function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].update(a)}};
THREE.Animation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.init(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=!0;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};THREE.Animation.prototype.keyTypes=["pos","rot","scl"];THREE.Animation.prototype.play=function(a,b){this.currentTime=void 0!==a?a:0;this.weight=void 0!==b?b:1;this.isPlaying=!0;this.reset();THREE.AnimationHandler.play(this)};
THREE.Animation.prototype.stop=function(){this.isPlaying=!1;THREE.AnimationHandler.stop(this)};
THREE.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];c.matrixAutoUpdate=!0;void 0===c.animationCache&&(c.animationCache={});void 0===c.animationCache[this.data.name]&&(c.animationCache[this.data.name]={},c.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].originalMatrix=c.matrix);for(var c=c.animationCache[this.data.name],d=0;3>d;d++){for(var e=
this.keyTypes[d],f=this.data.hierarchy[a].keys[0],g=this.getNextKeyWith(e,a,1);g.time<this.currentTime&&g.index>f.index;)f=g,g=this.getNextKeyWith(e,a,g.index+1);c.prevKey[e]=f;c.nextKey[e]=g}}};
THREE.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Quaternion,e=function(a,b){var c=[],d=[],e,l,n,s,h,t;e=(a.length-1)*b;l=Math.floor(e);e-=l;c[0]=0===l?l:l-1;c[1]=l;c[2]=l>a.length-2?l:l+1;c[3]=l>a.length-3?l:l+2;l=a[c[0]];s=a[c[1]];h=a[c[2]];t=a[c[3]];c=e*e;n=e*c;d[0]=f(l[0],s[0],h[0],t[0],e,c,n);d[1]=f(l[1],s[1],h[1],t[1],e,c,n);d[2]=f(l[2],s[2],h[2],t[2],e,c,n);return d},f=function(a,b,c,d,e,f,n){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*n+
(-3*(b-c)-2*a-d)*f+a*e+b};return function(f){if(!1!==this.isPlaying&&(this.currentTime+=f*this.timeScale,0!==this.weight)){f=this.data.length;if(!0===this.loop&&this.currentTime>f)this.currentTime%=f,this.reset();else if(!1===this.loop&&this.currentTime>f){this.stop();return}f=0;for(var k=this.hierarchy.length;f<k;f++)for(var m=this.hierarchy[f],r=m.animationCache[this.data.name],q=0;3>q;q++){var l=this.keyTypes[q],n=r.prevKey[l],s=r.nextKey[l];if(s.time<=this.currentTime){n=this.data.hierarchy[f].keys[0];
for(s=this.getNextKeyWith(l,f,1);s.time<this.currentTime&&s.index>n.index;)n=s,s=this.getNextKeyWith(l,f,s.index+1);r.prevKey[l]=n;r.nextKey[l]=s}m.matrixAutoUpdate=!0;m.matrixWorldNeedsUpdate=!0;var h=(this.currentTime-n.time)/(s.time-n.time),t=n[l],v=s[l];0>h&&(h=0);1<h&&(h=1);if("pos"===l)if(this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=t[0]+(v[0]-t[0])*h,c.y=t[1]+(v[1]-t[1])*h,c.z=t[2]+(v[2]-t[2])*h,m instanceof THREE.Bone?(n=this.weight/(this.weight+m.accumulatedPosWeight),m.position.lerp(c,
n),m.accumulatedPosWeight+=this.weight):m.position.copy(c);else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",f,n.index-1).pos,a[1]=t,a[2]=v,a[3]=this.getNextKeyWith("pos",f,s.index+1).pos,h=.33*h+.33,s=e(a,h),n=1,m instanceof THREE.Bone&&(n=this.weight/(this.weight+m.accumulatedPosWeight),m.accumulatedPosWeight+=this.weight),l=m.position,l.x+=(s[0]-l.x)*n,l.y+=(s[1]-l.y)*n,l.z+=(s[2]-
l.z)*n,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(h=e(a,1.01*h),b.set(h[0],h[1],h[2]),b.sub(l),b.y=0,b.normalize(),h=Math.atan2(b.x,b.z),m.rotation.set(0,h,0))}else"rot"===l?(THREE.Quaternion.slerp(t,v,d,h),m instanceof THREE.Bone?0===m.accumulatedRotWeight?(m.quaternion.copy(d),m.accumulatedRotWeight=this.weight):(n=this.weight/(this.weight+m.accumulatedRotWeight),THREE.Quaternion.slerp(m.quaternion,d,m.quaternion,n),m.accumulatedRotWeight+=this.weight):m.quaternion.copy(d)):
"scl"===l&&(c.x=t[0]+(v[0]-t[0])*h,c.y=t[1]+(v[1]-t[1])*h,c.z=t[2]+(v[2]-t[2])*h,m instanceof THREE.Bone?(n=this.weight/(this.weight+m.accumulatedSclWeight),m.scale.lerp(c,n),m.accumulatedSclWeight+=this.weight):m.scale.copy(c))}return!0}}}();
THREE.Animation.prototype.getNextKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]};
THREE.KeyFrameAnimation=function(a){this.root=a.node;this.data=THREE.AnimationHandler.init(a);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=.001;this.isPlaying=!1;this.loop=this.isPaused=!0;a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],g=this.getNextKeyWith(f,a,0);g&&g.apply(f)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;if(!1===this.isPlaying){this.isPlaying=!0;var b=this.hierarchy.length,c,d;for(a=0;a<b;a++)c=this.hierarchy[a],d=this.data.hierarchy[a],void 0===d.animationCache&&(d.animationCache={},d.animationCache.prevKey=null,d.animationCache.nextKey=null,d.animationCache.originalMatrix=c.matrix),c=this.data.hierarchy[a].keys,c.length&&(d.animationCache.prevKey=c[0],d.animationCache.nextKey=c[1],this.startTime=Math.min(c[0].time,
this.startTime),this.endTime=Math.max(c[c.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.play(this)};THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.stop(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;d.copy(b.matrix);b.matrix=d;delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(!1!==this.isPlaying){this.currentTime+=a*this.timeScale;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],d=this.data.hierarchy[a],e=d.keys,d=d.animationCache;if(e.length){var f=d.prevKey,g=d.nextKey;if(g.time<=this.currentTime){for(;g.time<this.currentTime&&g.index>f.index;)f=g,g=e[f.index+1];d.prevKey=
f;d.nextKey=g}g.time>=this.currentTime?f.interpolate(g,this.currentTime):f.interpolate(g,g.time);this.data.hierarchy[a].node.updateMatrix();c.matrixWorldNeedsUpdate=!0}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};
THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.MorphAnimation=function(a){this.mesh=a;this.frames=a.morphTargetInfluences.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.isPlaying=!1};
THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var a=0,b=0;return function(c){if(!1!==this.isPlaying){this.currentTime+=c;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);c=this.duration/this.frames;var d=Math.floor(this.currentTime/c);d!=b&&(this.mesh.morphTargetInfluences[a]=0,this.mesh.morphTargetInfluences[b]=1,this.mesh.morphTargetInfluences[d]=
0,a=b,b=d);this.mesh.morphTargetInfluences[d]=this.currentTime%c/c;this.mesh.morphTargetInfluences[a]=1-this.mesh.morphTargetInfluences[d]}}}()};
THREE.BoxGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,t){var v,w=k.widthSegments,x=k.heightSegments,A=e/2,y=f/2,u=k.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)v="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)v="y",x=k.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)v="x",w=k.depthSegments;var B=w+1,C=x+1,z=e/w,D=f/x,E=new THREE.Vector3;E[v]=0<g?1:-1;for(e=0;e<C;e++)for(f=0;f<B;f++){var O=new THREE.Vector3;O[a]=(f*z-A)*c;O[b]=(e*D-y)*d;O[v]=g;k.vertices.push(O)}for(e=
0;e<x;e++)for(f=0;f<w;f++)y=f+B*e,a=f+B*(e+1),b=f+1+B*(e+1),c=f+1+B*e,d=new THREE.Vector2(f/w,1-e/x),g=new THREE.Vector2(f/w,1-(e+1)/x),v=new THREE.Vector2((f+1)/w,1-(e+1)/x),A=new THREE.Vector2((f+1)/w,1-e/x),y=new THREE.Face3(y+u,a+u,c+u),y.normal.copy(E),y.vertexNormals.push(E.clone(),E.clone(),E.clone()),y.materialIndex=t,k.faces.push(y),k.faceVertexUvs[0].push([d,g,A]),y=new THREE.Face3(a+u,b+u,c+u),y.normal.copy(E),y.vertexNormals.push(E.clone(),E.clone(),E.clone()),y.materialIndex=t,k.faces.push(y),
k.faceVertexUvs[0].push([g.clone(),v,A.clone()])}THREE.Geometry.call(this);this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=f||1;var k=this;d=a/2;e=b/2;f=c/2;g("z","y",-1,-1,c,b,d,0);g("z","y",1,-1,c,b,-d,1);g("x","z",1,1,a,c,e,2);g("x","z",1,-1,a,c,-e,3);g("x","y",1,-1,a,b,f,4);g("x","y",-1,-1,a,b,-f,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e,f=[];e=new THREE.Vector3;var g=new THREE.Vector2(.5,.5);this.vertices.push(e);f.push(g);for(e=0;e<=b;e++){var k=new THREE.Vector3,m=c+e/b*d;k.x=a*Math.cos(m);k.y=a*Math.sin(m);this.vertices.push(k);f.push(new THREE.Vector2((k.x/a+1)/2,(k.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(e=1;e<=
b;e++)this.faces.push(new THREE.Face3(e,e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),g.clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,d,e,f){console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry.");return new THREE.BoxGeometry(a,b,c,d,e,f)};
THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=d||8;e=e||1;f=void 0!==f?f:!1;var g=c/2,k,m,r=[],q=[];for(m=0;m<=e;m++){var l=[],n=[],s=m/e,h=s*(b-a)+a;for(k=0;k<=d;k++){var t=k/d,v=new THREE.Vector3;v.x=h*Math.sin(t*Math.PI*2);v.y=-s*c+g;v.z=h*Math.cos(t*Math.PI*2);this.vertices.push(v);l.push(this.vertices.length-1);n.push(new THREE.Vector2(t,
1-s))}r.push(l);q.push(n)}c=(b-a)/c;for(k=0;k<d;k++)for(0!==a?(l=this.vertices[r[0][k]].clone(),n=this.vertices[r[0][k+1]].clone()):(l=this.vertices[r[1][k]].clone(),n=this.vertices[r[1][k+1]].clone()),l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*c).normalize(),n.setY(Math.sqrt(n.x*n.x+n.z*n.z)*c).normalize(),m=0;m<e;m++){var s=r[m][k],h=r[m+1][k],t=r[m+1][k+1],v=r[m][k+1],w=l.clone(),x=l.clone(),A=n.clone(),y=n.clone(),u=q[m][k].clone(),B=q[m+1][k].clone(),C=q[m+1][k+1].clone(),z=q[m][k+1].clone();this.faces.push(new THREE.Face3(s,
h,v,[w,x,y]));this.faceVertexUvs[0].push([u,B,z]);this.faces.push(new THREE.Face3(h,t,v,[x.clone(),A,y.clone()]));this.faceVertexUvs[0].push([B.clone(),C,z.clone()])}if(!1===f&&0<a)for(this.vertices.push(new THREE.Vector3(0,g,0)),k=0;k<d;k++)s=r[0][k],h=r[0][k+1],t=this.vertices.length-1,w=new THREE.Vector3(0,1,0),x=new THREE.Vector3(0,1,0),A=new THREE.Vector3(0,1,0),u=q[0][k].clone(),B=q[0][k+1].clone(),C=new THREE.Vector2(B.x,0),this.faces.push(new THREE.Face3(s,h,t,[w,x,A])),this.faceVertexUvs[0].push([u,
B,C]);if(!1===f&&0<b)for(this.vertices.push(new THREE.Vector3(0,-g,0)),k=0;k<d;k++)s=r[m][k+1],h=r[m][k],t=this.vertices.length-1,w=new THREE.Vector3(0,-1,0),x=new THREE.Vector3(0,-1,0),A=new THREE.Vector3(0,-1,0),u=q[m][k+1].clone(),B=q[m][k].clone(),C=new THREE.Vector2(B.x,1),this.faces.push(new THREE.Face3(s,h,t,[w,x,A])),this.faceVertexUvs[0].push([u,B,C]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=THREE.Math.sign,e=1,e=a.x-b.x,f=a.y-b.y,g=c.x-a.x,h=c.y-a.y,k=e*e+f*f;if(1E-10<Math.abs(e*h-f*g)){var l=Math.sqrt(k),d=Math.sqrt(g*g+h*h),k=b.x-f/l;b=b.y+e/l;g=((c.x-h/d-k)*h-(c.y+g/d-b)*g)/(e*h-f*g);c=k+e*g-a.x;a=b+f*g-a.y;e=c*c+a*a;if(2>=e)return new THREE.Vector2(c,a);e=Math.sqrt(e/2)}else a=!1,1E-10<e?1E-10<g&&(a=!0):-1E-10>e?-1E-10>g&&
(a=!0):d(f)==d(h)&&(a=!0),a?(c=-f,a=e,e=Math.sqrt(k)):(c=e,a=f,e=Math.sqrt(k/2));return new THREE.Vector2(c/e,a/e)}function e(c,d){var e,f;for(F=c.length;0<=--F;){e=F;f=F-1;0>f&&(f=c.length-1);for(var g=0,h=s+2*q,g=0;g<h;g++){var k=X*g,l=X*(g+1),m=d+e+k,k=d+f+k,n=d+f+l,l=d+e+l,r=c,t=g,u=h,v=e,w=f,m=m+Z,k=k+Z,n=n+Z,l=l+Z;O.faces.push(new THREE.Face3(m,k,l,null,null,x));O.faces.push(new THREE.Face3(k,n,l,null,null,x));m=A.generateSideWallUV(O,a,r,b,m,k,n,l,t,u,v,w);O.faceVertexUvs[0].push([m[0],m[1],
m[3]]);O.faceVertexUvs[0].push([m[1],m[2],m[3]])}}}function f(a,b,c){O.vertices.push(new THREE.Vector3(a,b,c))}function g(c,d,e,f){c+=Z;d+=Z;e+=Z;O.faces.push(new THREE.Face3(c,d,e,null,null,w));c=f?A.generateBottomUV(O,a,b,c,d,e):A.generateTopUV(O,a,b,c,d,e);O.faceVertexUvs[0].push(c)}var k=void 0!==b.amount?b.amount:100,m=void 0!==b.bevelThickness?b.bevelThickness:6,r=void 0!==b.bevelSize?b.bevelSize:m-2,q=void 0!==b.bevelSegments?b.bevelSegments:3,l=void 0!==b.bevelEnabled?b.bevelEnabled:!0,n=
void 0!==b.curveSegments?b.curveSegments:12,s=void 0!==b.steps?b.steps:1,h=b.extrudePath,t,v=!1,w=b.material,x=b.extrudeMaterial,A=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,y,u,B,C;h&&(t=h.getSpacedPoints(s),v=!0,l=!1,y=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(h,s,!1),u=new THREE.Vector3,B=new THREE.Vector3,C=new THREE.Vector3);l||(r=m=q=0);var z,D,E,O=this,Z=this.vertices.length,h=a.extractPoints(n),n=h.shape,P=h.holes;if(h=!THREE.Shape.Utils.isClockWise(n)){n=
n.reverse();D=0;for(E=P.length;D<E;D++)z=P[D],THREE.Shape.Utils.isClockWise(z)&&(P[D]=z.reverse());h=!1}var H=THREE.Shape.Utils.triangulateShape(n,P),K=n;D=0;for(E=P.length;D<E;D++)z=P[D],n=n.concat(z);var L,G,I,Q,T,X=n.length,J,R=H.length,h=[],F=0;I=K.length;L=I-1;for(G=F+1;F<I;F++,L++,G++)L===I&&(L=0),G===I&&(G=0),h[F]=d(K[F],K[L],K[G]);var N=[],V,Y=h.concat();D=0;for(E=P.length;D<E;D++){z=P[D];V=[];F=0;I=z.length;L=I-1;for(G=F+1;F<I;F++,L++,G++)L===I&&(L=0),G===I&&(G=0),V[F]=d(z[F],z[L],z[G]);
N.push(V);Y=Y.concat(V)}for(L=0;L<q;L++){I=L/q;Q=m*(1-I);G=r*Math.sin(I*Math.PI/2);F=0;for(I=K.length;F<I;F++)T=c(K[F],h[F],G),f(T.x,T.y,-Q);D=0;for(E=P.length;D<E;D++)for(z=P[D],V=N[D],F=0,I=z.length;F<I;F++)T=c(z[F],V[F],G),f(T.x,T.y,-Q)}G=r;for(F=0;F<X;F++)T=l?c(n[F],Y[F],G):n[F],v?(B.copy(y.normals[0]).multiplyScalar(T.x),u.copy(y.binormals[0]).multiplyScalar(T.y),C.copy(t[0]).add(B).add(u),f(C.x,C.y,C.z)):f(T.x,T.y,0);for(I=1;I<=s;I++)for(F=0;F<X;F++)T=l?c(n[F],Y[F],G):n[F],v?(B.copy(y.normals[I]).multiplyScalar(T.x),
u.copy(y.binormals[I]).multiplyScalar(T.y),C.copy(t[I]).add(B).add(u),f(C.x,C.y,C.z)):f(T.x,T.y,k/s*I);for(L=q-1;0<=L;L--){I=L/q;Q=m*(1-I);G=r*Math.sin(I*Math.PI/2);F=0;for(I=K.length;F<I;F++)T=c(K[F],h[F],G),f(T.x,T.y,k+Q);D=0;for(E=P.length;D<E;D++)for(z=P[D],V=N[D],F=0,I=z.length;F<I;F++)T=c(z[F],V[F],G),v?f(T.x,T.y+t[s-1].y,t[s-1].x+Q):f(T.x,T.y,k+Q)}(function(){if(l){var a;a=0*X;for(F=0;F<R;F++)J=H[F],g(J[2]+a,J[1]+a,J[0]+a,!0);a=s+2*q;a*=X;for(F=0;F<R;F++)J=H[F],g(J[0]+a,J[1]+a,J[2]+a,!1)}else{for(F=
0;F<R;F++)J=H[F],g(J[2],J[1],J[0],!0);for(F=0;F<R;F++)J=H[F],g(J[0]+X*s,J[1]+X*s,J[2]+X*s,!1)}})();(function(){var a=0;e(K,a);a+=K.length;D=0;for(E=P.length;D<E;D++)z=P[D],e(z,a),a+=z.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){b=a.vertices[e].x;e=a.vertices[e].y;c=a.vertices[f].x;f=a.vertices[f].y;return[new THREE.Vector2(a.vertices[d].x,a.vertices[d].y),new THREE.Vector2(b,e),new THREE.Vector2(c,f)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,g,k,m,r,q,l){b=a.vertices[e].x;c=a.vertices[e].y;e=a.vertices[e].z;d=a.vertices[f].x;m=a.vertices[f].y;f=a.vertices[f].z;r=a.vertices[g].x;
q=a.vertices[g].y;g=a.vertices[g].z;l=a.vertices[k].x;var n=a.vertices[k].y;a=a.vertices[k].z;return.01>Math.abs(c-m)?[new THREE.Vector2(b,1-e),new THREE.Vector2(d,1-f),new THREE.Vector2(r,1-g),new THREE.Vector2(l,1-a)]:[new THREE.Vector2(c,1-e),new THREE.Vector2(m,1-f),new THREE.Vector2(q,1-g),new THREE.Vector2(n,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,g,k=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var m=e.shape,r=e.holes;if(!THREE.Shape.Utils.isClockWise(m))for(m=m.reverse(),e=0,f=r.length;e<f;e++)g=r[e],THREE.Shape.Utils.isClockWise(g)&&(r[e]=g.reverse());var q=THREE.Shape.Utils.triangulateShape(m,r);e=0;for(f=r.length;e<f;e++)g=r[e],
m=m.concat(g);r=m.length;f=q.length;for(e=0;e<r;e++)g=m[e],this.vertices.push(new THREE.Vector3(g.x,g.y,0));for(e=0;e<f;e++)r=q[e],m=r[0]+k,g=r[1]+k,r=r[2]+k,this.faces.push(new THREE.Face3(m,g,r,null,null,c)),this.faceVertexUvs[0].push(d.generateBottomUV(this,a,b,m,g,r))};
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);b=b||12;c=c||0;d=d||2*Math.PI;for(var e=1/(a.length-1),f=1/b,g=0,k=b;g<=k;g++)for(var m=c+g*f*d,r=Math.cos(m),q=Math.sin(m),m=0,l=a.length;m<l;m++){var n=a[m],s=new THREE.Vector3;s.x=r*n.x-q*n.y;s.y=q*n.x+r*n.y;s.z=n.z;this.vertices.push(s)}c=a.length;g=0;for(k=b;g<k;g++)for(m=0,l=a.length-1;m<l;m++){b=q=m+c*g;d=q+c;var r=q+1+c,q=q+1,n=g*f,s=m*e,h=n+f,t=s+e;this.faces.push(new THREE.Face3(b,d,q));this.faceVertexUvs[0].push([new THREE.Vector2(n,
s),new THREE.Vector2(h,s),new THREE.Vector2(n,t)]);this.faces.push(new THREE.Face3(d,r,q));this.faceVertexUvs[0].push([new THREE.Vector2(h,s),new THREE.Vector2(h,t),new THREE.Vector2(n,t)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=c||1;d=d||1;var g=c+1,k=d+1,m=a/c,r=b/d,q=new THREE.Vector3(0,0,1);for(a=0;a<k;a++){var l=a*r-f;for(b=0;b<g;b++)this.vertices.push(new THREE.Vector3(b*m-e,-l,0))}for(a=0;a<d;a++)for(b=0;b<c;b++){var n=b+g*a,e=b+g*(a+1),f=b+1+g*(a+1),k=b+1+g*a,m=new THREE.Vector2(b/c,1-a/d),r=new THREE.Vector2(b/c,1-(a+1)/d),l=new THREE.Vector2((b+1)/c,1-(a+1)/d),s=new THREE.Vector2((b+
1)/c,1-a/d),n=new THREE.Face3(n,e,k);n.normal.copy(q);n.vertexNormals.push(q.clone(),q.clone(),q.clone());this.faces.push(n);this.faceVertexUvs[0].push([m,r,s]);n=new THREE.Face3(e,f,k);n.normal.copy(q);n.vertexNormals.push(q.clone(),q.clone(),q.clone());this.faces.push(n);this.faceVertexUvs[0].push([r.clone(),l,s.clone()])}};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);a=a||0;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):8;var g,k=[],m=a,r=(b-a)/d;for(a=0;a<d+1;a++){for(g=0;g<c+1;g++){var q=new THREE.Vector3,l=e+g/c*f;q.x=m*Math.cos(l);q.y=m*Math.sin(l);this.vertices.push(q);k.push(new THREE.Vector2((q.x/b+1)/2,(q.y/b+1)/2))}m+=r}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++)for(e=a*(c+1),g=0;g<c;g++)f=l=g+e,r=l+c+1,q=l+c+2,this.faces.push(new THREE.Face3(f,
r,q,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([k[f].clone(),k[r].clone(),k[q].clone()]),f=l,r=l+c+2,q=l+1,this.faces.push(new THREE.Face3(f,r,q,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([k[f].clone(),k[r].clone(),k[q].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,m)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var k,m,r=[],q=[];for(m=0;m<=c;m++){var l=[],n=[];for(k=0;k<=b;k++){var s=k/b,h=m/c,t=new THREE.Vector3;t.x=-a*Math.cos(d+s*e)*Math.sin(f+h*g);t.y=a*Math.cos(f+h*g);t.z=
a*Math.sin(d+s*e)*Math.sin(f+h*g);this.vertices.push(t);l.push(this.vertices.length-1);n.push(new THREE.Vector2(s,1-h))}r.push(l);q.push(n)}for(m=0;m<c;m++)for(k=0;k<b;k++){d=r[m][k+1];e=r[m][k];f=r[m+1][k];g=r[m+1][k+1];var l=this.vertices[d].clone().normalize(),n=this.vertices[e].clone().normalize(),s=this.vertices[f].clone().normalize(),h=this.vertices[g].clone().normalize(),t=q[m][k+1].clone(),v=q[m][k].clone(),w=q[m+1][k].clone(),x=q[m+1][k+1].clone();Math.abs(this.vertices[d].y)===a?(t.x=(t.x+
v.x)/2,this.faces.push(new THREE.Face3(d,f,g,[l,s,h])),this.faceVertexUvs[0].push([t,w,x])):Math.abs(this.vertices[f].y)===a?(w.x=(w.x+x.x)/2,this.faces.push(new THREE.Face3(d,e,f,[l,n,s])),this.faceVertexUvs[0].push([t,v,w])):(this.faces.push(new THREE.Face3(d,e,g,[l,n,h])),this.faceVertexUvs[0].push([t,v,x]),this.faces.push(new THREE.Face3(e,f,g,[n.clone(),s,h.clone()])),this.faceVertexUvs[0].push([v.clone(),w,x.clone()]))}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,
a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var f=new THREE.Vector3,g=[],k=[],m=0;m<=c;m++)for(var r=0;r<=d;r++){var q=r/d*e,l=m/c*Math.PI*2;f.x=a*Math.cos(q);f.y=a*Math.sin(q);var n=new THREE.Vector3;n.x=(a+b*Math.cos(l))*Math.cos(q);n.y=(a+b*Math.cos(l))*Math.sin(q);n.z=b*Math.sin(l);this.vertices.push(n);g.push(new THREE.Vector2(r/d,m/c));k.push(n.clone().sub(f).normalize())}for(m=
1;m<=c;m++)for(r=1;r<=d;r++)a=(d+1)*m+r-1,b=(d+1)*(m-1)+r-1,e=(d+1)*(m-1)+r,f=(d+1)*m+r,q=new THREE.Face3(a,b,f,[k[a].clone(),k[b].clone(),k[f].clone()]),this.faces.push(q),this.faceVertexUvs[0].push([g[a].clone(),g[b].clone(),g[f].clone()]),q=new THREE.Face3(b,e,f,[k[b].clone(),k[e].clone(),k[f].clone()]),this.faces.push(q),this.faceVertexUvs[0].push([g[b].clone(),g[e].clone(),g[f].clone()]);this.computeFaceNormals()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry=function(a,b,c,d,e,f,g){function k(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=b/c;b=Math.cos(a);f=f*d*(2+b)*.5;g=d*(2+b)*g*.5;d=e*d*Math.sin(a)*.5;return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:f,heightScale:g};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;f=f||3;g=g||1;for(var m=Array(c),r=new THREE.Vector3,q=new THREE.Vector3,l=new THREE.Vector3,n=0;n<c;++n){m[n]=Array(d);var s=n/c*2*e*Math.PI,
h=k(s,f,e,a,g),s=k(s+.01,f,e,a,g);r.subVectors(s,h);q.addVectors(s,h);l.crossVectors(r,q);q.crossVectors(l,r);l.normalize();q.normalize();for(s=0;s<d;++s){var t=s/d*2*Math.PI,v=-b*Math.cos(t),t=b*Math.sin(t),w=new THREE.Vector3;w.x=h.x+v*q.x+t*l.x;w.y=h.y+v*q.y+t*l.y;w.z=h.z+v*q.z+t*l.z;m[n][s]=this.vertices.push(w)-1}}for(n=0;n<c;++n)for(s=0;s<d;++s)e=(n+1)%c,f=(s+1)%d,a=m[n][s],b=m[e][s],e=m[e][f],f=m[n][f],g=new THREE.Vector2(n/c,s/d),r=new THREE.Vector2((n+1)/c,s/d),q=new THREE.Vector2((n+1)/
c,(s+1)/d),l=new THREE.Vector2(n/c,(s+1)/d),this.faces.push(new THREE.Face3(a,b,f)),this.faceVertexUvs[0].push([g,r,l]),this.faces.push(new THREE.Face3(b,e,f)),this.faceVertexUvs[0].push([r.clone(),q,l.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var f=[],g,k,m=b+1,r,q,l,n,s=new THREE.Vector3,h,t,v;h=new THREE.TubeGeometry.FrenetFrames(a,b,e);t=h.normals;v=h.binormals;this.tangents=h.tangents;this.normals=t;this.binormals=v;for(h=0;h<m;h++)for(f[h]=[],r=h/(m-1),n=a.getPointAt(r),g=t[h],k=v[h],r=0;r<d;r++)q=r/d*2*Math.PI,l=-c*Math.cos(q),q=c*Math.sin(q),s.copy(n),s.x+=l*g.x+q*
k.x,s.y+=l*g.y+q*k.y,s.z+=l*g.z+q*k.z,f[h][r]=this.vertices.push(new THREE.Vector3(s.x,s.y,s.z))-1;for(h=0;h<b;h++)for(r=0;r<d;r++)m=e?(h+1)%b:h+1,s=(r+1)%d,a=f[h][r],c=f[m][r],m=f[m][s],s=f[h][s],t=new THREE.Vector2(h/b,r/d),v=new THREE.Vector2((h+1)/b,r/d),g=new THREE.Vector2((h+1)/b,(r+1)/d),k=new THREE.Vector2(h/b,(r+1)/d),this.faces.push(new THREE.Face3(a,c,s)),this.faceVertexUvs[0].push([t,v,k]),this.faces.push(new THREE.Face3(c,m,s)),this.faceVertexUvs[0].push([v.clone(),g,k.clone()]);this.computeFaceNormals();
this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var d=new THREE.Vector3;new THREE.Vector3;var e=[],f=[],g=[],k=new THREE.Vector3,m=new THREE.Matrix4;b+=1;var r,q,l;this.tangents=e;this.normals=f;this.binormals=g;for(r=0;r<b;r++)q=r/(b-1),e[r]=a.getTangentAt(q),e[r].normalize();f[0]=new THREE.Vector3;g[0]=new THREE.Vector3;a=Number.MAX_VALUE;r=Math.abs(e[0].x);q=Math.abs(e[0].y);l=Math.abs(e[0].z);r<=a&&(a=r,d.set(1,0,0));q<=a&&(a=q,d.set(0,1,0));l<=a&&d.set(0,0,1);k.crossVectors(e[0],
d).normalize();f[0].crossVectors(e[0],k);g[0].crossVectors(e[0],f[0]);for(r=1;r<b;r++)f[r]=f[r-1].clone(),g[r]=g[r-1].clone(),k.crossVectors(e[r-1],e[r]),1E-4<k.length()&&(k.normalize(),d=Math.acos(THREE.Math.clamp(e[r-1].dot(e[r]),-1,1)),f[r].applyMatrix4(m.makeRotationAxis(k,d))),g[r].crossVectors(e[r],f[r]);if(c)for(d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1)),d/=b-1,0<e[0].dot(k.crossVectors(f[0],f[b-1]))&&(d=-d),r=1;r<b;r++)f[r].applyMatrix4(m.makeRotationAxis(e[r],d*r)),g[r].crossVectors(e[r],
f[r])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=m.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);m.faces.push(d);v.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(v.z,-v.x);m.faceVertexUvs[0].push([k(a.uv,a,d),k(b.uv,b,d),k(c.uv,c,d)])}function g(a,b){var c=
Math.pow(2,b);Math.pow(4,b);for(var d=e(m.vertices[a.a]),g=e(m.vertices[a.b]),h=e(m.vertices[a.c]),k=[],l=0;l<=c;l++){k[l]=[];for(var n=e(d.clone().lerp(h,l/c)),q=e(g.clone().lerp(h,l/c)),r=c-l,t=0;t<=r;t++)k[l][t]=0==t&&l==c?n:e(n.clone().lerp(q,t/r))}for(l=0;l<c;l++)for(t=0;t<2*(c-l)-1;t++)d=Math.floor(t/2),0==t%2?f(k[l][d+1],k[l+1][d],k[l][d]):f(k[l][d+1],k[l+1][d+1],k[l+1][d])}function k(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,
a.y));return a.clone()}THREE.Geometry.call(this);c=c||1;d=d||0;for(var m=this,r=0,q=a.length;r<q;r+=3)e(new THREE.Vector3(a[r],a[r+1],a[r+2]));a=this.vertices;for(var l=[],n=r=0,q=b.length;r<q;r+=3,n++){var s=a[b[r]],h=a[b[r+1]],t=a[b[r+2]];l[n]=new THREE.Face3(s.index,h.index,t.index,[s.clone(),h.clone(),t.clone()])}for(var v=new THREE.Vector3,r=0,q=l.length;r<q;r++)g(l[r],d);r=0;for(q=this.faceVertexUvs[0].length;r<q;r++)b=this.faceVertexUvs[0][r],d=b[0].x,a=b[1].x,l=b[2].x,n=Math.max(d,Math.max(a,
l)),s=Math.min(d,Math.min(a,l)),.9<n&&.1>s&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>l&&(b[2].x+=1));r=0;for(q=this.vertices.length;r<q;r++)this.vertices[r].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.IcosahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.OctahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],g,k,m,r,q=b+1;for(g=0;g<=c;g++)for(r=g/c,k=0;k<=b;k++)m=k/b,m=a(m,r),d.push(m);var l,n,s,h;for(g=0;g<c;g++)for(k=0;k<b;k++)a=g*q+k,d=g*q+k+1,r=(g+1)*q+k+1,m=(g+1)*q+k,l=new THREE.Vector2(k/b,g/c),n=new THREE.Vector2((k+1)/b,g/c),s=new THREE.Vector2((k+1)/b,(g+1)/c),h=new THREE.Vector2(k/b,(g+1)/c),e.push(new THREE.Face3(a,d,m)),f.push([l,n,h]),e.push(new THREE.Face3(d,r,m)),
f.push([n.clone(),s,h.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,a,b,THREE.LinePieces)};THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));return function(c,d,e,f,g,k){THREE.Object3D.call(this);void 0===f&&(f=16776960);void 0===e&&(e=1);void 0===g&&(g=.2*e);void 0===k&&(k=.2*g);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:f}));this.line.matrixAutoUpdate=!1;this.add(this.line);
this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:f}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,g,k)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.set(a);this.cone.material.color.set(a)};
THREE.BoxHelper=function(a){var b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3));THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,d=this.geometry.attributes.position.array;d[0]=b.x;d[1]=b.y;d[2]=b.z;d[3]=c.x;d[4]=b.y;d[5]=b.z;d[6]=c.x;d[7]=b.y;d[8]=b.z;d[9]=c.x;d[10]=c.y;d[11]=b.z;d[12]=c.x;d[13]=c.y;d[14]=b.z;d[15]=b.x;d[16]=c.y;d[17]=b.z;d[18]=b.x;d[19]=c.y;d[20]=b.z;d[21]=b.x;d[22]=b.y;d[23]=b.z;d[24]=b.x;d[25]=b.y;d[26]=c.z;d[27]=c.x;d[28]=b.y;d[29]=c.z;d[30]=c.x;d[31]=b.y;
d[32]=c.z;d[33]=c.x;d[34]=c.y;d[35]=c.z;d[36]=c.x;d[37]=c.y;d[38]=c.z;d[39]=b.x;d[40]=c.y;d[41]=c.z;d[42]=b.x;d[43]=c.y;d[44]=c.z;d[45]=b.x;d[46]=b.y;d[47]=c.z;d[48]=b.x;d[49]=b.y;d[50]=b.z;d[51]=b.x;d[52]=b.y;d[53]=c.z;d[54]=c.x;d[55]=b.y;d[56]=b.z;d[57]=c.x;d[58]=b.y;d[59]=c.z;d[60]=c.x;d[61]=c.y;d[62]=b.z;d[63]=c.x;d[64]=c.y;d[65]=c.z;d[66]=b.x;d[67]=c.y;d[68]=b.z;d[69]=b.x;d[70]=c.y;d[71]=c.z;this.geometry.attributes.position.needsUpdate=!0;this.geometry.computeBoundingSphere();this.matrixAutoUpdate=
!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,d,e,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=f;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,g,k,m){a.set(g,k,m);c.unprojectVector(a,b);d=e.pointMap[d];if(void 0!==d)for(g=0,k=d.length;g<k;g++)e.geometry.vertices[d[g]].copy(a)}var e=this;b.projectionMatrix.copy(this.camera.projectionMatrix);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",.7,
1.1,-1);d("u2",-.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,d);this.add(this.lightPlane);
c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],k=new THREE.BufferGeometry,m=a.geometry.clone();m.mergeVertices();m.computeFaceNormals();for(var r=m.vertices,m=m.faces,q=0,l=0,n=m.length;l<n;l++)for(var s=m[l],h=0;3>h;h++){d[0]=s[g[h]];d[1]=s[g[(h+1)%3]];d.sort(f);var t=d.toString();void 0===e[t]?(e[t]={vert1:d[0],vert2:d[1],face1:l,face2:void 0},q++):e[t].face2=l}k.addAttribute("position",new THREE.Float32Attribute(6*q,3));d=k.attributes.position.array;
f=0;for(t in e)if(g=e[t],void 0===g.face2||.9999>m[g.face1].normal.dot(m[g.face2].normal))q=r[g.vert1],d[f++]=q.x,d[f++]=q.y,d[f++]=q.z,q=r[g.vert2],d[f++]=q.x,d[f++]=q.y,d[f++]=q.z;THREE.Line.call(this,k,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=new THREE.Geometry;c=0;for(var e=this.object.geometry.faces.length;c<e;c++)b.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=this.geometry.vertices,b=this.object,c=b.geometry.vertices,d=b.geometry.faces,e=b.matrixWorld;b.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(e);for(var f=b=0,g=d.length;b<g;b++,f+=2){var k=d[b];a[f].copy(c[k.a]).add(c[k.b]).add(c[k.c]).divideScalar(3).applyMatrix4(e);a[f+1].copy(k.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[f])}this.geometry.verticesNeedUpdate=!0;return this};
THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(a,b,c,d){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];a=new THREE.SphereGeometry(b,4,2);a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(a,b);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,b,c,THREE.LinePieces);this.root=a;this.matrixWorld=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype);THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var f=this.bones[e];f.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,f.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,f.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:16711680;d=void 0!==d?d:1;c=new THREE.Geometry;a=a.geometry.faces;for(var e=0,f=a.length;e<f;e++)for(var g=0,k=a[e].vertexNormals.length;g<k;g++)c.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,k=0,m=0,r=f.length;m<r;m++)for(var q=f[m],l=0,n=q.vertexNormals.length;l<n;l++){var s=q.vertexNormals[l];d[k].copy(e[q[a[l]]]).applyMatrix4(g);b.copy(s).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
b.add(d[k]);k+=1;d[k].copy(b);k+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:255;d=void 0!==d?d:1;c=new THREE.Geometry;a=a.geometry.faces;for(var e=0,f=a.length;e<f;e++)for(var g=0,k=a[e].vertexTangents.length;g<k;g++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,k=0,m=0,r=f.length;m<r;m++)for(var q=f[m],l=0,n=q.vertexTangents.length;l<n;l++){var s=q.vertexTangents[l];d[k].copy(e[q[a[l]]]).applyMatrix4(g);b.copy(s).transformDirection(g).multiplyScalar(this.size);b.add(d[k]);k+=1;d[k].copy(b);
k+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],k=new THREE.BufferGeometry;if(a.geometry instanceof THREE.Geometry){for(var m=a.geometry.vertices,r=a.geometry.faces,q=0,l=new Uint32Array(6*r.length),n=0,s=r.length;n<s;n++)for(var h=r[n],t=0;3>t;t++){d[0]=h[g[t]];d[1]=h[g[(t+1)%3]];d.sort(f);var v=d.toString();void 0===e[v]&&(l[2*q]=d[0],l[2*q+1]=d[1],e[v]=!0,q++)}d=new Float32Array(6*q);n=0;for(s=q;n<s;n++)for(t=0;2>t;t++)q=
m[l[2*n+t]],g=6*n+3*t,d[g+0]=q.x,d[g+1]=q.y,d[g+2]=q.z;k.addAttribute("position",new THREE.BufferAttribute(d,3))}else if(a.geometry instanceof THREE.BufferGeometry){if(void 0!==a.geometry.attributes.index){for(var m=a.geometry.attributes.position.array,s=a.geometry.attributes.index.array,r=a.geometry.offsets,q=0,l=new Uint32Array(2*s.length),h=0,w=r.length;h<w;++h)for(var t=r[h].start,v=r[h].count,g=r[h].index,n=t,x=t+v;n<x;n+=3)for(t=0;3>t;t++)d[0]=g+s[n+t],d[1]=g+s[n+(t+1)%3],d.sort(f),v=d.toString(),
void 0===e[v]&&(l[2*q]=d[0],l[2*q+1]=d[1],e[v]=!0,q++);d=new Float32Array(6*q);n=0;for(s=q;n<s;n++)for(t=0;2>t;t++)g=6*n+3*t,q=3*l[2*n+t],d[g+0]=m[q],d[g+1]=m[q+1],d[g+2]=m[q+2]}else for(m=a.geometry.attributes.position.array,q=m.length/3,l=q/3,d=new Float32Array(6*q),n=0,s=l;n<s;n++)for(t=0;3>t;t++)g=18*n+6*t,l=9*n+3*t,d[g+0]=m[l],d[g+1]=m[l+1],d[g+2]=m[l+2],q=9*n+(t+1)%3*3,d[g+3]=m[q],d[g+4]=m[q+1],d[g+5]=m[q+2];k.addAttribute("position",new THREE.BufferAttribute(d,3))}THREE.Line.call(this,k,new THREE.LineBasicMaterial({color:c}),
THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)};
THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/,c,d={},e=this.geometry,f=0,g=e.morphTargets.length;f<g;f++){var k=e.morphTargets[f].name.match(b);if(k&&1<k.length){var m=k[1];d[m]||(d[m]={start:Infinity,end:-Infinity});k=d[m];f<k.start&&(k.start=f);f>k.end&&(k.end=f);c||(c=m)}}for(m in d)k=d[m],this.createAnimation(m,k.start,k.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;
f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*g;this.morphTargetInfluences[d.lastFrame]=(1-e)*g}}};
THREE.LensFlarePlugin=function(){function a(a,b){var d=c.createProgram(),e=c.createShader(c.FRAGMENT_SHADER),f=c.createShader(c.VERTEX_SHADER),g="precision "+b+" float;\n";c.shaderSource(e,g+a.fragmentShader);c.shaderSource(f,g+a.vertexShader);c.compileShader(e);c.compileShader(f);c.attachShader(d,e);c.attachShader(d,f);c.linkProgram(d);return d}var b=[],c,d,e,f,g,k,m,r,q,l,n,s,h;this.init=function(b){c=b.context;d=b;e=b.getPrecision();f=new Float32Array(16);g=new Uint16Array(6);b=0;f[b++]=-1;f[b++]=
-1;f[b++]=0;f[b++]=0;f[b++]=1;f[b++]=-1;f[b++]=1;f[b++]=0;f[b++]=1;f[b++]=1;f[b++]=1;f[b++]=1;f[b++]=-1;f[b++]=1;f[b++]=0;f[b++]=1;b=0;g[b++]=0;g[b++]=1;g[b++]=2;g[b++]=0;g[b++]=2;g[b++]=3;k=c.createBuffer();m=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,k);c.bufferData(c.ARRAY_BUFFER,f,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,m);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,c.STATIC_DRAW);r=c.createTexture();q=c.createTexture();c.bindTexture(c.TEXTURE_2D,r);c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,
16,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.bindTexture(c.TEXTURE_2D,q);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);0>=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(l=!1,n=a(THREE.ShaderFlares.lensFlare,e)):(l=!0,n=a(THREE.ShaderFlares.lensFlareVertexTexture,e));s={};h={};s.vertex=c.getAttribLocation(n,"position");s.uv=c.getAttribLocation(n,"uv");h.renderType=c.getUniformLocation(n,"renderType");h.map=c.getUniformLocation(n,"map");h.occlusionMap=c.getUniformLocation(n,"occlusionMap");h.opacity=
c.getUniformLocation(n,"opacity");h.color=c.getUniformLocation(n,"color");h.scale=c.getUniformLocation(n,"scale");h.rotation=c.getUniformLocation(n,"rotation");h.screenPosition=c.getUniformLocation(n,"screenPosition")};this.render=function(a,e,f,g){b.length=0;a.traverseVisible(function(a){a instanceof THREE.LensFlare&&b.push(a)});if(0!==b.length){a=new THREE.Vector3;var A=g/f,y=.5*f,u=.5*g,B=16/g,C=new THREE.Vector2(B*A,B),z=new THREE.Vector3(1,1,0),D=new THREE.Vector2(1,1),E=h,B=s;c.useProgram(n);
c.enableVertexAttribArray(s.vertex);c.enableVertexAttribArray(s.uv);c.uniform1i(E.occlusionMap,0);c.uniform1i(E.map,1);c.bindBuffer(c.ARRAY_BUFFER,k);c.vertexAttribPointer(B.vertex,2,c.FLOAT,!1,16,0);c.vertexAttribPointer(B.uv,2,c.FLOAT,!1,16,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,m);c.disable(c.CULL_FACE);c.depthMask(!1);for(var O=0,Z=b.length;O<Z;O++){B=16/g;C.set(B*A,B);var P=b[O];a.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]);a.applyMatrix4(e.matrixWorldInverse);
a.applyProjection(e.projectionMatrix);z.copy(a);D.x=z.x*y+y;D.y=z.y*u+u;if(l||0<D.x&&D.x<f&&0<D.y&&D.y<g){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,r);c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,D.x-8,D.y-8,16,16,0);c.uniform1i(E.renderType,0);c.uniform2f(E.scale,C.x,C.y);c.uniform3f(E.screenPosition,z.x,z.y,z.z);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,q);c.copyTexImage2D(c.TEXTURE_2D,
0,c.RGBA,D.x-8,D.y-8,16,16,0);c.uniform1i(E.renderType,1);c.disable(c.DEPTH_TEST);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,r);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);P.positionScreen.copy(z);P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares();c.uniform1i(E.renderType,2);c.enable(c.BLEND);for(var H=0,K=P.lensFlares.length;H<K;H++){var L=P.lensFlares[H];.001<L.opacity&&.001<L.scale&&(z.x=L.x,z.y=L.y,z.z=L.z,B=L.size*L.scale/g,C.x=B*A,C.y=B,c.uniform3f(E.screenPosition,
z.x,z.y,z.z),c.uniform2f(E.scale,C.x,C.y),c.uniform1f(E.rotation,L.rotation),c.uniform1f(E.opacity,L.opacity),c.uniform3f(E.color,L.color.r,L.color.g,L.color.b),d.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),d.setTexture(L.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}c.enable(c.CULL_FACE);c.enable(c.DEPTH_TEST);c.depthMask(!0)}}};
THREE.ShadowMapPlugin=function(){function a(b,c,d){if(c.visible){var e=b.__webglObjects[c.id];if(e&&c.castShadow&&(!1===c.frustumCulled||!0===k.intersectsObject(c)))for(var f=0,g=e.length;f<g;f++){var l=e[f];c._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,c.matrixWorld);n.push(l)}f=0;for(g=c.children.length;f<g;f++)a(b,c.children[f],d)}}var b,c,d,e,f,g,k=new THREE.Frustum,m=new THREE.Matrix4,r=new THREE.Vector3,q=new THREE.Vector3,l=new THREE.Vector3,n=[];this.init=function(a){b=a.context;
c=a;a=THREE.ShaderLib.depthRGBA;var h=THREE.UniformsUtils.clone(a.uniforms);d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0});f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,
morphTargets:!0,skinning:!0});d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){c.shadowMapEnabled&&c.shadowMapAutoUpdate&&this.update(a,b)};this.update=function(s,h){var t,v,w,x,A,y,u,B,C=[];x=0;b.clearColor(1,1,1,1);b.disable(b.BLEND);b.enable(b.CULL_FACE);b.frontFace(b.CCW);c.shadowMapCullFace===THREE.CullFaceFront?b.cullFace(b.FRONT):b.cullFace(b.BACK);c.setDepthTest(!0);t=0;for(v=s.__lights.length;t<v;t++)if(w=s.__lights[t],w.castShadow)if(w instanceof
THREE.DirectionalLight&&w.shadowCascade)for(A=0;A<w.shadowCascadeCount;A++){var z;if(w.shadowCascadeArray[A])z=w.shadowCascadeArray[A];else{u=w;var D=A;z=new THREE.DirectionalLight;z.isVirtual=!0;z.onlyShadow=!0;z.castShadow=!0;z.shadowCameraNear=u.shadowCameraNear;z.shadowCameraFar=u.shadowCameraFar;z.shadowCameraLeft=u.shadowCameraLeft;z.shadowCameraRight=u.shadowCameraRight;z.shadowCameraBottom=u.shadowCameraBottom;z.shadowCameraTop=u.shadowCameraTop;z.shadowCameraVisible=u.shadowCameraVisible;
z.shadowDarkness=u.shadowDarkness;z.shadowBias=u.shadowCascadeBias[D];z.shadowMapWidth=u.shadowCascadeWidth[D];z.shadowMapHeight=u.shadowCascadeHeight[D];z.pointsWorld=[];z.pointsFrustum=[];B=z.pointsWorld;y=z.pointsFrustum;for(var E=0;8>E;E++)B[E]=new THREE.Vector3,y[E]=new THREE.Vector3;B=u.shadowCascadeNearZ[D];u=u.shadowCascadeFarZ[D];y[0].set(-1,-1,B);y[1].set(1,-1,B);y[2].set(-1,1,B);y[3].set(1,1,B);y[4].set(-1,-1,u);y[5].set(1,-1,u);y[6].set(-1,1,u);y[7].set(1,1,u);z.originalCamera=h;y=new THREE.Gyroscope;
y.position.copy(w.shadowCascadeOffset);y.add(z);y.add(z.target);h.add(y);w.shadowCascadeArray[A]=z;console.log("Created virtualLight",z)}D=w;B=A;u=D.shadowCascadeArray[B];u.position.copy(D.position);u.target.position.copy(D.target.position);u.lookAt(u.target);u.shadowCameraVisible=D.shadowCameraVisible;u.shadowDarkness=D.shadowDarkness;u.shadowBias=D.shadowCascadeBias[B];y=D.shadowCascadeNearZ[B];D=D.shadowCascadeFarZ[B];u=u.pointsFrustum;u[0].z=y;u[1].z=y;u[2].z=y;u[3].z=y;u[4].z=D;u[5].z=D;u[6].z=
D;u[7].z=D;C[x]=z;x++}else C[x]=w,x++;t=0;for(v=C.length;t<v;t++){w=C[t];w.shadowMap||(A=THREE.LinearFilter,c.shadowMapType===THREE.PCFSoftShadowMap&&(A=THREE.NearestFilter),w.shadowMap=new THREE.WebGLRenderTarget(w.shadowMapWidth,w.shadowMapHeight,{minFilter:A,magFilter:A,format:THREE.RGBAFormat}),w.shadowMapSize=new THREE.Vector2(w.shadowMapWidth,w.shadowMapHeight),w.shadowMatrix=new THREE.Matrix4);if(!w.shadowCamera){if(w instanceof THREE.SpotLight)w.shadowCamera=new THREE.PerspectiveCamera(w.shadowCameraFov,
w.shadowMapWidth/w.shadowMapHeight,w.shadowCameraNear,w.shadowCameraFar);else if(w instanceof THREE.DirectionalLight)w.shadowCamera=new THREE.OrthographicCamera(w.shadowCameraLeft,w.shadowCameraRight,w.shadowCameraTop,w.shadowCameraBottom,w.shadowCameraNear,w.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}s.add(w.shadowCamera);!0===s.autoUpdate&&s.updateMatrixWorld()}w.shadowCameraVisible&&!w.cameraHelper&&(w.cameraHelper=new THREE.CameraHelper(w.shadowCamera),w.shadowCamera.add(w.cameraHelper));
if(w.isVirtual&&z.originalCamera==h){A=h;x=w.shadowCamera;y=w.pointsFrustum;u=w.pointsWorld;r.set(Infinity,Infinity,Infinity);q.set(-Infinity,-Infinity,-Infinity);for(D=0;8>D;D++)B=u[D],B.copy(y[D]),THREE.ShadowMapPlugin.__projector.unprojectVector(B,A),B.applyMatrix4(x.matrixWorldInverse),B.x<r.x&&(r.x=B.x),B.x>q.x&&(q.x=B.x),B.y<r.y&&(r.y=B.y),B.y>q.y&&(q.y=B.y),B.z<r.z&&(r.z=B.z),B.z>q.z&&(q.z=B.z);x.left=r.x;x.right=q.x;x.top=q.y;x.bottom=r.y;x.updateProjectionMatrix()}x=w.shadowMap;y=w.shadowMatrix;
A=w.shadowCamera;A.position.setFromMatrixPosition(w.matrixWorld);l.setFromMatrixPosition(w.target.matrixWorld);A.lookAt(l);A.updateMatrixWorld();A.matrixWorldInverse.getInverse(A.matrixWorld);w.cameraHelper&&(w.cameraHelper.visible=w.shadowCameraVisible);w.shadowCameraVisible&&w.cameraHelper.update();y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);y.multiply(A.projectionMatrix);y.multiply(A.matrixWorldInverse);m.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse);k.setFromMatrix(m);c.setRenderTarget(x);
c.clear();n.length=0;a(s,s,A);w=0;for(x=n.length;w<x;w++)u=n[w],y=u.object,u=u.buffer,D=y.material instanceof THREE.MeshFaceMaterial?y.material.materials[0]:y.material,B=void 0!==y.geometry.morphTargets&&0<y.geometry.morphTargets.length&&D.morphTargets,E=y instanceof THREE.SkinnedMesh&&D.skinning,B=y.customDepthMaterial?y.customDepthMaterial:E?B?g:f:B?e:d,c.setMaterialFaces(D),u instanceof THREE.BufferGeometry?c.renderBufferDirect(A,s.__lights,null,B,u,y):c.renderBuffer(A,s.__lights,null,B,u,y);D=
s.__webglObjectsImmediate;w=0;for(x=D.length;w<x;w++)u=D[w],y=u.object,y.visible&&y.castShadow&&(y._modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,y.matrixWorld),c.renderImmediateObject(A,s.__lights,null,d,y))}t=c.getClearColor();v=c.getClearAlpha();b.clearColor(t.r,t.g,t.b,v);b.enable(b.BLEND);c.shadowMapCullFace===THREE.CullFaceFront&&b.cullFace(b.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;
THREE.SpritePlugin=function(){function a(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var b,c,d,e,f,g,k,m,r,q,l,n,s,h,t,v,w,x,A,y,u=[],B,C,z,D,E;this.init=function(a){x=a.context;A=a;B=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);C=new Uint16Array([0,1,2,0,2,3]);z=x.createBuffer();D=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,z);x.bufferData(x.ARRAY_BUFFER,B,x.STATIC_DRAW);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,D);x.bufferData(x.ELEMENT_ARRAY_BUFFER,C,x.STATIC_DRAW);a=x.createProgram();
var u=x.createShader(x.VERTEX_SHADER),P=x.createShader(x.FRAGMENT_SHADER);x.shaderSource(u,["precision "+A.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
x.shaderSource(P,["precision "+A.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
x.compileShader(u);x.compileShader(P);x.attachShader(a,u);x.attachShader(a,P);x.linkProgram(a);E=a;v=x.getAttribLocation(E,"position");w=x.getAttribLocation(E,"uv");b=x.getUniformLocation(E,"uvOffset");c=x.getUniformLocation(E,"uvScale");d=x.getUniformLocation(E,"rotation");e=x.getUniformLocation(E,"scale");f=x.getUniformLocation(E,"color");g=x.getUniformLocation(E,"map");k=x.getUniformLocation(E,"opacity");m=x.getUniformLocation(E,"modelViewMatrix");r=x.getUniformLocation(E,"projectionMatrix");q=
x.getUniformLocation(E,"fogType");l=x.getUniformLocation(E,"fogDensity");n=x.getUniformLocation(E,"fogNear");s=x.getUniformLocation(E,"fogFar");h=x.getUniformLocation(E,"fogColor");t=x.getUniformLocation(E,"alphaTest");a=document.createElement("canvas");a.width=8;a.height=8;u=a.getContext("2d");u.fillStyle="white";u.fillRect(0,0,8,8);y=new THREE.Texture(a);y.needsUpdate=!0};this.render=function(C,B,P,H){u.length=0;C.traverseVisible(function(a){a instanceof THREE.Sprite&&u.push(a)});if(0!==u.length){x.useProgram(E);
x.enableVertexAttribArray(v);x.enableVertexAttribArray(w);x.disable(x.CULL_FACE);x.enable(x.BLEND);x.bindBuffer(x.ARRAY_BUFFER,z);x.vertexAttribPointer(v,2,x.FLOAT,!1,16,0);x.vertexAttribPointer(w,2,x.FLOAT,!1,16,8);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,D);x.uniformMatrix4fv(r,!1,B.projectionMatrix.elements);x.activeTexture(x.TEXTURE0);x.uniform1i(g,0);H=P=0;var K=C.fog;K?(x.uniform3f(h,K.color.r,K.color.g,K.color.b),K instanceof THREE.Fog?(x.uniform1f(n,K.near),x.uniform1f(s,K.far),x.uniform1i(q,1),
H=P=1):K instanceof THREE.FogExp2&&(x.uniform1f(l,K.density),x.uniform1i(q,2),H=P=2)):(x.uniform1i(q,0),H=P=0);for(var K=0,L=u.length;K<L;K++){var G=u[K],I=G.material;G._modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,G.matrixWorld);G.z=-G._modelViewMatrix.elements[14]}u.sort(a);B=[];K=0;for(L=u.length;K<L;K++)G=u[K],I=G.material,x.uniform1f(t,I.alphaTest),x.uniformMatrix4fv(m,!1,G._modelViewMatrix.elements),B[0]=G.scale.x,B[1]=G.scale.y,G=0,C.fog&&I.fog&&(G=H),P!==G&&(x.uniform1i(q,G),P=G),
null!==I.map?(x.uniform2f(b,I.map.offset.x,I.map.offset.y),x.uniform2f(c,I.map.repeat.x,I.map.repeat.y)):(x.uniform2f(b,0,0),x.uniform2f(c,1,1)),x.uniform1f(k,I.opacity),x.uniform3f(f,I.color.r,I.color.g,I.color.b),x.uniform1f(d,I.rotation),x.uniform2fv(e,B),A.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),A.setDepthTest(I.depthTest),A.setDepthWrite(I.depthWrite),I.map&&I.map.image&&I.map.image.width?A.setTexture(I.map,0):A.setTexture(y,0),x.drawElements(x.TRIANGLES,6,x.UNSIGNED_SHORT,
0);x.enable(x.CULL_FACE)}}};
THREE.DepthPassPlugin=function(){function a(b,c,d){if(c.visible){var e=b.__webglObjects[c.id];if(e&&(!1===c.frustumCulled||!0===k.intersectsObject(c)))for(var f=0,g=e.length;f<g;f++){var m=e[f];c._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,c.matrixWorld);r.push(m)}f=0;for(g=c.children.length;f<g;f++)a(b,c.children[f],d)}}this.enabled=!1;this.renderTarget=null;var b,c,d,e,f,g,k=new THREE.Frustum,m=new THREE.Matrix4,r=[];this.init=function(a){b=a.context;c=a;a=THREE.ShaderLib.depthRGBA;var k=
THREE.UniformsUtils.clone(a.uniforms);d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k});e=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k,morphTargets:!0});f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k,morphTargets:!0,skinning:!0});d._shadowPass=
!0;e._shadowPass=!0;f._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(q,l){var n,s,h,t,v;b.clearColor(1,1,1,1);b.disable(b.BLEND);c.setDepthTest(!0);!0===q.autoUpdate&&q.updateMatrixWorld();l.matrixWorldInverse.getInverse(l.matrixWorld);m.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse);k.setFromMatrix(m);c.setRenderTarget(this.renderTarget);c.clear();r.length=0;a(q,q,l);var w;n=0;for(s=r.length;n<s;n++)h=r[n],v=h.object,h=h.buffer,
v instanceof THREE.PointCloud&&!v.customDepthMaterial||((w=v.material instanceof THREE.MeshFaceMaterial?v.material.materials[0]:v.material)&&c.setMaterialFaces(v.material),t=void 0!==v.geometry.morphTargets&&0<v.geometry.morphTargets.length&&w.morphTargets,w=v instanceof THREE.SkinnedMesh&&w.skinning,t=v.customDepthMaterial?v.customDepthMaterial:w?t?g:f:t?e:d,h instanceof THREE.BufferGeometry?c.renderBufferDirect(l,q.__lights,null,t,h,v):c.renderBuffer(l,q.__lights,null,t,h,v));t=q.__webglObjectsImmediate;
n=0;for(s=t.length;n<s;n++)h=t[n],v=h.object,v.visible&&(v._modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,v.matrixWorld),c.renderImmediateObject(l,q.__lights,null,d,v));n=c.getClearColor();s=c.getClearAlpha();b.clearColor(n.r,n.g,n.b,s);b.enable(b.BLEND)}};
THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};THREE.OrbitControls=function(a,b){function c(a){if(!1!==f.enabled){a.preventDefault();var b=f.domElement===document?f.domElement.body:f.domElement;if(u===y.ROTATE){if(!0===f.noRotate)return;k.set(a.clientX,a.clientY);m.subVectors(k,g);f.rotateLeft(2*Math.PI*m.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*m.y/b.clientHeight*f.rotateSpeed);g.copy(k)}else if(u===y.DOLLY){if(!0===f.noZoom)return;s.set(a.clientX,a.clientY);h.subVectors(s,n);0<h.y?f.dollyIn():f.dollyOut();n.copy(s)}else if(u===y.PAN){if(!0===
f.noPan)return;q.set(a.clientX,a.clientY);l.subVectors(q,r);f.pan(l);r.copy(q)}f.update()}}function d(){!1!==f.enabled&&(f.domElement.removeEventListener("mousemove",c,!1),f.domElement.removeEventListener("mouseup",d,!1),u=y.NONE)}function e(a){a.preventDefault&&a.preventDefault();a.returnValue=!1;if(!1!==f.enabled&&!0!==f.noZoom){var b=0;a.wheelDelta?b=a.wheelDelta:a.detail&&(b=-a.detail);0<b?f.dollyOut():f.dollyIn();f.update()}}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;
this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=1;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var f=this,g=new THREE.Vector2,k=new THREE.Vector2,m=new THREE.Vector2,r=new THREE.Vector2,q=new THREE.Vector2,l=new THREE.Vector2,n=new THREE.Vector2,s=new THREE.Vector2,
h=new THREE.Vector2,t=0,v=0,w=1,x=new THREE.Vector3,A=new THREE.Vector3,y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},u=y.NONE,B={type:"change"};this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);v-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);t-=a};this.panLeft=function(a){var b=new THREE.Vector3,c=this.object.matrix.elements;b.set(c[0],c[1],c[2]);b.multiplyScalar(-a);x.add(b)};this.panUp=function(a){var b=
new THREE.Vector3,c=this.object.matrix.elements;b.set(c[4],c[5],c[6]);b.multiplyScalar(a);x.add(b)};this.pan=function(a){var b=f.domElement===document?f.domElement.body:f.domElement;if(void 0!==f.object.fov){var c=f.object.position.clone().sub(f.target).length(),c=c*Math.tan(f.object.fov/2*Math.PI/180);f.panLeft(2*a.x*c/b.clientHeight);f.panUp(2*a.y*c/b.clientHeight)}else void 0!==f.object.top?(f.panLeft(a.x*(f.object.right-f.object.left)/b.clientWidth),f.panUp(a.y*(f.object.top-f.object.bottom)/
b.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,f.zoomSpeed));w/=a};this.dollyOut=function(a){void 0===a&&(a=Math.pow(.95,f.zoomSpeed));w*=a};this.update=function(){var a=this.object.position,b=a.clone().sub(this.target),c=Math.atan2(b.x,b.z),d=Math.atan2(Math.sqrt(b.x*b.x+b.z*b.z),b.y);this.autoRotate&&this.rotateLeft(2*Math.PI/60/60*f.autoRotateSpeed);var c=c+v,d=d+t,d=Math.max(this.minPolarAngle,
Math.min(this.maxPolarAngle,d)),d=Math.max(1E-6,Math.min(Math.PI-1E-6,d)),e=b.length()*w,e=Math.max(this.minDistance,Math.min(this.maxDistance,e));this.target.add(x);b.x=e*Math.sin(d)*Math.sin(c);b.y=e*Math.cos(d);b.z=e*Math.sin(d)*Math.cos(c);a.copy(this.target).add(b);this.object.lookAt(this.target);t=v=0;w=1;x.set(0,0,0);0<A.distanceTo(this.object.position)&&(this.dispatchEvent(B),A.copy(this.object.position))};this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1);
this.domElement.addEventListener("mousedown",function(a){if(!1!==f.enabled){a.preventDefault();if(0===a.button){if(!0===f.noRotate)return;u=y.ROTATE;g.set(a.clientX,a.clientY)}else if(1===a.button){if(!0===f.noZoom)return;u=y.DOLLY;n.set(a.clientX,a.clientY)}else if(2===a.button){if(!0===f.noPan)return;u=y.PAN;r.set(a.clientX,a.clientY)}f.domElement.addEventListener("mousemove",c,!1);f.domElement.addEventListener("mouseup",d,!1)}},!1);this.domElement.addEventListener("mousewheel",e,!1);this.domElement.addEventListener("DOMMouseScroll",
e,!1);this.domElement.addEventListener("keydown",function(a){if(!1!==f.enabled&&!0!==f.noKeys&&!0!==f.noPan){var b=!1;switch(a.keyCode){case f.keys.UP:f.pan(new THREE.Vector2(0,f.keyPanSpeed));b=!0;break;case f.keys.BOTTOM:f.pan(new THREE.Vector2(0,-f.keyPanSpeed));b=!0;break;case f.keys.LEFT:f.pan(new THREE.Vector2(f.keyPanSpeed,0));b=!0;break;case f.keys.RIGHT:f.pan(new THREE.Vector2(-f.keyPanSpeed,0)),b=!0}b&&f.update()}},!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==f.enabled)switch(a.touches.length){case 1:if(!0===
f.noRotate)break;u=y.TOUCH_ROTATE;g.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===f.noZoom)break;u=y.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;b=Math.sqrt(b*b+a*a);n.set(0,b);break;case 3:if(!0===f.noPan)break;u=y.TOUCH_PAN;r.set(a.touches[0].pageX,a.touches[0].pageY);break;default:u=y.NONE}},!1);this.domElement.addEventListener("touchend",function(){!1!==f.enabled&&(u=y.NONE)},!1);this.domElement.addEventListener("touchmove",
function(a){if(!1!==f.enabled){a.preventDefault();a.stopPropagation();var b=f.domElement===document?f.domElement.body:f.domElement;switch(a.touches.length){case 1:if(!0===f.noRotate)break;if(u!==y.TOUCH_ROTATE)break;k.set(a.touches[0].pageX,a.touches[0].pageY);m.subVectors(k,g);f.rotateLeft(2*Math.PI*m.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*m.y/b.clientHeight*f.rotateSpeed);g.copy(k);break;case 2:if(!0===f.noZoom)break;if(u!==y.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;
a=a.touches[0].pageY-a.touches[1].pageY;a=Math.sqrt(b*b+a*a);s.set(0,a);h.subVectors(s,n);0<h.y?f.dollyOut():f.dollyIn();n.copy(s);break;case 3:if(!0===f.noPan)break;if(u!==y.TOUCH_PAN)break;q.set(a.touches[0].pageX,a.touches[0].pageY);l.subVectors(q,r);f.pan(l);r.copy(q);break;default:u=y.NONE}}},!1)};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a=document.createElement("div");a.id="webgl-error-message";a.style.fontFamily="monospace";a.style.fontSize="13px";a.style.fontWeight="normal";
a.style.textAlign="center";a.style.background="#fff";a.style.color="#000";a.style.padding="1.5em";a.style.width="400px";a.style.margin="5em auto 0";this.webgl||(a.innerHTML=window.WebGLRenderingContext?'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.':'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.');
return a},addGetWebGLMessage:function(a){var b,c;a=a||{};b=void 0!==a.parent?a.parent:document.body;a=void 0!==a.id?a.id:"oldie";c=Detector.getWebGLErrorMessage();c.id=a;b.appendChild(c)}};window.ThreeBSP=function(){var a;a=function(b){var c,d,e,f,g,k,m,r=[];if(b instanceof THREE.Geometry)this.matrix=new THREE.Matrix4;else if(b instanceof THREE.Mesh)b.updateMatrix(),this.matrix=b.matrix.clone(),b=b.geometry;else{if(b instanceof a.Node)return this.tree=b,this.matrix=new THREE.Matrix4,this;throw"ThreeBSP: Given geometry is unsupported";}c=0;for(d=b.faces.length;c<d;c++){e=b.faces[c];g=b.faceVertexUvs[0][c];m=new a.Polygon;if(e instanceof THREE.Face3)f=b.vertices[e.a],k=g?new THREE.Vector2(g[0].x,
g[0].y):null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[0],k),f.applyMatrix4(this.matrix),m.vertices.push(f),f=b.vertices[e.b],k=g?new THREE.Vector2(g[1].x,g[1].y):null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[2],k),f.applyMatrix4(this.matrix),m.vertices.push(f),f=b.vertices[e.c],k=g?new THREE.Vector2(g[2].x,g[2].y):null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[2],k),f.applyMatrix4(this.matrix),m.vertices.push(f);else if(typeof THREE.Face4)f=b.vertices[e.a],k=g?new THREE.Vector2(g[0].x,g[0].y):
null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[0],k),f.applyMatrix4(this.matrix),m.vertices.push(f),f=b.vertices[e.b],k=g?new THREE.Vector2(g[1].x,g[1].y):null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[1],k),f.applyMatrix4(this.matrix),m.vertices.push(f),f=b.vertices[e.c],k=g?new THREE.Vector2(g[2].x,g[2].y):null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[2],k),f.applyMatrix4(this.matrix),m.vertices.push(f),f=b.vertices[e.d],k=g?new THREE.Vector2(g[3].x,g[3].y):null,f=new a.Vertex(f.x,f.y,f.z,e.vertexNormals[3],
k),f.applyMatrix4(this.matrix),m.vertices.push(f);else throw"Invalid face type at index "+c;m.calculateProperties();r.push(m)}this.tree=new a.Node(r)};a.prototype.subtract=function(b){var c=this.tree.clone();b=b.tree.clone();c.invert();c.clipTo(b);b.clipTo(c);b.invert();b.clipTo(c);b.invert();c.build(b.allPolygons());c.invert();c=new a(c);c.matrix=this.matrix;return c};a.prototype.union=function(b){var c=this.tree.clone();b=b.tree.clone();c.clipTo(b);b.clipTo(c);b.invert();b.clipTo(c);b.invert();
c.build(b.allPolygons());c=new a(c);c.matrix=this.matrix;return c};a.prototype.intersect=function(b){var c=this.tree.clone();b=b.tree.clone();c.invert();b.clipTo(c);b.invert();c.clipTo(b);b.clipTo(c);c.build(b.allPolygons());c.invert();c=new a(c);c.matrix=this.matrix;return c};a.prototype.toGeometry=function(){var a,c,d=(new THREE.Matrix4).getInverse(this.matrix),e=new THREE.Geometry,f=this.tree.allPolygons(),g=f.length,k,m,r={},q,l,n,s;for(a=0;a<g;a++)for(k=f[a],m=k.vertices.length,c=2;c<m;c++)s=
[],n=k.vertices[0],s.push(new THREE.Vector2(n.uv.x,n.uv.y)),n=new THREE.Vector3(n.x,n.y,n.z),n.applyMatrix4(d),"undefined"!==typeof r[n.x+","+n.y+","+n.z]?q=r[n.x+","+n.y+","+n.z]:(e.vertices.push(n),q=r[n.x+","+n.y+","+n.z]=e.vertices.length-1),n=k.vertices[c-1],s.push(new THREE.Vector2(n.uv.x,n.uv.y)),n=new THREE.Vector3(n.x,n.y,n.z),n.applyMatrix4(d),"undefined"!==typeof r[n.x+","+n.y+","+n.z]?l=r[n.x+","+n.y+","+n.z]:(e.vertices.push(n),l=r[n.x+","+n.y+","+n.z]=e.vertices.length-1),n=k.vertices[c],
s.push(new THREE.Vector2(n.uv.x,n.uv.y)),n=new THREE.Vector3(n.x,n.y,n.z),n.applyMatrix4(d),"undefined"!==typeof r[n.x+","+n.y+","+n.z]?n=r[n.x+","+n.y+","+n.z]:(e.vertices.push(n),n=r[n.x+","+n.y+","+n.z]=e.vertices.length-1),q=new THREE.Face3(q,l,n,new THREE.Vector3(k.normal.x,k.normal.y,k.normal.z)),e.faces.push(q),e.faceVertexUvs[0].push(s);return e};a.prototype.toMesh=function(a){var c=this.toGeometry();a=new THREE.Mesh(c,a);a.position.setFromMatrixPosition(this.matrix);a.rotation.setFromRotationMatrix(this.matrix);
return a};a.Polygon=function(a,c,d){a instanceof Array||(a=[]);this.vertices=a;0<a.length?this.calculateProperties():this.normal=this.w=void 0};a.Polygon.prototype.calculateProperties=function(){var a=this.vertices[0],c=this.vertices[2];this.normal=this.vertices[1].clone().subtract(a).cross(c.clone().subtract(a)).normalize();this.w=this.normal.clone().dot(a);return this};a.Polygon.prototype.clone=function(){var b,c,d=new a.Polygon;b=0;for(c=this.vertices.length;b<c;b++)d.vertices.push(this.vertices[b].clone());
d.calculateProperties();return d};a.Polygon.prototype.flip=function(){var a,c=[];this.normal.multiplyScalar(-1);this.w*=-1;for(a=this.vertices.length-1;0<=a;a--)c.push(this.vertices[a]);this.vertices=c;return this};a.Polygon.prototype.classifyVertex=function(a){a=this.normal.dot(a)-this.w;return-1E-5>a?2:1E-5<a?1:0};a.Polygon.prototype.classifySide=function(a){var c,d,e=0,f=0,g=a.vertices.length;for(c=0;c<g;c++)d=a.vertices[c],d=this.classifyVertex(d),1===d?e++:2===d&&f++;return 0<e&&0===f?1:0===
e&&0<f?2:0===e&&0===f?0:3};a.Polygon.prototype.splitPolygon=function(b,c,d,e,f){var g=this.classifySide(b);if(0===g)(0<this.normal.dot(b.normal)?c:d).push(b);else if(1===g)e.push(b);else if(2===g)f.push(b);else{var k,m,r,q,g=[],l=[];d=0;for(c=b.vertices.length;d<c;d++)k=(d+1)%c,q=b.vertices[d],k=b.vertices[k],m=this.classifyVertex(q),r=this.classifyVertex(k),2!=m&&g.push(q),1!=m&&l.push(q),3===(m|r)&&(m=(this.w-this.normal.dot(q))/this.normal.dot(k.clone().subtract(q)),q=q.interpolate(k,m),g.push(q),
l.push(q));3<=g.length&&e.push((new a.Polygon(g)).calculateProperties());3<=l.length&&f.push((new a.Polygon(l)).calculateProperties())}};a.Vertex=function(a,c,d,e,f){this.x=a;this.y=c;this.z=d;this.normal=e||new THREE.Vector3;this.uv=f||new THREE.Vector2};a.Vertex.prototype.clone=function(){return new a.Vertex(this.x,this.y,this.z,this.normal.clone(),this.uv.clone())};a.Vertex.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};a.Vertex.prototype.subtract=function(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;return this};a.Vertex.prototype.multiplyScalar=function(a){this.x*=a;this.y*=a;this.z*=a;return this};a.Vertex.prototype.cross=function(a){var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this};a.Vertex.prototype.normalize=function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);this.x/=a;this.y/=a;this.z/=a;return this};a.Vertex.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};a.Vertex.prototype.lerp=
function(a,c){this.add(a.clone().subtract(this).multiplyScalar(c));this.normal.add(a.normal.clone().sub(this.normal).multiplyScalar(c));this.uv.add(a.uv.clone().sub(this.uv).multiplyScalar(c));return this};a.Vertex.prototype.interpolate=function(a,c){return this.clone().lerp(a,c)};a.Vertex.prototype.applyMatrix4=function(a){var c=this.x,d=this.y,e=this.z;a=a.elements;this.x=a[0]*c+a[4]*d+a[8]*e+a[12];this.y=a[1]*c+a[5]*d+a[9]*e+a[13];this.z=a[2]*c+a[6]*d+a[10]*e+a[14];return this};a.Node=function(b){var c,
d,e=[],f=[];this.polygons=[];this.front=this.back=void 0;if(b instanceof Array&&0!==b.length){this.divider=b[0].clone();c=0;for(d=b.length;c<d;c++)this.divider.splitPolygon(b[c],this.polygons,this.polygons,e,f);0<e.length&&(this.front=new a.Node(e));0<f.length&&(this.back=new a.Node(f))}};a.Node.isConvex=function(a){var c,d;for(c=0;c<a.length;c++)for(d=0;d<a.length;d++)if(c!==d&&2!==a[c].classifySide(a[d]))return!1;return!0};a.Node.prototype.build=function(b){var c,d,e=[],f=[];this.divider||(this.divider=
b[0].clone());c=0;for(d=b.length;c<d;c++)this.divider.splitPolygon(b[c],this.polygons,this.polygons,e,f);0<e.length&&(this.front||(this.front=new a.Node),this.front.build(e));0<f.length&&(this.back||(this.back=new a.Node),this.back.build(f))};a.Node.prototype.allPolygons=function(){var a=this.polygons.slice();this.front&&(a=a.concat(this.front.allPolygons()));this.back&&(a=a.concat(this.back.allPolygons()));return a};a.Node.prototype.clone=function(){var b=new a.Node;b.divider=this.divider.clone();
b.polygons=this.polygons.map(function(a){return a.clone()});b.front=this.front&&this.front.clone();b.back=this.back&&this.back.clone();return b};a.Node.prototype.invert=function(){var a,c;a=0;for(c=this.polygons.length;a<c;a++)this.polygons[a].flip();this.divider.flip();this.front&&this.front.invert();this.back&&this.back.invert();a=this.front;this.front=this.back;this.back=a;return this};a.Node.prototype.clipPolygons=function(a){var c,d,e,f;if(!this.divider)return a.slice();e=[];f=[];c=0;for(d=a.length;c<
d;c++)this.divider.splitPolygon(a[c],e,f,e,f);this.front&&(e=this.front.clipPolygons(e));f=this.back?this.back.clipPolygons(f):[];return e.concat(f)};a.Node.prototype.clipTo=function(a){this.polygons=a.clipPolygons(this.polygons);this.front&&this.front.clipTo(a);this.back&&this.back.clipTo(a)};return a}();!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var f=b||window.event,g=k.call(arguments,1),m=0,h=0,t=0,v=0,w=0,x=0;if(b=a.event.fix(f),b.type="mousewheel","detail"in f&&(t=-1*f.detail),"wheelDelta"in f&&(t=f.wheelDelta),"wheelDeltaY"in f&&(t=f.wheelDeltaY),"wheelDeltaX"in f&&(h=-1*f.wheelDeltaX),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(h=-1*t,t=0),m=0===t?h:t,"deltaY"in f&&(t=-1*f.deltaY,m=t),"deltaX"in
f&&(h=f.deltaX,0===t&&(m=-1*h)),0!==t||0!==h){if(1===f.deltaMode)var A=a.data(this,"mousewheel-line-height"),m=m*A,t=t*A,h=h*A;else 2===f.deltaMode&&(A=a.data(this,"mousewheel-page-height"),m*=A,t*=A,h*=A);if(v=Math.max(Math.abs(t),Math.abs(h)),(!e||e>v)&&(e=v,r.settings.adjustOldDeltas&&"mousewheel"===f.type&&0===v%120&&(e/=40)),r.settings.adjustOldDeltas&&"mousewheel"===f.type&&0===v%120&&(m/=40,h/=40,t/=40),m=Math[1<=m?"floor":"ceil"](m/e),h=Math[1<=h?"floor":"ceil"](h/e),t=Math[1<=t?"floor":"ceil"](t/
e),r.settings.normalizeOffset&&this.getBoundingClientRect)f=this.getBoundingClientRect(),w=b.clientX-f.left,x=b.clientY-f.top;return b.deltaX=h,b.deltaY=t,b.deltaFactor=e,b.offsetX=w,b.offsetY=x,b.deltaMode=0,g.unshift(b,m,h,t),d&&clearTimeout(d),d=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,g)}}function c(){e=null}var d,e,f=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],g="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],
k=Array.prototype.slice;if(a.event.fixHooks)for(var m=f.length;m;)a.event.fixHooks[f[--m]]=a.event.mouseHooks;var r=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=g.length;c;)this.addEventListener(g[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",r.getLineHeight(this));a.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=g.length;c;)this.removeEventListener(g[--c],
b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height");a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){b=a(b);var c=b["offsetParent"in a.fn?"offsetParent":"parent"]();return c.length||(c=a("body")),parseInt(c.css("fontSize"),10)||parseInt(b.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},
unmousewheel:function(a){return this.unbind("mousewheel",a)}})});(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=d.push,g=d.slice,k=d.concat,m=e.toString,r=e.hasOwnProperty,q=d.forEach,l=d.map,n=d.reduce,s=d.reduceRight,h=d.filter,t=d.every,v=d.some,w=d.indexOf,x=d.lastIndexOf,e=Array.isArray,A=Object.keys,y=Function.prototype.bind,u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports._=u):a._=u;
u.VERSION="1.6.0";var B=u.each=u.forEach=function(a,b,d){if(null==a)return a;if(q&&a.forEach===q)a.forEach(b,d);else if(a.length===+a.length)for(var e=0,f=a.length;f>e;e++){if(b.call(d,a[e],e,a)===c)return}else for(var g=u.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};u.map=u.collect=function(a,b,c){var d=[];return null==a?d:l&&a.map===l?a.map(b,c):(B(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};u.reduce=u.foldl=u.inject=function(a,b,c,d){var e=2<arguments.length;
if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=u.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(B(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c};u.reduceRight=u.foldr=function(a,b,c,d){var e=2<arguments.length;if(null==a&&(a=[]),s&&a.reduceRight===s)return d&&(b=u.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f)var g=u.keys(a),f=g.length;if(B(a,function(h,k,l){k=g?g[--f]:--f;e?c=b.call(d,c,
a[k],k,l):(c=a[k],e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c};u.find=u.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d};u.filter=u.select=function(a,b,c){var d=[];return null==a?d:h&&a.filter===h?a.filter(b,c):(B(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)};u.reject=function(a,b,c){return u.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)};u.every=u.all=function(a,b,d){b||(b=u.identity);var e=!0;
return null==a?e:t&&a.every===t?a.every(b,d):(B(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var C=u.some=u.any=function(a,b,d){b||(b=u.identity);var e=!1;return null==a?e:v&&a.some===v?a.some(b,d):(B(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};u.contains=u.include=function(a,b){return null==a?!1:w&&a.indexOf===w?-1!=a.indexOf(b):C(a,function(a){return a===b})};u.invoke=function(a,b){var c=g.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){return(d?
b:a[b]).apply(a,c)})};u.pluck=function(a,b){return u.map(a,u.property(b))};u.where=function(a,b){return u.filter(a,u.matches(b))};u.findWhere=function(a,b){return u.find(a,u.matches(b))};u.max=function(a,b,c){if(!b&&u.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return B(a,function(a,f,g){f=b?b.call(c,a,f,g):a;f>e&&(d=a,e=f)}),d};u.min=function(a,b,c){if(!b&&u.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);var d=1/0,e=1/0;return B(a,
function(a,f,g){f=b?b.call(c,a,f,g):a;e>f&&(d=a,e=f)}),d};u.shuffle=function(a){var b,c=0,d=[];return B(a,function(a){b=u.random(c++);d[c-1]=d[b];d[b]=a}),d};u.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))};var z=function(a){return null==a?u.identity:u.isFunction(a)?a:u.property(a)};u.sortBy=function(a,b,c){return b=z(b),u.pluck(u.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,
b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=z(c),B(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};u.groupBy=D(function(a,b,c){u.has(a,b)?a[b].push(c):a[b]=[c]});u.indexBy=D(function(a,b,c){a[b]=c});u.countBy=D(function(a,b){u.has(a,b)?a[b]++:a[b]=1});u.sortedIndex=function(a,b,c,d){c=z(c);b=c.call(d,b);for(var e=0,f=a.length;f>e;){var g=e+f>>>1;
c.call(d,a[g])<b?e=g+1:f=g}return e};u.toArray=function(a){return a?u.isArray(a)?g.call(a):a.length===+a.length?u.map(a,u.identity):u.values(a):[]};u.size=function(a){return null==a?0:a.length===+a.length?a.length:u.keys(a).length};u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:g.call(a,0,b)};u.initial=function(a,b,c){return g.call(a,0,a.length-(null==b||c?1:b))};u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,
0))};u.rest=u.tail=u.drop=function(a,b,c){return g.call(a,null==b||c?1:b)};u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c){return b&&u.every(a,u.isArray)?k.apply(c,a):(B(a,function(a){u.isArray(a)||u.isArguments(a)?b?f.apply(c,a):E(a,b,c):c.push(a)}),c)};u.flatten=function(a,b){return E(a,b,[])};u.without=function(a){return u.difference(a,g.call(arguments,1))};u.partition=function(a,b){var c=[],d=[];return B(a,function(a){(b(a)?c:d).push(a)}),[c,d]};u.uniq=u.unique=function(a,
b,c,d){u.isFunction(b)&&(d=c,c=b,b=!1);c=c?u.map(a,c,d):a;var e=[],f=[];return B(c,function(c,d){(b?d&&f[f.length-1]===c:u.contains(f,c))||(f.push(c),e.push(a[d]))}),e};u.union=function(){return u.uniq(u.flatten(arguments,!0))};u.intersection=function(a){var b=g.call(arguments,1);return u.filter(u.uniq(a),function(a){return u.every(b,function(b){return u.contains(b,a)})})};u.difference=function(a){var b=k.apply(d,g.call(arguments,1));return u.filter(a,function(a){return!u.contains(b,a)})};u.zip=function(){for(var a=
u.max(u.pluck(arguments,"length").concat(0)),b=Array(a),c=0;a>c;c++)b[c]=u.pluck(arguments,""+c);return b};u.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};u.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=u.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(w&&a.indexOf===w)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1};u.lastIndexOf=function(a,b,
c){if(null==a)return-1;var d=null!=c;if(x&&a.lastIndexOf===x)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=d?c:a.length;c--;)if(a[c]===b)return c;return-1};u.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);d>e;)f[e++]=a,a+=c;return f};var O=function(){};u.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,g.call(arguments,1));if(!u.isFunction(a))throw new TypeError;return c=g.call(arguments,2),d=function(){if(!(this instanceof
d))return a.apply(b,c.concat(g.call(arguments)));O.prototype=a.prototype;var e=new O;O.prototype=null;var f=a.apply(e,c.concat(g.call(arguments)));return Object(f)===f?f:e}};u.partial=function(a){var b=g.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===u&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}};u.bindAll=function(a){var b=g.call(arguments,1);if(0===b.length)throw Error("bindAll must be passed function names");
return B(b,function(b){a[b]=u.bind(a[b],a)}),a};u.memoize=function(a,b){var c={};return b||(b=u.identity),function(){var d=b.apply(this,arguments);return u.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};u.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};u.defer=function(a){return u.delay.apply(u,[a,1].concat(g.call(arguments,1)))};u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var k=function(){h=!1===c.leading?0:u.now();g=null;f=a.apply(d,
e);d=e=null};return function(){var l=u.now();h||!1!==c.leading||(h=l);var m=b-(l-h);return d=this,e=arguments,0>=m?(clearTimeout(g),g=null,h=l,f=a.apply(d,e),d=e=null):g||!1===c.trailing||(g=setTimeout(k,m)),f}};u.debounce=function(a,b,c){var d,e,f,g,h,k=function(){var l=u.now()-g;b>l?d=setTimeout(k,b-l):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this;e=arguments;g=u.now();var l=c&&!d;return d||(d=setTimeout(k,b)),l&&(h=a.apply(f,e),f=e=null),h}};u.once=function(a){var b,c=!1;return function(){return c?
b:(c=!0,b=a.apply(this,arguments),a=null,b)}};u.wrap=function(a,b){return u.partial(b,a)};u.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};u.after=function(a,b){return function(){return 1>--a?b.apply(this,arguments):void 0}};u.keys=function(a){if(!u.isObject(a))return[];if(A)return A(a);var b=[],c;for(c in a)u.has(a,c)&&b.push(c);return b};u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=
a[b[e]];return d};u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d};u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b};u.functions=u.methods=function(a){var b=[],c;for(c in a)u.isFunction(a[c])&&b.push(c);return b.sort()};u.extend=function(a){return B(g.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a};u.pick=function(a){var b={},c=k.apply(d,g.call(arguments,1));return B(c,function(c){c in
a&&(b[c]=a[c])}),b};u.omit=function(a){var b={},c=k.apply(d,g.call(arguments,1)),e;for(e in a)u.contains(c,e)||(b[e]=a[e]);return b};u.defaults=function(a){return B(g.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a};u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a};u.tap=function(a,b){return b(a),a};var Z=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped);b instanceof u&&
(b=b._wrapped);var e=m.call(a);if(e!=m.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var f=a.constructor,g=b.constructor;if(f!==g&&!(u.isFunction(f)&&
f instanceof f&&u.isFunction(g)&&g instanceof g)&&"constructor"in a&&"constructor"in b)return!1;c.push(a);d.push(b);f=0;g=!0;if("[object Array]"==e){if(f=a.length,g=f==b.length)for(;f--&&(g=Z(a[f],b[f],c,d)););}else{for(var h in a)if(u.has(a,h)&&(f++,!(g=u.has(b,h)&&Z(a[h],b[h],c,d))))break;if(g){for(h in b)if(u.has(b,h)&&!f--)break;g=!f}}return c.pop(),d.pop(),g};u.isEqual=function(a,b){return Z(a,b,[],[])};u.isEmpty=function(a){if(null==a)return!0;if(u.isArray(a)||u.isString(a))return 0===a.length;
for(var b in a)if(u.has(a,b))return!1;return!0};u.isElement=function(a){return!(!a||1!==a.nodeType)};u.isArray=e||function(a){return"[object Array]"==m.call(a)};u.isObject=function(a){return a===Object(a)};B("Arguments Function String Number Date RegExp".split(" "),function(a){u["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}});u.isArguments(arguments)||(u.isArguments=function(a){return!(!a||!u.has(a,"callee"))});"function"!=typeof/./&&(u.isFunction=function(a){return"function"==typeof a});
u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};u.isNaN=function(a){return u.isNumber(a)&&a!=+a};u.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==m.call(a)};u.isNull=function(a){return null===a};u.isUndefined=function(a){return void 0===a};u.has=function(a,b){return r.call(a,b)};u.noConflict=function(){return a._=b,this};u.identity=function(a){return a};u.constant=function(a){return function(){return a}};u.property=function(a){return function(b){return b[a]}};u.matches=
function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}};u.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d};u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};u.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=u.invert(P.escape);var H={escape:new RegExp("["+u.keys(P.escape).join("")+"]","g"),
unescape:new RegExp("("+u.keys(P.unescape).join("|")+")","g")};u.each(["escape","unescape"],function(a){u[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return P[a][b]})}});u.result=function(a,b){if(null!=a){var c=a[b];return u.isFunction(c)?c.call(a):c}};u.mixin=function(a){B(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),Q.call(this,c.apply(u,a))}})};var K=0;u.uniqueId=function(a){var b=++K+"";return a?a+b:
b};u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;u.template=function(a,b,c){var d;c=u.defaults({},c,u.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(I,function(a){return"\\"+
G[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b});g+="';\n";c.variable||(g="with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h;}if(b)return d(b,u);b=function(a){return d.call(this,a,u)};return b.source="function("+(c.variable||"obj")+"){\n"+
g+"}",b};u.chain=function(a){return u(a).chain()};var Q=function(a){return this._chain?u(a).chain():a};u.mixin(u);B("pop push reverse shift sort splice unshift".split(" "),function(a){var b=d[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],Q.call(this,c)}});B(["concat","join","slice"],function(a){var b=d[a];u.prototype[a]=function(){return Q.call(this,b.apply(this._wrapped,arguments))}});u.extend(u.prototype,{chain:function(){return this._chain=
!0,this},value:function(){return this._wrapped}});"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this);!function(a){var b,c,d=/[\.\/]/,e=function(){},f=function(a,b){return a-b},g={n:{}},k=function(a,d){a=String(a);var e,g=c,n=Array.prototype.slice.call(arguments,2),s=k.listeners(a),h=0,t=[],v={},w=[],x=b;b=a;for(var A=c=0,y=s.length;y>A;A++)"zIndex"in s[A]&&(t.push(s[A].zIndex),0>s[A].zIndex&&(v[s[A].zIndex]=s[A]));for(t.sort(f);0>t[h];)if(e=v[t[h++]],w.push(e.apply(d,n)),c)return c=g,w;for(A=0;y>A;A++)if(e=s[A],"zIndex"in e)if(e.zIndex==t[h]){if(w.push(e.apply(d,n)),c)break;do if(h++,e=v[t[h]],e&&
w.push(e.apply(d,n)),c)break;while(e)}else v[e.zIndex]=e;else if(w.push(e.apply(d,n)),c)break;return c=g,b=x,w.length?w:null};k._events=g;k.listeners=function(a){var b,c,e,f,k,h,t,v=a.split(d);b=g;var w=[b],x=[];a=0;for(f=v.length;f>a;a++){t=[];k=0;for(h=w.length;h>k;k++)for(b=w[k].n,c=[b[v[a]],b["*"]],e=2;e--;)(b=c[e])&&(t.push(b),x=x.concat(b.f||[]));w=t}return x};k.on=function(a,b){if(a=String(a),"function"!=typeof b)return function(){};for(var c=a.split(d),f=g,k=0,s=c.length;s>k;k++)f=f.n,f=f.hasOwnProperty(c[k])&&
f[c[k]]||(f[c[k]]={n:{}});f.f=f.f||[];k=0;for(s=f.f.length;s>k;k++)if(f.f[k]==b)return e;return f.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}};k.f=function(a){var b=[].slice.call(arguments,1);return function(){k.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}};k.stop=function(){c=1};k.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(b):b};k.nts=function(){return b.split(d)};k.off=k.unbind=function(a,b){if(!a)return void(k._events=g={n:{}});var c,e,f,
s,h,t,v=a.split(d),w=[g];s=0;for(h=v.length;h>s;s++)for(t=0;t<w.length;t+=f.length-2){if(f=[t,1],c=w[t].n,"*"!=v[s])c[v[s]]&&f.push(c[v[s]]);else for(e in c)c.hasOwnProperty(e)&&f.push(c[e]);w.splice.apply(w,f)}s=0;for(h=w.length;h>s;s++)for(c=w[s];c.n;){if(b){if(c.f){t=0;for(f=c.f.length;f>t;t++)if(c.f[t]==b){c.f.splice(t,1);break}!c.f.length&&delete c.f}for(e in c.n)if(c.n.hasOwnProperty(e)&&c.n[e].f){v=c.n[e].f;t=0;for(f=v.length;f>t;t++)if(v[t]==b){v.splice(t,1);break}!v.length&&delete c.n[e].f}}else for(e in delete c.f,
c.n)c.n.hasOwnProperty(e)&&c.n[e].f&&delete c.n[e].f;c=c.n}};k.once=function(a,b){var c=function(){return k.unbind(a,c),b.apply(this,arguments)};return k.on(a,c)};k.version="0.4.2";k.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=k:"undefined"!=typeof define?define("eve",[],function(){return k}):a.eve=k}(window||this);
(function(a,b){"function"==typeof define&&define.amd?define(["eve"],function(c){return b(a,c)}):b(a,a.eve)})(this,function(a,b){function c(a){if(c.is(a,"function"))return v?a():b.on("raphael.DOMload",a);if(c.is(a,V))return c._engine.create[E](c,a.splice(0,3+c.is(a[0],N))).add(a);var d=Array.prototype.slice.call(arguments,0);if(c.is(d[d.length-1],"function")){var e=d.pop();return v?e.call(c._engine.create[E](c,d)):b.on("raphael.DOMload",function(){e.call(c._engine.create[E](c,d))})}return c._engine.create[E](c,
arguments)}function d(a){if("function"==typeof a||Object(a)!==a)return a;var b=new a.constructor,c;for(c in a)a[u](c)&&(b[c]=d(a[c]));return b}function e(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),g=d.cache=d.cache||{},h=d.count=d.count||[];if(g[u](f)){a:for(var e=h,h=f,k=0,l=e.length;l>k;k++)if(e[k]===h){e.push(e.splice(k,1)[0]);break a}f=c?c(g[f]):g[f]}else f=(1E3<=h.length&&delete g[h.shift()],h.push(f),g[f]=a[E](b,e),c?c(g[f]):g[f]);return f}return d}
function f(){return this.hex}function g(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]});c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function k(a,
b,c,d,e,f,g,h,k){null==k&&(k=1);k=(1<k?1:0>k?0:k)/2;for(var l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],n=0,p=0;12>p;p++)var q=k*l[p]+k,r=q*(q*(-3*a+9*c-9*e+3*g)+6*a-12*c+6*e)-3*a+3*c,q=q*(q*(-3*b+9*d-9*f+3*h)+6*b-12*d+6*f)-3*b+3*d,n=n+m[p]*Q.sqrt(r*r+q*q);return k*n}function m(a,b,c,d,e,f,g,h,l){if(!(0>l||k(a,b,c,d,e,f,g,h)<l)){var m,n=.5,p=1-n;for(m=k(a,b,c,d,e,f,g,h,p);.01<J(m-l);)n/=
2,p+=(l>m?1:-1)*n,m=k(a,b,c,d,e,f,g,h,p);return p}}function r(a,b,d){a=c._path2curve(a);b=c._path2curve(b);for(var e,f,g,h,l,m,n,p,q,r,t=d?0:[],s=0,u=a.length;u>s;s++){var v=a[s];if("M"==v[0])e=l=v[1],f=m=v[2];else{"C"==v[0]?(q=[e,f].concat(v.slice(1)),e=q[6],f=q[7]):(q=[e,f,e,f,l,m,l,m],e=l,f=m);for(var v=0,w=b.length;w>v;v++){var x=b[v];if("M"==x[0])g=n=x[1],h=p=x[2];else{"C"==x[0]?(r=[g,h].concat(x.slice(1)),g=r[6],h=r[7]):(r=[g,h,g,h,n,p,n,p],g=n,h=p);var z=q,C=r,x=d,y=c.bezierBBox(z),B=c.bezierBBox(C);
if(c.isBBoxIntersect(y,B)){for(var y=k.apply(0,z),B=k.apply(0,C),y=T(~~(y/5),1),B=T(~~(B/5),1),Xa=[],A=[],D={},ib=x?0:[],Ma=0;y+1>Ma;Ma++){var aa=c.findDotsAtSegment.apply(c,z.concat(Ma/y));Xa.push({x:aa.x,y:aa.y,t:Ma/y})}for(Ma=0;B+1>Ma;Ma++)aa=c.findDotsAtSegment.apply(c,C.concat(Ma/B)),A.push({x:aa.x,y:aa.y,t:Ma/B});for(Ma=0;y>Ma;Ma++)for(z=0;B>z;z++){var ba=Xa[Ma],ga=Xa[Ma+1],C=A[z],aa=A[z+1],E=.001>J(ga.x-ba.x)?"y":"x",F=.001>J(aa.x-C.x)?"y":"x",H;b:{H=ba.x;var G=ba.y,O=ga.x,P=ga.y,K=C.x,I=C.y,
L=aa.x,N=aa.y;if(!(T(H,O)<X(K,L)||X(H,O)>T(K,L)||T(G,P)<X(I,N)||X(G,P)>T(I,N))){var R=(H*P-G*O)*(K-L)-(H-O)*(K*N-I*L),S=(H*P-G*O)*(I-N)-(G-P)*(K*N-I*L),Q=(H-O)*(I-N)-(G-P)*(K-L);if(Q){var R=R/Q,S=S/Q,Q=+R.toFixed(2),Z=+S.toFixed(2);if(!(Q<+X(H,O).toFixed(2)||Q>+T(H,O).toFixed(2)||Q<+X(K,L).toFixed(2)||Q>+T(K,L).toFixed(2)||Z<+X(G,P).toFixed(2)||Z>+T(G,P).toFixed(2)||Z<+X(I,N).toFixed(2)||Z>+T(I,N).toFixed(2))){H={x:R,y:S};break b}}}H=void 0}H&&D[H.x.toFixed(4)]!=H.y.toFixed(4)&&(D[H.x.toFixed(4)]=
H.y.toFixed(4),ba=ba.t+J((H[E]-ba[E])/(ga[E]-ba[E]))*(ga.t-ba.t),C=C.t+J((H[F]-C[F])/(aa[F]-C[F]))*(aa.t-C.t),0<=ba&&1.001>=ba&&0<=C&&1.001>=C&&(x?ib++:ib.push({x:H.x,y:H.y,t1:X(ba,1),t2:X(C,1)})))}x=ib}else x=x?0:[];if(d)t+=x;else{y=0;for(B=x.length;B>y;y++)x[y].segment1=s,x[y].segment2=v,x[y].bez1=q,x[y].bez2=r;t=t.concat(x)}}}}}return t}function q(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function l(){return this.x+
P+this.y+P+this.width+" \u00d7 "+this.height}function n(a,b,c,d,e,f){function g(a,b){var c,d,e,f,m;e=a;for(m=0;8>m;m++){if(f=((l*e+k)*e+h)*e-a,J(f)<b)return e;if(d=(3*l*e+2*k)*e+h,1E-6>J(d))break;e-=f/d}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c&&!(f=((l*e+k)*e+h)*e,J(f-a)<b);)a>f?c=e:d=e,e=(d-c)/2+c;return e}var h=3*b,k=3*(d-b)-h,l=1-h-k,m=3*c,n=3*(e-c)-m,p=1-m-n;return function(a,b){var c=g(a,b);return((p*c+n)*c+m)*c}(a,1/(200*f))}function s(a,b){var c=[],d={};if(this.ms=b,this.times=
1,a){for(var e in a)a[u](e)&&(d[ha(e)]=a[e],c.push(ha(e)));c.sort(sa)}this.anim=d;this.top=c[c.length-1];this.percents=c}function h(a,d,e,f,g,h){e=ha(e);var k,l,m,p,r,t,s=a.ms,v={},w={},z={};if(f)for(y=0,B=ka.length;B>y;y++){var C=ka[y];if(C.el.id==d.id&&C.anim==a){C.percent!=e?(ka.splice(y,1),m=1):l=C;d.attr(C.totalOrigin);break}}else f=+w;for(var y=0,B=a.percents.length;B>y;y++){if(a.percents[y]==e||a.percents[y]>f*a.top){e=a.percents[y];r=a.percents[y-1]||0;s=s/a.top*(e-r);p=a.percents[y+1];k=
a.anim[e];break}f&&d.attr(a.anim[a.percents[y]])}if(k){if(l)l.initstatus=f,l.start=new Date-l.ms*f;else{for(var A in k)if(k[u](A)&&(La[u](A)||d.paper.customAttributes[u](A)))switch(v[A]=d.attr(A),null==v[A]&&(v[A]=S[A]),w[A]=k[A],La[A]){case N:z[A]=(w[A]-v[A])/s;break;case "colour":v[A]=c.getRGB(v[A]);y=c.getRGB(w[A]);z[A]={r:(y.r-v[A].r)/s,g:(y.g-v[A].g)/s,b:(y.b-v[A].b)/s};break;case "path":var y=ra(v[A],w[A]),D=y[1];v[A]=y[0];z[A]=[];y=0;for(B=v[A].length;B>y;y++){z[A][y]=[0];for(var E=1,F=v[A][y].length;F>
E;E++)z[A][y][E]=(D[y][E]-v[A][y][E])/s}break;case "transform":y=d._;if(D=eb(y[A],w[A]))for(v[A]=D.from,w[A]=D.to,z[A]=[],z[A].real=!0,y=0,B=v[A].length;B>y;y++)for(z[A][y]=[v[A][y][0]],E=1,F=v[A][y].length;F>E;E++)z[A][y][E]=(w[A][y][E]-v[A][y][E])/s;else D=d.matrix||new q,y={_:{transform:y.transform},getBBox:function(){return d.getBBox(1)}},v[A]=[D.a,D.b,D.c,D.d,D.e,D.f],zb(y,w[A]),w[A]=y._.transform,z[A]=[(y.matrix.a-D.a)/s,(y.matrix.b-D.b)/s,(y.matrix.c-D.c)/s,(y.matrix.d-D.d)/s,(y.matrix.e-D.e)/
s,(y.matrix.f-D.f)/s];break;case "csv":D=H(k[A])[K](x);B=H(v[A])[K](x);if("clip-rect"==A)for(v[A]=B,z[A]=[],y=B.length;y--;)z[A][y]=(D[y]-v[A][y])/s;w[A]=D;break;default:for(D=[][O](k[A]),B=[][O](v[A]),z[A]=[],y=d.paper.customAttributes[A].length;y--;)z[A][y]=((D[y]||0)-(B[y]||0))/s}A=k.easing;y=c.easing_formulas[A];if(!y)if(y=H(A).match(Ba),y&&5==y.length)var Xa=y,y=function(a){return n(a,+Xa[1],+Xa[2],+Xa[3],+Xa[4],s)};else y=Ca;if(t=k.start||a.start||+new Date,C={anim:a,percent:e,timestamp:t,start:t+
(a.del||0),status:0,initstatus:f||0,stop:!1,ms:s,easing:y,from:v,diff:z,to:w,el:d,callback:k.callback,prev:r,next:p,repeat:h||a.times,origin:d.attr(),totalOrigin:g},ka.push(C),f&&!l&&!m&&(C.stop=!0,C.start=new Date-s*f,1==ka.length))return kc();m&&(C.start=new Date-C.ms*f);1==ka.length&&sc(kc)}b("raphael.anim.start."+d.id,d,a)}}function t(a){for(var b=0;b<ka.length;b++)ka[b].el.paper==a&&ka.splice(b--,1)}c.version="2.1.2";c.eve=b;var v,w,x=/[, ]+/,A={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},
y=/\{(\d+)\}/g,u="hasOwnProperty",B={doc:document,win:a},C=Object.prototype[u].call(B.win,"Raphael"),z=B.win.Raphael,D=function(){this.ca=this.customAttributes={}},E="apply",O="concat",Z="ontouchstart"in B.win||B.win.DocumentTouch&&B.doc instanceof DocumentTouch,P=" ",H=String,K="split",L="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[K](P),G={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},I=H.prototype.toLowerCase,Q=Math,
T=Q.max,X=Q.min,J=Q.abs,R=Q.pow,F=Q.PI,N="number",V="array",Y=Object.prototype.toString,pa=(c._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Ga={NaN:1,Infinity:1,"-Infinity":1},Ba=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,
Na=Q.round,ha=parseFloat,Pa=parseInt,Ya=H.prototype.toUpperCase,S=c._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt",
"stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},La=c._availableAnimAttrs={blur:N,"clip-rect":"csv",cx:N,cy:N,fill:"colour","fill-opacity":N,"font-size":N,height:N,opacity:N,path:"path",r:N,rx:N,ry:N,stroke:"colour","stroke-opacity":N,"stroke-width":N,transform:"transform",width:N,x:N,y:N},Qa=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
hb={hs:1,rg:1},ma=/,?([achlmqrstvxz]),?/gi,ca=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
ia=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,xa=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,
la=(c._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),sa=function(a,b){return ha(a)-ha(b)},qa=function(){},Ca=function(a){return a},za=c._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,
e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},fa=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},ta=c._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return fa(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return fa(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return za(a.x,a.y,
a.width,a.height,a.r)},image:function(a){a=a.attrs;return za(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return za(a.x,a.y,a.width,a.height)},set:function(a){a=a._getBBox();return za(a.x,a.y,a.width,a.height)}},Ia=c.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,k;a=ra(a);e=0;for(g=a.length;g>e;e++)for(k=a[e],f=1,h=k.length;h>f;f+=2)c=b.x(k[f],k[f+1]),d=b.y(k[f],k[f+1]),k[f]=c,k[f+1]=d;return a};if(c._g=B,c.type=B.win.SVGAngle||B.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML","VML"==c.type){var Ra,Sa=B.doc.createElement("div");if(Sa.innerHTML='<v:shape adj="1"/>',Ra=Sa.firstChild,Ra.style.behavior="url(#default#VML)",!Ra||"object"!=typeof Ra.adj)return c.type="";Sa=null}c.svg=!(c.vml="VML"==c.type);c._Paper=D;c.fn=w=D.prototype=c.prototype;c._id=0;c._oid=0;c.is=function(a,b){return b=I.call(b),"finite"==b?!Ga[u](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||
Y.call(a).slice(8,-1).toLowerCase()==b};c.angle=function(a,b,d,e,f,g){return null==f?(a-=d,b-=e,a||b?(180*Q.atan2(-b,-a)/F+540)%360:0):c.angle(a,b,f,g)-c.angle(d,e,f,g)};c.rad=function(a){return a%360*F/180};c.deg=function(a){return 180*a/F%360};c.snapTo=function(a,b,d){if(d=c.is(d,"finite")?d:10,c.is(a,V))for(var e=a.length;e--;){if(J(a[e]-b)<=d)return a[e]}else{a=+a;e=b%a;if(d>e)return b-e;if(e>a-d)return b-e+a}return b};c.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,
b).toUpperCase()}}(/[xy]/g,function(a){var b=16*Q.random()|0;return("x"==a?b:3&b|8).toString(16)});c.setWindow=function(a){b("raphael.setWindow",c,B.win,a);B.win=a;B.doc=B.win.document;c._engine.initWin&&c._engine.initWin(B.win)};var Da=function(a){if(c.vml){var b,d=/^\s+|\s+$/g;try{var f=new ActiveXObject("htmlfile");f.write("<body>");f.close();b=f.body}catch(g){b=createPopup().document.body}var h=b.createTextRange();Da=e(function(a){try{b.style.color=H(a).replace(d,"");var c=h.queryCommandValue("ForeColor");
return c=(255&c)<<16|65280&c|(16711680&c)>>>16,"#"+("000000"+c.toString(16)).slice(-6)}catch(e){return"none"}})}else{var k=B.doc.createElement("i");k.title="Rapha\u00ebl Colour Picker";k.style.display="none";B.doc.body.appendChild(k);Da=e(function(a){return k.style.color=a,B.doc.defaultView.getComputedStyle(k,"").getPropertyValue("color")})}return Da(a)},ua=function(){return"hsb("+[this.h,this.s,this.b]+")"},va=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ha=function(){return this.hex},Jb=
function(a,b,d){if(null==b&&c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(d=a.b,b=a.g,a=a.r),null==b&&c.is(a,"string"))d=c.getRGB(a),a=d.r,b=d.g,d=d.b;return(1<a||1<b||1<d)&&(a/=255,b/=255,d/=255),[a,b,d]},Kb=function(a,b,d,e){a*=255;b*=255;d*=255;a={r:a,g:b,b:d,hex:c.rgb(a,b,d),toString:Ha};return c.is(e,"finite")&&(a.opacity=e),a};c.color=function(a){var b;return c.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=c.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):c.is(a,"object")&&"h"in a&&"s"in a&&
"l"in a?(b=c.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(c.is(a,"string")&&(a=c.getRGB(a)),c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=c.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=c.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=Ha,a};c.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o);a*=360;var e,f,g,h,k;return a=a%360/60,k=c*b,h=k*(1-J(a%2-1)),e=f=g=c-k,a=~~a,e+=[k,h,0,0,h,k][a],f+=[h,k,k,h,0,0][a],g+=[0,0,h,k,
k,h][a],Kb(e,f,g,d)};c.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h);(1<a||1<b||1<c)&&(a/=360,b/=100,c/=100);a*=360;var e,f,g,h,k;return a=a%360/60,k=2*b*(.5>c?c:1-c),h=k*(1-J(a%2-1)),e=f=g=c-k/2,a=~~a,e+=[k,h,0,0,h,k][a],f+=[h,k,k,h,0,0][a],g+=[0,0,h,k,k,h][a],Kb(e,f,g,d)};c.rgb2hsb=function(a,b,c){c=Jb(a,b,c);a=c[0];b=c[1];c=c[2];var d,e,f,g;return f=T(a,b,c),g=f-X(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=0==g?
0:g/f,{h:d,s:e,b:f,toString:ua}};c.rgb2hsl=function(a,b,c){c=Jb(a,b,c);a=c[0];b=c[1];c=c[2];var d,e,f,g,h,k;return g=T(a,b,c),h=X(a,b,c),k=g-h,d=0==k?null:g==a?(b-c)/k:g==b?(c-a)/k+2:(a-b)/k+4,d=(d+360)%6*60/360,f=(g+h)/2,e=0==k?0:.5>f?k/(2*f):k/(2-2*f),{h:d,s:e,l:f,toString:va}};c._path2string=function(){return this.join(",").replace(ma,"$1")};c._preload=function(a,b){var c=B.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em";c.onload=function(){b.call(this);this.onload=
null;B.doc.body.removeChild(this)};c.onerror=function(){B.doc.body.removeChild(this)};B.doc.body.appendChild(c);c.src=a};c.getRGB=e(function(a){if(!a||(a=H(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:f};!hb[u](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=Da(a));var b,d,e,g,h,k;return(a=a.match(pa))?(a[2]&&(e=Pa(a[2].substring(5),16),d=Pa(a[2].substring(3,5),16),b=Pa(a[2].substring(1,3),16)),a[3]&&(e=Pa((h=a[3].charAt(3))+
h,16),d=Pa((h=a[3].charAt(2))+h,16),b=Pa((h=a[3].charAt(1))+h,16)),a[4]&&(k=a[4][K](Qa),b=ha(k[0]),"%"==k[0].slice(-1)&&(b*=2.55),d=ha(k[1]),"%"==k[1].slice(-1)&&(d*=2.55),e=ha(k[2]),"%"==k[2].slice(-1)&&(e*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(g=ha(k[3])),k[3]&&"%"==k[3].slice(-1)&&(g/=100)),a[5]?(k=a[5][K](Qa),b=ha(k[0]),"%"==k[0].slice(-1)&&(b*=2.55),d=ha(k[1]),"%"==k[1].slice(-1)&&(d*=2.55),e=ha(k[2]),"%"==k[2].slice(-1)&&(e*=2.55),("deg"==k[0].slice(-3)||"\u00b0"==k[0].slice(-1))&&(b/=
360),"hsba"==a[1].toLowerCase().slice(0,4)&&(g=ha(k[3])),k[3]&&"%"==k[3].slice(-1)&&(g/=100),c.hsb2rgb(b,d,e,g)):a[6]?(k=a[6][K](Qa),b=ha(k[0]),"%"==k[0].slice(-1)&&(b*=2.55),d=ha(k[1]),"%"==k[1].slice(-1)&&(d*=2.55),e=ha(k[2]),"%"==k[2].slice(-1)&&(e*=2.55),("deg"==k[0].slice(-3)||"\u00b0"==k[0].slice(-1))&&(b/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(g=ha(k[3])),k[3]&&"%"==k[3].slice(-1)&&(g/=100),c.hsl2rgb(b,d,e,g)):(a={r:b,g:d,b:e,toString:f},a.hex="#"+(16777216|e|d<<8|b<<16).toString(16).slice(1),
c.is(g,"finite")&&(a.opacity=g),a)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f}},c);c.hsb=e(function(a,b,d){return c.hsb2rgb(a,b,d).hex});c.hsl=e(function(a,b,d){return c.hsl2rgb(a,b,d).hex});c.rgb=e(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)});c.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75};var b=this.hsb2rgb(a.h,a.s,a.b);return a.h+=.075,1<a.h&&(a.h=0,a.s-=.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b})),b.hex};c.getColor.reset=
function(){delete this.start};c.parsePathString=function(a){if(!a)return null;var b=Za(a);if(b.arr)return Va(b.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];return c.is(a,V)&&c.is(a[0],V)&&(e=Va(a)),e.length||H(a).replace(ca,function(a,b,c){var f=[];a=b.toLowerCase();if(c.replace(xa,function(a,b){b&&f.push(+b)}),"m"==a&&2<f.length&&(e.push([b][O](f.splice(0,2))),a="l",b="m"==b?"l":"L"),"r"==a)e.push([b][O](f));else for(;f.length>=d[a]&&(e.push([b][O](f.splice(0,d[a]))),d[a]););}),
e.toString=c._path2string,b.arr=Va(e),e};c.parseTransformString=e(function(a){if(!a)return null;var b=[];return c.is(a,V)&&c.is(a[0],V)&&(b=Va(a)),b.length||H(a).replace(ia,function(a,c,d){var e=[];I.call(c);d.replace(xa,function(a,b){b&&e.push(+b)});b.push([c][O](e))}),b.toString=c._path2string,b});var Za=function(a){var b=Za.ps=Za.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[u](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])}),b[a]};c.findDotsAtSegment=
function(a,b,c,d,e,f,g,h,k){var l=1-k,m=R(l,3),n=R(l,2),p=k*k,q=p*k,r=m*a+3*n*k*c+3*l*k*k*e+q*g,m=m*b+3*n*k*d+3*l*k*k*f+q*h,n=a+2*k*(c-a)+p*(e-2*c+a),q=b+2*k*(d-b)+p*(f-2*d+b),t=c+2*k*(e-c)+p*(g-2*e+c),p=d+2*k*(f-d)+p*(h-2*f+d);a=l*a+k*c;b=l*b+k*d;e=l*e+k*g;f=l*f+k*h;h=90-180*Q.atan2(n-t,q-p)/F;return(n>t||p>q)&&(h+=180),{x:r,y:m,m:{x:n,y:q},n:{x:t,y:p},start:{x:a,y:b},end:{x:e,y:f},alpha:h}};c.bezierBBox=function(a,b,d,e,f,g,h,k){c.is(a,"array")||(a=[a,b,d,e,f,g,h,k]);a=mb.apply(null,a);return{x:a.min.x,
y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};c.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2};c.isBBoxIntersect=function(a,b){var d=c.isPointInsideBBox;return d(b,a.x,a.y)||d(b,a.x2,a.y)||d(b,a.x,a.y2)||d(b,a.x2,a.y2)||d(a,b.x,b.y)||d(a,b.x2,b.y)||d(a,b.x,b.y2)||d(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)};c.pathIntersection=function(a,b){return r(a,b)};c.pathIntersectionNumber=function(a,
b){return r(a,b,1)};c.isPointInsidePath=function(a,b,d){var e=c.pathBBox(a);return c.isPointInsideBBox(e,b,d)&&1==r(a,[["M",b,d],["H",e.x2+10]],1)%2};c._removedFactory=function(a){return function(){b("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object",a)}};var yb=c.pathBBox=function(a){var b=Za(a);if(b.bbox)return d(b.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=ra(a);for(var c,e=0,f=0,g=[],h=[],k=0,l=a.length;l>k;k++)(c=a[k],"M"==c[0])?(e=
c[1],f=c[2],g.push(e),h.push(f)):(e=mb(e,f,c[1],c[2],c[3],c[4],c[5],c[6]),g=g[O](e.min.x,e.max.x),h=h[O](e.min.y,e.max.y),e=c[5],f=c[6]);a=X[E](0,g);c=X[E](0,h);g=T[E](0,g);h=T[E](0,h);k=g-a;l=h-c;h={x:a,y:c,x2:g,y2:h,width:k,height:l,cx:a+k/2,cy:c+l/2};return b.bbox=d(h),h},Va=function(a){a=d(a);return a.toString=c._path2string,a},qb=c._pathToRelative=function(a){var b=Za(a);if(b.rel)return Va(b.rel);c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a));var d=[],e=0,f=0,g=0,h=0,k=0;"M"==a[0][0]&&
(e=a[0][1],f=a[0][2],g=e,h=f,k++,d.push(["M",e,f]));for(var l=a.length;l>k;k++){var m=d[k]=[],n=a[k];if(n[0]!=I.call(n[0]))switch(m[0]=I.call(n[0]),m[0]){case "a":m[1]=n[1];m[2]=n[2];m[3]=n[3];m[4]=n[4];m[5]=n[5];m[6]=+(n[6]-e).toFixed(3);m[7]=+(n[7]-f).toFixed(3);break;case "v":m[1]=+(n[1]-f).toFixed(3);break;case "m":g=n[1],h=n[2];default:for(var p=1,q=n.length;q>p;p++)m[p]=+(n[p]-(p%2?e:f)).toFixed(3)}else for(d[k]=[],"m"==n[0]&&(g=n[1]+e,h=n[2]+f),m=0,p=n.length;p>m;m++)d[k][m]=n[m];n=d[k].length;
switch(d[k][0]){case "z":e=g;f=h;break;case "h":e+=+d[k][n-1];break;case "v":f+=+d[k][n-1];break;default:e+=+d[k][n-2],f+=+d[k][n-1]}}return d.toString=c._path2string,b.rel=Va(d),d},Xb=c._pathToAbsolute=function(a){var b=Za(a);if(b.abs)return Va(b.abs);if(c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a)),!a||!a.length)return[["M",0,0]];var d=[],e=0,f=0,h=0,k=0,l=0;"M"==a[0][0]&&(e=+a[0][1],f=+a[0][2],h=e,k=f,l++,d[0]=["M",e,f]);for(var m,n=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&
"Z"==a[2][0].toUpperCase(),p=l,q=a.length;q>p;p++){if(d.push(l=[]),m=a[p],m[0]!=Ya.call(m[0]))switch(l[0]=Ya.call(m[0]),l[0]){case "A":l[1]=m[1];l[2]=m[2];l[3]=m[3];l[4]=m[4];l[5]=m[5];l[6]=+(m[6]+e);l[7]=+(m[7]+f);break;case "V":l[1]=+m[1]+f;break;case "H":l[1]=+m[1]+e;break;case "R":for(var r=[e,f][O](m.slice(1)),t=2,s=r.length;s>t;t++)r[t]=+r[t]+e,r[++t]=+r[t]+f;d.pop();d=d[O](g(r,n));break;case "M":h=+m[1]+e,k=+m[2]+f;default:for(t=1,s=m.length;s>t;t++)l[t]=+m[t]+(t%2?e:f)}else if("R"==m[0])r=
[e,f][O](m.slice(1)),d.pop(),d=d[O](g(r,n)),l=["R"][O](m.slice(-2));else for(r=0,t=m.length;t>r;r++)l[r]=m[r];switch(l[0]){case "Z":e=h;f=k;break;case "H":e=l[1];break;case "V":f=l[1];break;case "M":h=l[l.length-2],k=l[l.length-1];default:e=l[l.length-2],f=l[l.length-1]}}return d.toString=c._path2string,b.abs=Va(d),d},Lb=function(a,b,c,d){return[a,b,c,d,c,d]},Yb=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},Ka=function(a,b,c,d,f,g,h,k,l,m){var n,p=120*F/180,q=
F/180*(+f||0),r=[],t=e(function(a,b,c){var d=a*Q.cos(c)-b*Q.sin(c);a=a*Q.sin(c)+b*Q.cos(c);return{x:d,y:a}});if(m)v=m[0],n=m[1],g=m[2],s=m[3];else{n=t(a,b,-q);a=n.x;b=n.y;n=t(k,l,-q);k=n.x;l=n.y;n=(Q.cos(F/180*f),Q.sin(F/180*f),(a-k)/2);v=(b-l)/2;s=n*n/(c*c)+v*v/(d*d);1<s&&(s=Q.sqrt(s),c*=s,d*=s);var s=c*c,u=d*d,s=(g==h?-1:1)*Q.sqrt(J((s*u-s*v*v-u*n*n)/(s*v*v+u*n*n)));g=s*c*v/d+(a+k)/2;var s=s*-d*n/c+(b+l)/2,v=Q.asin(((b-s)/d).toFixed(9));n=Q.asin(((l-s)/d).toFixed(9));v=g>a?F-v:v;n=g>k?F-n:n;0>v&&
(v=2*F+v);0>n&&(n=2*F+n);h&&v>n&&(v-=2*F);!h&&n>v&&(n-=2*F)}if(J(n-v)>p){var r=n,u=k,w=l;n=v+p*(h&&n>v?1:-1);k=g+c*Q.cos(n);l=s+d*Q.sin(n);r=Ka(k,l,c,d,f,0,h,u,w,[n,r,g,s])}g=n-v;f=Q.cos(v);p=Q.sin(v);h=Q.cos(n);n=Q.sin(n);g=Q.tan(g/4);c=4/3*c*g;g*=4/3*d;d=[a,b];a=[a+c*p,b-g*f];b=[k+c*n,l-g*h];k=[k,l];if(a[0]=2*d[0]-a[0],a[1]=2*d[1]-a[1],m)return[a,b,k][O](r);r=[a,b,k][O](r).join()[K](",");m=[];k=0;for(l=r.length;l>k;k++)m[k]=k%2?t(r[k-1],r[k],q).y:t(r[k],r[k+1],q).x;return m},Ea=function(a,b,c,d,
e,f,g,h,k){var l=1-k;return{x:R(l,3)*a+3*R(l,2)*k*c+3*l*k*k*e+R(k,3)*g,y:R(l,3)*b+3*R(l,2)*k*d+3*l*k*k*f+R(k,3)*h}},mb=e(function(a,b,c,d,e,f,g,h){var k,l=e-2*c+a-(g-2*e+c),m=2*(c-a)-2*(e-c),n=a-c,p=(-m+Q.sqrt(m*m-4*l*n))/2/l,q=(-m-Q.sqrt(m*m-4*l*n))/2/l,r=[b,h],t=[a,g];return"1e12"<J(p)&&(p=.5),"1e12"<J(q)&&(q=.5),0<p&&1>p&&(k=Ea(a,b,c,d,e,f,g,h,p),t.push(k.x),r.push(k.y)),0<q&&1>q&&(k=Ea(a,b,c,d,e,f,g,h,q),t.push(k.x),r.push(k.y)),l=f-2*d+b-(h-2*f+d),m=2*(d-b)-2*(f-d),n=b-d,p=(-m+Q.sqrt(m*m-4*l*
n))/2/l,q=(-m-Q.sqrt(m*m-4*l*n))/2/l,"1e12"<J(p)&&(p=.5),"1e12"<J(q)&&(q=.5),0<p&&1>p&&(k=Ea(a,b,c,d,e,f,g,h,p),t.push(k.x),r.push(k.y)),0<q&&1>q&&(k=Ea(a,b,c,d,e,f,g,h,q),t.push(k.x),r.push(k.y)),{min:{x:X[E](0,t),y:X[E](0,r)},max:{x:T[E](0,t),y:T[E](0,r)}}}),ra=c._path2curve=e(function(a,b){var c=!b&&Za(a);if(!b&&c.curve)return Va(c.curve);var d=Xb(a),e=b&&Xb(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,b,c){var d,e;if(!a)return["C",
b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null),a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][O](Ka[E](0,[b.x,b.y][O](a.slice(1))));break;case "S":"C"==c||"S"==c?(d=2*b.x-b.bx,e=2*b.y-b.by):(d=b.x,e=b.y);a=["C",d,e][O](a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"][O](Yb(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][O](Yb(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][O](Lb(b.x,
b.y,a[1],a[2]));break;case "H":a=["C"][O](Lb(b.x,b.y,a[1],b.y));break;case "V":a=["C"][O](Lb(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"][O](Lb(b.x,b.y,b.X,b.Y))}return a},k=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)a.splice(b++,0,["C"][O](c.splice(0,6)));a.splice(b,1);n=T(d.length,e&&e.length||0)}},l=function(a,b,c,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],n=T(d.length,e&&e.length||0))},m=0,n=T(d.length,e&&e.length||
0);for(;n>m;m++){d[m]=h(d[m],f);k(d,m);e&&(e[m]=h(e[m],g));e&&k(e,m);l(d,e,f,g,m);l(e,d,g,f,m);var p=d[m],q=e&&e[m],r=p.length,t=e&&q.length;f.x=p[r-2];f.y=p[r-1];f.bx=ha(p[r-4])||f.x;f.by=ha(p[r-3])||f.y;g.bx=e&&(ha(q[t-4])||g.x);g.by=e&&(ha(q[t-3])||g.y);g.x=e&&q[t-2];g.y=e&&q[t-1]}return e||(c.curve=Va(d)),e?[d,e]:d},null,Va),p=(c._parseDots=e(function(a){for(var b=[],d=0,e=a.length;e>d;d++){var f={},g=a[d].match(/^([^:]*):?([\d\.]*)/);if(f.color=c.getRGB(g[1]),f.color.error)return null;f.color=
f.color.hex;g[2]&&(f.offset=g[2]+"%");b.push(f)}d=1;for(e=b.length-1;e>d;d++)if(!b[d].offset){a=ha(b[d-1].offset||0);g=0;for(f=d+1;e>f;f++)if(b[f].offset){g=b[f].offset;break}g||(g=100,f=e);g=ha(g);for(g=(g-a)/(f-d+1);f>d;d++)a+=g,b[d].offset=a+"%"}return b}),c._tear=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)}),fb=(c._tofront=function(a,b){b.top!==a&&(p(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},c._toback=
function(a,b){b.bottom!==a&&(p(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},c._insertafter=function(a,b,c){p(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a},c._insertbefore=function(a,b,c){p(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b},c.toMatrix=function(a,b){var c=yb(a),d={_:{transform:""},getBBox:function(){return c}};return zb(d,b),d.matrix}),zb=(c.transformPath=function(a,b){return Ia(a,fb(a,b))},c._extractTransform=
function(a,b){if(null==b)return a._.transform;b=H(b).replace(/\.{3}|\u2026/g,a._.transform||"");var d=c.parseTransformString(b),e=0,f=0,g=0,h=1,k=1,l=a._,g=new q;if(l.transform=d||[],d)for(var f=0,m=d.length;m>f;f++){var n,p,r,t,s,u=d[f],v=u.length,w=H(u[0]).toLowerCase(),x=u[0]!=w,y=x?g.invert():0;"t"==w&&3==v?x?(n=y.x(0,0),p=y.y(0,0),r=y.x(u[1],u[2]),t=y.y(u[1],u[2]),g.translate(r-n,t-p)):g.translate(u[1],u[2]):"r"==w?2==v?(s=s||a.getBBox(1),g.rotate(u[1],s.x+s.width/2,s.y+s.height/2),e+=u[1]):
4==v&&(x?(r=y.x(u[2],u[3]),t=y.y(u[2],u[3]),g.rotate(u[1],r,t)):g.rotate(u[1],u[2],u[3]),e+=u[1]):"s"==w?2==v||3==v?(s=s||a.getBBox(1),g.scale(u[1],u[v-1],s.x+s.width/2,s.y+s.height/2),h*=u[1],k*=u[v-1]):5==v&&(x?(r=y.x(u[3],u[4]),t=y.y(u[3],u[4]),g.scale(u[1],u[2],r,t)):g.scale(u[1],u[2],u[3],u[4]),h*=u[1],k*=u[2]):"m"==w&&7==v&&g.add(u[1],u[2],u[3],u[4],u[5],u[6]);l.dirtyT=1;a.matrix=g}a.matrix=g;l.sx=h;l.sy=k;l.deg=e;l.dx=f=g.e;l.dy=g=g.f;1==h&&1==k&&!e&&l.bbox?(l.bbox.x+=+f,l.bbox.y+=+g):l.dirtyT=
1}),gb=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},eb=c._equaliseTransform=function(a,b){b=H(b).replace(/\.{3}|\u2026/g,a);a=c.parseTransformString(a)||[];b=c.parseTransformString(b)||[];for(var d,e,f,g,h=T(a.length,b.length),k=[],l=[],m=0;h>m;m++){if(f=a[m]||gb(b[m]),g=b[m]||gb(f),f[0]!=g[0]||"r"==f[0].toLowerCase()&&
(f[2]!=g[2]||f[3]!=g[3])||"s"==f[0].toLowerCase()&&(f[3]!=g[3]||f[4]!=g[4]))return;k[m]=[];l[m]=[];d=0;for(e=T(f.length,g.length);e>d;d++)d in f&&(k[m][d]=f[d]),d in g&&(l[m][d]=g[d])}return{from:k,to:l}};c._getContainer=function(a,b,d,e){var f;return f=null!=e||c.is(a,"object")?a:B.doc.getElementById(a),null!=f?f.tagName?null==b?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:b,height:d}:{container:1,x:a,y:b,width:d,height:e}:void 0};
c.pathToRelative=qb;c._engine={};c.path2curve=ra;c.matrix=function(a,b,c,d,e,f){return new q(a,b,c,d,e,f)};(function(a){function b(a){return a[0]*a[0]+a[1]*a[1]}function d(a){var c=Q.sqrt(b(a));a[0]&&(a[0]/=c);a[1]&&(a[1]/=c)}a.add=function(a,b,c,d,e,f){var g=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]];b=[[a,c,e],[b,d,f],[0,0,1]];a&&a instanceof q&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(c=0;3>c;c++){for(d=e=0;3>d;d++)e+=h[a][d]*b[d][c];g[a][c]=e}this.a=
g[0][0];this.b=g[1][0];this.c=g[0][1];this.d=g[1][1];this.e=g[0][2];this.f=g[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new q(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new q(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,b){this.add(1,0,0,1,a,b)};a.scale=function(a,b,c,d){null==b&&(b=a);(c||d)&&this.add(1,0,0,1,c,d);this.add(a,0,0,b,0,0);(c||d)&&this.add(1,0,0,1,-c,
-d)};a.rotate=function(a,b,d){a=c.rad(a);b=b||0;d=d||0;var e=+Q.cos(a).toFixed(9);a=+Q.sin(a).toFixed(9);this.add(e,a,-a,e,b,d);this.add(1,0,0,1,-b,-d)};a.x=function(a,b){return a*this.a+b*this.c+this.e};a.y=function(a,b){return a*this.b+b*this.d+this.f};a.get=function(a){return+this[H.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return c.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};
a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=Q.sqrt(b(e[0]));d(e[0]);a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1];e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear];
a.scaley=Q.sqrt(b(e[1]));d(e[1]);a.shear/=a.scaley;var f=-e[0][1],e=e[1][1];return 0>e?(a.rotate=c.deg(Q.acos(e)),0>f&&(a.rotate=360-a.rotate)):a.rotate=c.deg(Q.asin(f)),a.isSimple=!(+a.shear.toFixed(9)||a.scalex.toFixed(9)!=a.scaley.toFixed(9)&&a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a};a.toTransformString=function(a){a=a||this[K]();return a.isSimple?(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),
a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(q.prototype);var rb=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);w.safari="Apple Computer, Inc."==navigator.vendor&&(rb&&4>rb[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&rb&&8>rb[1]?function(){var a=
this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:qa;for(var Ob=function(){this.returnValue=!1},ec=function(){return this.originalEvent.preventDefault()},ac=function(){this.cancelBubble=!0},Vb=function(){return this.originalEvent.stopPropagation()},sb=function(a){return{x:a.clientX+(B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft),y:a.clientY+(B.doc.documentElement.scrollTop||B.doc.body.scrollTop)}},Gb=function(){return B.doc.addEventListener?
function(a,b,c,d){var e=function(a){var b=sb(a);return c.call(d,a,b.x,b.y)};(a.addEventListener(b,e,!1),Z&&G[b])&&a.addEventListener(G[b],function(b){for(var e=sb(b),f=b,g=0,h=b.targetTouches&&b.targetTouches.length;h>g;g++)if(b.targetTouches[g].target==a){b=b.targetTouches[g];b.originalEvent=f;b.preventDefault=ec;b.stopPropagation=Vb;break}return c.call(d,b,e.x,e.y)},!1);return function(){return a.removeEventListener(b,e,!1),Z&&G[b]&&a.removeEventListener(G[b],e,!1),!0}}:B.doc.attachEvent?function(a,
b,c,d){var e=function(a){a=a||B.win.event;var b=a.clientX+(B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft),e=a.clientY+(B.doc.documentElement.scrollTop||B.doc.body.scrollTop);return a.preventDefault=a.preventDefault||Ob,a.stopPropagation=a.stopPropagation||ac,c.call(d,a,b,e)};a.attachEvent("on"+b,e);return function(){return a.detachEvent("on"+b,e),!0}}:void 0}(),pb=[],tb=function(a){for(var c,d=a.clientX,e=a.clientY,f=B.doc.documentElement.scrollTop||B.doc.body.scrollTop,g=B.doc.documentElement.scrollLeft||
B.doc.body.scrollLeft,h=pb.length;h--;){if(c=pb[h],Z&&a.touches)for(var k,l=a.touches.length;l--;){if(k=a.touches[l],k.identifier==c.el._drag.id){d=k.clientX;e=k.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var m=c.el.node,n=m.nextSibling,p=m.parentNode,q=m.style.display;B.win.opera&&p.removeChild(m);m.style.display="none";l=c.el.paper.getElementByPoint(d,e);m.style.display=q;B.win.opera&&(n?p.insertBefore(m,n):p.appendChild(m));l&&b("raphael.drag.over."+
c.el.id,c.el,l);d+=g;e+=f;b("raphael.drag.move."+c.el.id,c.move_scope||c.el,d-c.el._drag.x,e-c.el._drag.y,d,e,a)}},ub=function(a){c.unmousemove(tb).unmouseup(ub);for(var d,e=pb.length;e--;)d=pb[e],d.el._drag={},b("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,a);pb=[]},oa=c.el={},Wb=L.length;Wb--;)!function(a){c[a]=oa[a]=function(b,d){return c.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:Gb(this.shape||this.node||B.doc,a,b,d||this)})),
this};c["un"+a]=oa["un"+a]=function(b){for(var d=this.events||[],e=d.length;e--;)d[e].name!=a||!c.is(b,"undefined")&&d[e].f!=b||(d[e].unbind(),d.splice(e,1),!d.length&&delete this.events);return this}}(L[Wb]);oa.data=function(a,d){var e=la[this.id]=la[this.id]||{};if(0==arguments.length)return e;if(1==arguments.length){if(c.is(a,"object")){for(var f in a)a[u](f)&&this.data(f,a[f]);return this}return b("raphael.data.get."+this.id,this,e[a],a),e[a]}return e[a]=d,b("raphael.data.set."+this.id,this,d,
a),this};oa.removeData=function(a){return null==a?la[this.id]={}:la[this.id]&&delete la[this.id][a],this};oa.getData=function(){return d(la[this.id]||{})};oa.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)};oa.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var vb=[];oa.drag=function(a,d,e,f,g,h){function k(l){(l.originalEvent||l).preventDefault();var m=l.clientX,n=l.clientY,p=B.doc.documentElement.scrollTop||B.doc.body.scrollTop,q=B.doc.documentElement.scrollLeft||
B.doc.body.scrollLeft;if(this._drag.id=l.identifier,Z&&l.touches)for(var r,t=l.touches.length;t--;)if(r=l.touches[t],this._drag.id=r.identifier,r.identifier==this._drag.id){m=r.clientX;n=r.clientY;break}this._drag.x=m+q;this._drag.y=n+p;!pb.length&&c.mousemove(tb).mouseup(ub);pb.push({el:this,move_scope:f,start_scope:g,end_scope:h});d&&b.on("raphael.drag.start."+this.id,d);a&&b.on("raphael.drag.move."+this.id,a);e&&b.on("raphael.drag.end."+this.id,e);b("raphael.drag.start."+this.id,g||f||this,l.clientX+
q,l.clientY+p,l)}return this._drag={},vb.push({el:this,start:k}),this.mousedown(k),this};oa.onDragOver=function(a){a?b.on("raphael.drag.over."+this.id,a):b.unbind("raphael.drag.over."+this.id)};oa.undrag=function(){for(var a=vb.length;a--;)vb[a].el==this&&(this.unmousedown(vb[a].start),vb.splice(a,1),b.unbind("raphael.drag.*."+this.id));!vb.length&&c.unmousemove(tb).unmouseup(ub);pb=[]};w.circle=function(a,b,d){a=c._engine.circle(this,a||0,b||0,d||0);return this.__set__&&this.__set__.push(a),a};w.rect=
function(a,b,d,e,f){a=c._engine.rect(this,a||0,b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(a),a};w.ellipse=function(a,b,d,e){a=c._engine.ellipse(this,a||0,b||0,d||0,e||0);return this.__set__&&this.__set__.push(a),a};w.path=function(a){a&&!c.is(a,"string")&&!c.is(a[0],V)&&(a+="");var b=c._engine.path(c.format[E](c,arguments),this);return this.__set__&&this.__set__.push(b),b};w.image=function(a,b,d,e,f){a=c._engine.image(this,a||"about:blank",b||0,d||0,e||0,f||0);return this.__set__&&
this.__set__.push(a),a};w.text=function(a,b,d){a=c._engine.text(this,a||0,b||0,H(d));return this.__set__&&this.__set__.push(a),a};w.set=function(a){!c.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new bc(a);return this.__set__&&this.__set__.push(b),b.paper=this,b.type="set",b};w.setStart=function(a){this.__set__=a||this.set()};w.setFinish=function(){var a=this.__set__;return delete this.__set__,a};w.setSize=function(a,b){return c._engine.setSize.call(this,a,b)};
w.setViewBox=function(a,b,d,e,f){return c._engine.setViewBox.call(this,a,b,d,e,f)};w.top=w.bottom=null;w.raphael=c;w.getElementByPoint=function(a,b){var c,d,e=this.canvas,f=B.doc.elementFromPoint(a,b);if(B.win.opera&&"svg"==f.tagName){d=e.getBoundingClientRect();c=e.ownerDocument;var g=c.body,h=c.documentElement;c=d.top+(B.win.pageYOffset||h.scrollTop||g.scrollTop)-(h.clientTop||g.clientTop||0);d=d.left+(B.win.pageXOffset||h.scrollLeft||g.scrollLeft)-(h.clientLeft||g.clientLeft||0);g=e.createSVGRect();
g.x=a-d;g.y=b-c;g.width=g.height=1;c=e.getIntersectionList(g,null);c.length&&(f=c[c.length-1])}if(!f)return null;for(;f.parentNode&&f!=e.parentNode&&!f.raphael;)f=f.parentNode;return f==this.canvas.parentNode&&(f=e),f&&f.raphael?this.getById(f.raphaelid):null};w.getElementsByBBox=function(a){var b=this.set();return this.forEach(function(d){c.isBBoxIntersect(d.getBBox(),a)&&b.push(d)}),b};w.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};w.forEach=function(a,
b){for(var c=this.bottom;c&&!1!==a.call(b,c);)c=c.next;return this};w.getElementsByPoint=function(a,b){var c=this.set();return this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)}),c};oa.isPointInside=function(a,b){var d=this.realPath=ta[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(d=c.transformPath(d,this.attr("transform"))),c.isPointInsidePath(d,a,b)};oa.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=
ta[this.type](this),b.bboxwt=yb(this.realPath),b.bboxwt.toString=l,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=ta[this.type](this)),b.bbox=yb(Ia(this.realPath,this.matrix)),b.bbox.toString=l,b.dirty=b.dirtyT=0),b.bbox)};oa.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a};oa.glow=function(a){if("text"==this.type)return null;a=a||{};var b=(a.width||10)+
(+this.attr("stroke-width")||1),c=a.fill||!1,d=a.opacity||.5,e=a.offsetx||0,f=a.offsety||0;a=a.color||"#000";for(var g=b/2,h=this.paper,k=h.set(),l=this.realPath||ta[this.type](this),l=this.matrix?Ia(l,this.matrix):l,m=1;g+1>m;m++)k.push(h.path(l).attr({stroke:a,fill:c?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/g*m).toFixed(3),opacity:+(d/g).toFixed(3)}));return k.insertBefore(this).translate(e,f)};var wb=function(a,b,d,e,f,g,h,l,n){return null==n?k(a,b,d,e,f,g,
h,l):c.findDotsAtSegment(a,b,d,e,f,g,h,l,m(a,b,d,e,f,g,h,l,n))},Hb=function(a,b){return function(d,e,f){d=ra(d);for(var g,h,k,l,m,n="",p={},q=0,r=0,t=d.length;t>r;r++){if(k=d[r],"M"==k[0])g=+k[1],h=+k[2];else{if(l=wb(g,h,k[1],k[2],k[3],k[4],k[5],k[6]),q+l>e){if(b&&!p.start){if(m=wb(g,h,k[1],k[2],k[3],k[4],k[5],k[6],e-q),n+=["C"+m.start.x,m.start.y,m.m.x,m.m.y,m.x,m.y],f)return n;p.start=n;n=["M"+m.x,m.y+"C"+m.n.x,m.n.y,m.end.x,m.end.y,k[5],k[6]].join();q+=l;g=+k[5];h=+k[6];continue}if(!a&&!b)return m=
wb(g,h,k[1],k[2],k[3],k[4],k[5],k[6],e-q),{x:m.x,y:m.y,alpha:m.alpha}}q+=l;g=+k[5];h=+k[6]}n+=k.shift()+k}return p.end=n,m=a?q:b?p:c.findDotsAtSegment(g,h,k[0],k[1],k[2],k[3],k[4],k[5],1),m.alpha&&(m={x:m.x,y:m.y,alpha:m.alpha}),m}},xb=Hb(1),Ib=Hb(),Pb=Hb(0,1);c.getTotalLength=xb;c.getPointAtLength=Ib;c.getSubpath=function(a,b,c){if(1E-6>this.getTotalLength(a)-c)return Pb(a,b).end;a=Pb(a,c,1);return b?Pb(a,b).end:a};oa.getTotalLength=function(){var a=this.getPath();if(a)return this.node.getTotalLength?
this.node.getTotalLength():xb(a)};oa.getPointAtLength=function(a){var b=this.getPath();if(b)return Ib(b,a)};oa.getPath=function(){var a,b=c._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return b&&(a=b(this)),a};oa.getSubpath=function(a,b){var d=this.getPath();if(d)return c.getSubpath(d,a,b)};var Wa=c.easing_formulas={linear:function(a){return a},"<":function(a){return R(a,1.7)},">":function(a){return R(a,.48)},"<>":function(a){var b=.48-a/1.04,c=Q.sqrt(.1734+b*b);a=c-b;a=R(J(a),1/3)*
(0>a?-1:1);b=-c-b;b=R(J(b),1/3)*(0>b?-1:1);a=a+b+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==!!a?a:R(2,-10*a)*Q.sin(2*(a-.075)*F/.3)+1},bounce:function(a){var b;return 1/2.75>a?b=7.5625*a*a:2/2.75>a?(a-=1.5/2.75,b=7.5625*a*a+.75):2.5/2.75>a?(a-=2.25/2.75,b=7.5625*a*a+.9375):(a-=2.625/2.75,b=7.5625*a*a+.984375),b}};Wa.easeIn=Wa["ease-in"]=Wa["<"];Wa.easeOut=Wa["ease-out"]=Wa[">"];
Wa.easeInOut=Wa["ease-in-out"]=Wa["<>"];Wa["back-in"]=Wa.backIn;Wa["back-out"]=Wa.backOut;var ka=[],sc=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,16)},kc=function(){for(var a=+new Date,d=0;d<ka.length;d++){var e=ka[d];if(!e.el.removed&&!e.paused){var f,g,k=a-e.start,l=e.ms,m=e.easing,n=e.from,p=e.diff,q=e.to,r=(e.t,e.el),t={},s={};if(e.initstatus?(k=(e.initstatus*e.anim.top-e.prev)/
(e.percent-e.prev)*l,e.status=e.initstatus,delete e.initstatus,e.stop&&ka.splice(d--,1)):e.status=(e.prev+k/l*(e.percent-e.prev))/e.anim.top,!(0>k))if(l>k){var v=m(k/l),w;for(w in n)if(n[u](w)){switch(La[w]){case N:f=+n[w]+v*l*p[w];break;case "colour":f="rgb("+[lc(Na(n[w].r+v*l*p[w].r)),lc(Na(n[w].g+v*l*p[w].g)),lc(Na(n[w].b+v*l*p[w].b))].join()+")";break;case "path":f=[];k=0;for(m=n[w].length;m>k;k++){f[k]=[n[w][k][0]];q=1;for(s=n[w][k].length;s>q;q++)f[k][q]=+n[w][k][q]+v*l*p[w][k][q];f[k]=f[k].join(P)}f=
f.join(P);break;case "transform":if(p[w].real)for(f=[],k=0,m=n[w].length;m>k;k++)for(f[k]=[n[w][k][0]],q=1,s=n[w][k].length;s>q;q++)f[k][q]=n[w][k][q]+v*l*p[w][k][q];else f=function(a){return+n[w][a]+v*l*p[w][a]},f=[["m",f(0),f(1),f(2),f(3),f(4),f(5)]];break;case "csv":if("clip-rect"==w)for(f=[],k=4;k--;)f[k]=+n[w][k]+v*l*p[w][k];break;default:for(m=[][O](n[w]),f=[],k=r.paper.customAttributes[w].length;k--;)f[k]=+m[k]+v*l*p[w][k]}t[w]=f}r.attr(t);(function(a,c,d){setTimeout(function(){b("raphael.anim.frame."+
a,c,d)})})(r.id,r,e.anim)}else{if(function(a,d,e){setTimeout(function(){b("raphael.anim.frame."+d.id,d,e);b("raphael.anim.finish."+d.id,d,e);c.is(a,"function")&&a.call(d)})}(e.callback,r,e.anim),r.attr(q),ka.splice(d--,1),1<e.repeat&&!e.next){for(g in q)q[u](g)&&(s[g]=e.totalOrigin[g]);e.el.attr(s);h(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&h(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}c.svg&&r&&r.paper&&r.paper.safari();ka.length&&sc(kc)},lc=function(a){return 255<
a?255:0>a?0:a};oa.animateWith=function(a,b,d,e,f,g){if(this.removed)return g&&g.call(this),this;d=d instanceof s?d:c.animation(d,e,f,g);h(d,this,d.percents[0],null,this.attr());d=0;for(e=ka.length;e>d;d++)if(ka[d].anim==b&&ka[d].el==a){ka[e-1].start=ka[d].start;break}return this};oa.onAnimation=function(a){return a?b.on("raphael.anim.frame."+this.id,a):b.unbind("raphael.anim.frame."+this.id),this};s.prototype.delay=function(a){var b=new s(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b};
s.prototype.repeat=function(a){var b=new s(this.anim,this.ms);return b.del=this.del,b.times=Q.floor(T(a,0))||1,b};c.animation=function(a,b,d,e){if(a instanceof s)return a;(c.is(d,"function")||!d)&&(e=e||d||null,d=null);a=Object(a);b=+b||0;var f,g,h={};for(g in a)a[u](g)&&ha(g)!=g&&ha(g)+"%"!=g&&(f=!0,h[g]=a[g]);return f?(d&&(h.easing=d),e&&(h.callback=e),new s({100:h},b)):new s(a,b)};oa.animate=function(a,b,d,e){if(this.removed)return e&&e.call(this),this;a=a instanceof s?a:c.animation(a,b,d,e);return h(a,
this,a.percents[0],null,this.attr()),this};oa.setTime=function(a,b){return a&&null!=b&&this.status(a,X(b,a.ms)/a.ms),this};oa.status=function(a,b){var c,d,e=[],f=0;if(null!=b)return h(a,this,-1,X(b,1)),this;for(c=ka.length;c>f;f++)if(d=ka[f],d.el.id==this.id&&(!a||d.anim==a)){if(a)return d.status;e.push({anim:d.anim,status:d.status})}return a?0:e};oa.pause=function(a){for(var c=0;c<ka.length;c++)ka[c].el.id!=this.id||a&&ka[c].anim!=a||!1!==b("raphael.anim.pause."+this.id,this,ka[c].anim)&&(ka[c].paused=
!0);return this};oa.resume=function(a){for(var c=0;c<ka.length;c++)if(ka[c].el.id==this.id&&(!a||ka[c].anim==a)){var d=ka[c];!1!==b("raphael.anim.resume."+this.id,this,d.anim)&&(delete d.paused,this.status(d.anim,d.status))}return this};oa.stop=function(a){for(var c=0;c<ka.length;c++)ka[c].el.id!=this.id||a&&ka[c].anim!=a||!1!==b("raphael.anim.stop."+this.id,this,ka[c].anim)&&ka.splice(c--,1);return this};b.on("raphael.remove",t);b.on("raphael.clear",t);oa.toString=function(){return"Rapha\u00ebl\u2019s object"};
var bc=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)!a[b]||a[b].constructor!=oa.constructor&&a[b].constructor!=bc||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},$a=bc.prototype;$a.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)a=arguments[c],!a||a.constructor!=oa.constructor&&a.constructor!=bc||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this};$a.pop=function(){return this.length&&delete this[this.length--],
this.items.pop()};$a.forEach=function(a,b){for(var c=0,d=this.items.length;d>c&&!1!==a.call(b,this.items[c],c);c++);return this};for(var mc in oa)oa[u](mc)&&($a[mc]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][E](c,b)})}}(mc));return $a.attr=function(a,b){if(a&&c.is(a,V)&&c.is(a[0],"object"))for(var d=0,e=a.length;e>d;d++)this.items[d].attr(a[d]);else for(d=0,e=this.items.length;e>d;d++)this.items[d].attr(a,b);return this},$a.clear=function(){for(;this.length;)this.pop()},
$a.splice=function(a,b){a=0>a?T(this.length+a,0):a;b=T(0,X(this.length-a,b));var c,d=[],e=[],f=[];for(c=2;c<arguments.length;c++)f.push(arguments[c]);for(c=0;b>c;c++)e.push(this[a+c]);for(;c<this.length-a;c++)d.push(this[a+c]);var g=f.length;for(c=0;c<g+d.length;c++)this.items[a+c]=this[a+c]=g>c?f[c]:d[c-g];for(c=this.items.length=this.length-=b-g;this[c];)delete this[c++];return new bc(e)},$a.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},$a.animate=
function(a,b,d,e){!c.is(d,"function")&&d||(e=d||null);var f,g=this.items.length,h=g,k=this;if(!g)return this;e&&(f=function(){!--g&&e.call(k)});d=c.is(d,"string")?d:f;b=c.animation(a,b,d,f);for(a=this.items[--h].animate(b);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(a,b,b),this.items[h]&&!this.items[h].removed||g--;return this},$a.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},$a.getBBox=function(){for(var a=[],b=[],c=[],
d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x);b.push(f.y);c.push(f.x+f.width);d.push(f.y+f.height)}return a=X[E](0,a),b=X[E](0,b),c=T[E](0,c),d=T[E](0,d),{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},$a.clone=function(a){a=this.paper.set();for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},$a.toString=function(){return"Rapha\u00ebl\u2018s set"},$a.glow=function(a){var b=this.paper.set();return this.forEach(function(c){c=
c.glow(a);null!=c&&c.forEach(function(a){b.push(a)})}),b},$a.isPointInside=function(a,b){var c=!1;return this.forEach(function(d){return d.isPointInside(a,b)?(c=!0,!1):void 0}),c},c.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"],d;for(d in a.face)a.face[u](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=Pa(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[u](e)&&
(c=a.glyphs[e],b.glyphs[e]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},c.k))for(var f in c.k)c[u](f)&&(b.glyphs[e].k[f]=c.k[f])}return a},w.getFont=function(a,b,d,e){if(e=e||"normal",d=d||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400,c.fonts){var f=c.fonts[a];if(!f){a=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var g in c.fonts)if(c.fonts[u](g)&&a.test(g)){f=c.fonts[g];break}}var h;
if(f)for(g=0,a=f.length;a>g&&(h=f[g],h.face["font-weight"]!=b||h.face["font-style"]!=d&&h.face["font-style"]||h.face["font-stretch"]!=e);g++);return h}},w.print=function(a,b,d,e,f,g,h,k){g=g||"middle";h=T(X(h||0,1),-1);k=T(X(k||1,3),1);d=H(d)[K]("");var l=0,m=0,n="";if(c.is(e,"string")&&(e=this.getFont(e)),e){f=(f||16)/e.face["units-per-em"];var p=e.face.bbox[K](x),q=+p[0],r=p[3]-p[1],t=0;g=+p[1]+("baseline"==g?r+ +e.face.descent:r/2);for(var p=0,s=d.length;s>p;p++){if("\n"==d[p])m=v=l=0,t+=r*k;else var u=
m&&e.glyphs[d[p-1]]||{},v=e.glyphs[d[p]],l=l+(m?(u.w||e.w)+(u.k&&u.k[d[p]]||0)+e.w*h:0),m=1;v&&v.d&&(n+=c.transformPath(v.d,["t",l*f,t*f,"s",f,f,q,g,"t",(a-q)/f,(b-g)/f]))}}return this.path(n).attr({fill:"#000",stroke:"none"})},w.add=function(a){if(c.is(a,"array"))for(var b,d=this.set(),e=0,f=a.length;f>e;e++)b=a[e]||{},A[u](b.type)&&d.push(this[b.type]().attr(b));return d},c.format=function(a,b){var d=c.is(b,V)?[0][O](b):arguments;return a&&c.is(a,"string")&&d.length-1&&(a=a.replace(y,function(a,
b){return null==d[++b]?"":d[b]})),a||""},c.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d;e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),c.ninja=function(){return C?B.win.Raphael=z:delete Raphael,c},c.st=$a,function(a,b,d){function e(){/in/.test(a.readyState)?
setTimeout(e,9):c.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,d=function(){a.removeEventListener(b,d,!1);a.readyState="complete"},!1),a.readyState="loading");e()}(document,"DOMContentLoaded"),b.on("raphael.DOMload",function(){v=!0}),function(){if(c.svg){var a=String,b=parseFloat,d=parseInt,e=Math,f=e.max,g=e.abs,h=e.pow,k=/[, ]+/,l=c.eve,m={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",
oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},n={};c.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var p=function(b,d){if(d){"string"==typeof b&&(b=p(b));for(var e in d)d.hasOwnProperty(e)&&("xlink:"==e.substring(0,6)?b.setAttributeNS("http://www.w3.org/1999/xlink",e.substring(6),a(d[e])):b.setAttribute(e,a(d[e])))}else b=c._g.doc.createElementNS("http://www.w3.org/2000/svg",b),b.style&&(b.style.webkitTapHighlightColor="rgba(0,0,0,0)");
return b},q=function(d,k){var l="linear",m=d.id+k,n=.5,q=.5,r=d.node,t=d.paper,s=r.style,u=c._g.doc.getElementById(m);if(!u){if(k=a(k).replace(c._radial_gradient,function(a,c,d){if(l="radial",c&&d)n=b(c),q=b(d),a=2*(.5<q)-1,.25<h(n-.5,2)+h(q-.5,2)&&(q=e.sqrt(.25-h(n-.5,2))*a+.5)&&.5!=q&&(q=q.toFixed(5)-1E-5*a);return""}),k=k.split(/\s*\-\s*/),"linear"==l){u=k.shift();if(u=-b(u),isNaN(u))return null;var v=[0,0,e.cos(c.rad(u)),e.sin(c.rad(u))],u=1/(f(g(v[2]),g(v[3]))||1);v[2]*=u;v[3]*=u;0>v[2]&&(v[0]=
-v[2],v[2]=0);0>v[3]&&(v[1]=-v[3],v[3]=0)}var w=c._parseDots(k);if(!w)return null;if(m=m.replace(/[\(\)\s,\xb0#]/g,"_"),d.gradient&&m!=d.gradient.id&&(t.defs.removeChild(d.gradient),delete d.gradient),!d.gradient)for(u=p(l+"Gradient",{id:m}),d.gradient=u,p(u,"radial"==l?{fx:n,fy:q}:{x1:v[0],y1:v[1],x2:v[2],y2:v[3],gradientTransform:d.matrix.invert()}),t.defs.appendChild(u),t=0,v=w.length;v>t;t++)u.appendChild(p("stop",{offset:w[t].offset?w[t].offset:t?"100%":"0%","stop-color":w[t].color||"#fff"}))}return p(r,
{fill:"url(#"+m+")",opacity:1,"fill-opacity":1}),s.fill="",s.opacity=1,s.fillOpacity=1,1},r=function(a){var b=a.getBBox(1);p(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(b,d,e){if("path"==b.type){for(var f,g,h,k,l,q=a(d).toLowerCase().split("-"),r=b.paper,t=e?"end":"start",s=b.node,u=b.attrs,v=u["stroke-width"],w=q.length,x="classic",y=3,z=3,C=5;w--;)switch(q[w]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":x=q[w];break;
case "wide":z=5;break;case "narrow":z=2;break;case "long":y=5;break;case "short":y=2}if("open"==x?(y+=2,z+=2,C+=2,h=1,k=e?4:1,l={fill:"none",stroke:u.stroke}):(k=h=y/2,l={fill:u.stroke,stroke:"none"}),b._.arrows?e?(b._.arrows.endPath&&n[b._.arrows.endPath]--,b._.arrows.endMarker&&n[b._.arrows.endMarker]--):(b._.arrows.startPath&&n[b._.arrows.startPath]--,b._.arrows.startMarker&&n[b._.arrows.startMarker]--):b._.arrows={},"none"!=x){q="raphael-marker-"+x;w="raphael-marker-"+t+x+y+z;c._g.doc.getElementById(q)?
n[q]++:(r.defs.appendChild(p(p("path"),{"stroke-linecap":"round",d:m[x],id:q})),n[q]=1);var A,B=c._g.doc.getElementById(w);B?(n[w]++,A=B.getElementsByTagName("use")[0]):(B=p(p("marker"),{id:w,markerHeight:z,markerWidth:y,orient:"auto",refX:k,refY:z/2}),A=p(p("use"),{"xlink:href":"#"+q,transform:(e?"rotate(180 "+y/2+" "+z/2+") ":"")+"scale("+y/C+","+z/C+")","stroke-width":(1/((y/C+z/C)/2)).toFixed(4)}),B.appendChild(A),r.defs.appendChild(B),n[w]=1);p(A,l);h*="diamond"!=x&&"oval"!=x;e?(f=b._.arrows.startdx*
v||0,g=c.getTotalLength(u.path)-h*v):(f=h*v,g=c.getTotalLength(u.path)-(b._.arrows.enddx*v||0));l={};l["marker-"+t]="url(#"+w+")";(g||f)&&(l.d=c.getSubpath(u.path,f,g));p(s,l);b._.arrows[t+"Path"]=q;b._.arrows[t+"Marker"]=w;b._.arrows[t+"dx"]=h;b._.arrows[t+"Type"]=x;b._.arrows[t+"String"]=d}else e?(f=b._.arrows.startdx*v||0,g=c.getTotalLength(u.path)-f):(f=0,g=c.getTotalLength(u.path)-(b._.arrows.enddx*v||0)),b._.arrows[t+"Path"]&&p(s,{d:c.getSubpath(u.path,f,g)}),delete b._.arrows[t+"Path"],delete b._.arrows[t+
"Marker"],delete b._.arrows[t+"dx"],delete b._.arrows[t+"Type"],delete b._.arrows[t+"String"];for(l in n)n.hasOwnProperty(l)&&!n[l]&&(b=c._g.doc.getElementById(l))&&b.parentNode.removeChild(b)}},s={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},u=function(b,c,d){if(c=s[a(c).toLowerCase()]){var e=b.attrs["stroke-width"]||"1";d={round:e,square:e,butt:0}[b.attrs["stroke-linecap"]||d["stroke-linecap"]]||
0;for(var f=[],g=c.length;g--;)f[g]=c[g]*e+(g%2?1:-1)*d;p(b.node,{"stroke-dasharray":f.join(",")})}},v=function(b,e){var h=b.node,l=b.attrs,m=h.style.visibility;h.style.visibility="hidden";for(var n in e)if(e.hasOwnProperty(n)&&c._availableAttrs.hasOwnProperty(n)){var s=e[n];switch(l[n]=s,n){case "blur":b.blur(s);break;case "title":var v=h.getElementsByTagName("title");v.length&&(v=v[0])?v.firstChild.nodeValue=s:(v=p("title"),s=c._g.doc.createTextNode(s),v.appendChild(s),h.appendChild(v));break;case "href":case "target":v=
h.parentNode;if("a"!=v.tagName.toLowerCase()){var x=p("a");v.insertBefore(x,h);x.appendChild(h);v=x}"target"==n?v.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==s?"new":s):v.setAttributeNS("http://www.w3.org/1999/xlink",n,s);break;case "cursor":h.style.cursor=s;break;case "transform":b.transform(s);break;case "arrow-start":t(b,s);break;case "arrow-end":t(b,s,1);break;case "clip-rect":v=a(s).split(k);if(4==v.length){b.clip&&b.clip.parentNode.parentNode.removeChild(b.clip.parentNode);
var x=p("clipPath"),y=p("rect");x.id=c.createUUID();p(y,{x:v[0],y:v[1],width:v[2],height:v[3]});x.appendChild(y);b.paper.defs.appendChild(x);p(h,{"clip-path":"url(#"+x.id+")"});b.clip=y}!s&&(s=h.getAttribute("clip-path"))&&((s=c._g.doc.getElementById(s.replace(/(^url\(#|\)$)/g,"")))&&s.parentNode.removeChild(s),p(h,{"clip-path":""}),delete b.clip);break;case "path":"path"==b.type&&(p(h,{d:s?l.path=c._pathToAbsolute(s):"M0,0"}),b._.dirty=1,b._.arrows&&("startString"in b._.arrows&&t(b,b._.arrows.startString),
"endString"in b._.arrows&&t(b,b._.arrows.endString,1)));break;case "width":if(h.setAttribute(n,s),b._.dirty=1,!l.fx)break;n="x";s=l.x;case "x":l.fx&&(s=-l.x-(l.width||0));case "rx":if("rx"==n&&"rect"==b.type)break;case "cx":h.setAttribute(n,s);b.pattern&&r(b);b._.dirty=1;break;case "height":if(h.setAttribute(n,s),b._.dirty=1,!l.fy)break;n="y";s=l.y;case "y":l.fy&&(s=-l.y-(l.height||0));case "ry":if("ry"==n&&"rect"==b.type)break;case "cy":h.setAttribute(n,s);b.pattern&&r(b);b._.dirty=1;break;case "r":"rect"==
b.type?p(h,{rx:s,ry:s}):h.setAttribute(n,s);b._.dirty=1;break;case "src":"image"==b.type&&h.setAttributeNS("http://www.w3.org/1999/xlink","href",s);break;case "stroke-width":1==b._.sx&&1==b._.sy||(s/=f(g(b._.sx),g(b._.sy))||1);b.paper._vbSize&&(s*=b.paper._vbSize);h.setAttribute(n,s);l["stroke-dasharray"]&&u(b,l["stroke-dasharray"],e);b._.arrows&&("startString"in b._.arrows&&t(b,b._.arrows.startString),"endString"in b._.arrows&&t(b,b._.arrows.endString,1));break;case "stroke-dasharray":u(b,s,e);break;
case "fill":var z=a(s).match(c._ISURL);if(z){var x=p("pattern"),C=p("image");x.id=c.createUUID();p(x,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});p(C,{x:0,y:0,"xlink:href":z[1]});x.appendChild(C);(function(a){c._preload(z[1],function(){var c=this.offsetWidth,d=this.offsetHeight;p(a,{width:c,height:d});p(C,{width:c,height:d});b.paper.safari()})})(x);b.paper.defs.appendChild(x);p(h,{fill:"url(#"+x.id+")"});b.pattern=x;b.pattern&&r(b);break}v=c.getRGB(s);if(v.error){if(("circle"==b.type||
"ellipse"==b.type||"r"!=a(s).charAt())&&q(b,s)){if("opacity"in l||"fill-opacity"in l)if(v=c._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,""))){var A=v.getElementsByTagName("stop");p(A[A.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}l.gradient=s;l.fill="none";break}}else delete e.gradient,delete l.gradient,!c.is(l.opacity,"undefined")&&c.is(e.opacity,"undefined")&&p(h,{opacity:l.opacity}),!c.is(l["fill-opacity"],"undefined")&&
c.is(e["fill-opacity"],"undefined")&&p(h,{"fill-opacity":l["fill-opacity"]});v.hasOwnProperty("opacity")&&p(h,{"fill-opacity":1<v.opacity?v.opacity/100:v.opacity});case "stroke":v=c.getRGB(s);h.setAttribute(n,v.hex);"stroke"==n&&v.hasOwnProperty("opacity")&&p(h,{"stroke-opacity":1<v.opacity?v.opacity/100:v.opacity});"stroke"==n&&b._.arrows&&("startString"in b._.arrows&&t(b,b._.arrows.startString),"endString"in b._.arrows&&t(b,b._.arrows.endString,1));break;case "gradient":"circle"!=b.type&&"ellipse"!=
b.type&&"r"==a(s).charAt()||q(b,s);break;case "opacity":l.gradient&&!l.hasOwnProperty("stroke-opacity")&&p(h,{"stroke-opacity":1<s?s/100:s});case "fill-opacity":if(l.gradient){(v=c._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,"")))&&(A=v.getElementsByTagName("stop"),p(A[A.length-1],{"stop-opacity":s}));break}default:"font-size"==n&&(s=d(s,10)+"px"),v=n.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()}),h.style[v]=s,b._.dirty=1,h.setAttribute(n,s)}}w(b,e);h.style.visibility=
m},w=function(b,e){if("text"==b.type&&(e.hasOwnProperty("text")||e.hasOwnProperty("font")||e.hasOwnProperty("font-size")||e.hasOwnProperty("x")||e.hasOwnProperty("y"))){var f=b.attrs,g=b.node,h=g.firstChild?d(c._g.doc.defaultView.getComputedStyle(g.firstChild,"").getPropertyValue("font-size"),10):10;if(e.hasOwnProperty("text")){for(f.text=e.text;g.firstChild;)g.removeChild(g.firstChild);for(var k,l=a(e.text).split("\n"),m=[],n=0,q=l.length;q>n;n++)k=p("tspan"),n&&p(k,{dy:1.2*h,x:f.x}),k.appendChild(c._g.doc.createTextNode(l[n])),
g.appendChild(k),m[n]=k}else for(m=g.getElementsByTagName("tspan"),n=0,q=m.length;q>n;n++)n?p(m[n],{dy:1.2*h,x:f.x}):p(m[0],{dy:0});p(g,{x:f.x,y:f.y});b._.dirty=1;g=b._getBBox();(f=f.y-(g.y+g.height/2))&&c.is(f,"finite")&&p(m[0],{dy:f})}},x=function(a,b){this[0]=this.node=a;a.raphael=!0;this.id=c._oid++;a.raphaelid=this.id;this.matrix=c.matrix();this.realPath=null;this.paper=b;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&
(b.top.next=this);b.top=this;this.next=null},y=c.el;x.prototype=y;y.constructor=x;c._engine.path=function(a,b){var c=p("path");b.canvas&&b.canvas.appendChild(c);c=new x(c,b);return c.type="path",v(c,{fill:"none",stroke:"#000",path:a}),c};y.rotate=function(c,d,e){if(this.removed)return this;if(c=a(c).split(k),c.length-1&&(d=b(c[1]),e=b(c[2])),c=b(c[0]),null==e&&(d=e),null==d||null==e)e=this.getBBox(1),d=e.x+e.width/2,e=e.y+e.height/2;return this.transform(this._.transform.concat([["r",c,d,e]])),this};
y.scale=function(c,d,e,f){if(this.removed)return this;if(c=a(c).split(k),c.length-1&&(d=b(c[1]),e=b(c[2]),f=b(c[3])),c=b(c[0]),null==d&&(d=c),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",c,d,e,f]])),this};y.translate=function(c,d){return this.removed?this:(c=a(c).split(k),c.length-1&&(d=b(c[1])),c=b(c[0])||0,d=+d||0,this.transform(this._.transform.concat([["t",c,d]])),this)};y.transform=
function(a){var b=this._;if(null==a)return b.transform;if(c._extractTransform(this,a),this.clip&&p(this.clip,{transform:this.matrix.invert()}),this.pattern&&r(this),this.node&&p(this.node,{transform:this.matrix}),1!=b.sx||1!=b.sy)a=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":a});return this};y.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this};y.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=
""),this};y.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this);l.unbind("raphael.*.*."+this.id);this.gradient&&a.defs.removeChild(this.gradient);c._tear(this,a);"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var b in this)this[b]="function"==typeof this[b]?c._removedFactory(b):null;this.removed=!0}};y._getBBox=function(){if("none"==
this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b};y.attr=function(a,b){if(this.removed)return this;if(null==a){var d={},e;for(e in this.attrs)this.attrs.hasOwnProperty(e)&&(d[e]=this.attrs[e]);return d.gradient&&"none"==d.fill&&(d.fill=d.gradient)&&delete d.gradient,d.transform=this._.transform,d}if(null==b&&c.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==
a)return this._.transform;e=a.split(k);for(var d={},f=0,g=e.length;g>f;f++)a=e[f],d[a]=a in this.attrs?this.attrs[a]:c.is(this.paper.customAttributes[a],"function")?this.paper.customAttributes[a].def:c._availableAttrs[a];return g-1?d:d[e[0]]}if(null==b&&c.is(a,"array")){d={};f=0;for(g=a.length;g>f;f++)d[a[f]]=this.attr(a[f]);return d}null!=b?(d={},d[a]=b):null!=a&&c.is(a,"object")&&(d=a);for(f in d)l("raphael.attr."+f+"."+this.id,this,d[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(f)&&
d.hasOwnProperty(f)&&c.is(this.paper.customAttributes[f],"function"))for(g in e=this.paper.customAttributes[f].apply(this,[].concat(d[f])),this.attrs[f]=d[f],e)e.hasOwnProperty(g)&&(d[g]=e[g]);return v(this,d),this};y.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;return a.top!=this&&c._tofront(this,a),this};y.toBack=function(){if(this.removed)return this;
var a=this.node.parentNode;"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild);c._toback(this,this.paper);this.paper;return this};y.insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;return b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node),c._insertafter(this,a,this.paper),
this};y.insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;return b.parentNode.insertBefore(this.node,b),c._insertbefore(this,a,this.paper),this};y.blur=function(a){if(0!==+a){var b=p("filter"),d=p("feGaussianBlur");this.attrs.blur=a;b.id=c.createUUID();p(d,{stdDeviation:+a||1.5});b.appendChild(d);this.paper.defs.appendChild(b);this._blur=b;p(this.node,{filter:"url(#"+b.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),
this.node.removeAttribute("filter");return this};c._engine.circle=function(a,b,c,d){var e=p("circle");a.canvas&&a.canvas.appendChild(e);a=new x(e,a);return a.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},a.type="circle",p(e,a.attrs),a};c._engine.rect=function(a,b,c,d,e,f){var g=p("rect");a.canvas&&a.canvas.appendChild(g);a=new x(g,a);return a.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},a.type="rect",p(g,a.attrs),a};c._engine.ellipse=function(a,b,c,d,e){var f=
p("ellipse");a.canvas&&a.canvas.appendChild(f);a=new x(f,a);return a.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},a.type="ellipse",p(f,a.attrs),a};c._engine.image=function(a,b,c,d,e,f){var g=p("image");p(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"});g.setAttributeNS("http://www.w3.org/1999/xlink","href",b);a.canvas&&a.canvas.appendChild(g);a=new x(g,a);return a.attrs={x:c,y:d,width:e,height:f,src:b},a.type="image",a};c._engine.text=function(a,b,d,e){var f=p("text");a.canvas&&a.canvas.appendChild(f);
a=new x(f,a);return a.attrs={x:b,y:d,"text-anchor":"middle",text:e,font:c._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",v(a,a.attrs),a};c._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this};c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a&&a.container,d=a.x,e=a.y,f=a.width,
a=a.height;if(!b)throw Error("SVG container not found.");var g,h=p("svg");return d=d||0,e=e||0,f=f||512,a=a||342,p(h,{height:a,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),1==b?(h.style.cssText="overflow:hidden;position:absolute;left:"+d+"px;top:"+e+"px",c._g.doc.body.appendChild(h),g=1):(h.style.cssText="overflow:hidden;position:relative",b.firstChild?b.insertBefore(h,b.firstChild):b.appendChild(h)),b=new c._Paper,b.width=f,b.height=a,b.canvas=h,b.clear(),b._left=b._top=0,g&&(b.renderfix=
function(){}),b.renderfix(),b};c._engine.setViewBox=function(a,b,c,d,e){l("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var g,h=f(c/this.width,d/this.height),k=this.top,m=e?"xMidYMid meet":"xMinYMin";null==a?(this._vbSize&&(h=1),delete this._vbSize,g="0 0 "+this.width+" "+this.height):(this._vbSize=h,g=a+" "+b+" "+c+" "+d);for(p(this.canvas,{viewBox:g,preserveAspectRatio:m});h&&k;)g="stroke-width"in k.attrs?k.attrs["stroke-width"]:1,k.attr({"stroke-width":g}),k._.dirty=1,k._.dirtyT=1,k=k.prev;
return this._viewBox=[a,b,c,d,!!e],this};c.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}b=-a.e%1;a=-a.f%1;(b||a)&&(b&&(this._left=(this._left+b)%1,c.left=this._left+"px"),a&&(this._top=(this._top+a)%1,c.top=this._top+"px"))};c.prototype.clear=function(){c.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=p("desc")).appendChild(c._g.doc.createTextNode("Created with Rapha\u00ebl "+
c.version));a.appendChild(this.desc);a.appendChild(this.defs=p("defs"))};c.prototype.remove=function(){l("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null};var z=c.st,C;for(C in y)y.hasOwnProperty(C)&&!z.hasOwnProperty(C)&&(z[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}}(),function(){if(c.vml){var a=String,b=parseFloat,
d=Math,e=d.round,f=d.max,g=d.min,h=d.abs,k=/[, ]+/,l=c.eve,m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},n=/([clmz]),?([^clmz]*)/gi,p=/ progid:\S+Blur\([^\)]+\)/g,q=/-?[^,\s-]+/g,r={path:1,rect:1,image:1},s={circle:1,ellipse:1},t=function(b){var d=/[ahqstv]/gi,f=c._pathToAbsolute;if(a(b).match(d)&&(f=c._path2curve),d=/[clmz]/g,f==c._pathToAbsolute&&!a(b).match(d))return b=a(b).replace(n,function(a,b,c){var d=[],f="m"==b.toLowerCase(),g=m[b];return c.replace(q,function(a){f&&2==d.length&&(g+=
d+m["m"==b?"l":"L"],d=[]);d.push(e(21600*a))}),g+d});var g=f(b);b=[];for(var h=0,k=g.length;k>h;h++){d=g[h];f=g[h][0].toLowerCase();"z"==f&&(f="x");for(var l=1,p=d.length;p>l;l++)f+=e(21600*d[l])+(l!=p-1?",":"");b.push(f)}return b.join(" ")},v=function(a,b,d){var e=c.matrix();return e.rotate(-a,.5,.5),{dx:e.x(b,d),dy:e.y(b,d)}},u=function(a,b,c,d,e,f){var g=a._,k=a.matrix,l=g.fillpos;a=a.node;var m=a.style,n=1,p="",q=21600/b,r=21600/c;if(m.visibility="hidden",b&&c){if(a.coordsize=h(q)+" "+h(r),m.rotation=
f*(0>b*c?-1:1),f){var s=v(f,d,e);d=s.dx;e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(n=-1),m.flip=p,a.coordorigin=d*-q+" "+e*-r,l||g.fillsize)d=(d=a.getElementsByTagName("fill"))&&d[0],a.removeChild(d),l&&(s=v(f,k.x(l[0],l[1]),k.y(l[0],l[1])),d.position=s.dx*n+" "+s.dy*n),g.fillsize&&(d.size=g.fillsize[0]*h(b)+" "+g.fillsize[1]*h(c)),a.appendChild(d);m.visibility="visible"}};c.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};
var w=function(b,c,d){c=a(c).toLowerCase().split("-");d=d?"end":"start";for(var e=c.length,f="classic",g="medium",h="medium";e--;)switch(c[e]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":f=c[e];break;case "wide":case "narrow":h=c[e];break;case "long":case "short":g=c[e]}b=b.node.getElementsByTagName("stroke")[0];b[d+"arrow"]=f;b[d+"arrowlength"]=g;b[d+"arrowwidth"]=h},x=function(d,h){d.attrs=d.attrs||{};var l=d.node,m=d.attrs,n=l.style,p=r[d.type]&&(h.x!=m.x||h.y!=
m.y||h.width!=m.width||h.height!=m.height||h.cx!=m.cx||h.cy!=m.cy||h.rx!=m.rx||h.ry!=m.ry||h.r!=m.r),q=s[d.type]&&(m.cx!=h.cx||m.cy!=h.cy||m.r!=h.r||m.rx!=h.rx||m.ry!=h.ry),v;for(v in h)h.hasOwnProperty(v)&&(m[v]=h[v]);if(p&&(m.path=c._getPath[d.type](d),d._.dirty=1),h.href&&(l.href=h.href),h.title&&(l.title=h.title),h.target&&(l.target=h.target),h.cursor&&(n.cursor=h.cursor),"blur"in h&&d.blur(h.blur),(h.path&&"path"==d.type||p)&&(l.path=t(~a(m.path).toLowerCase().indexOf("r")?c._pathToAbsolute(m.path):
m.path),"image"==d.type&&(d._.fillpos=[m.x,m.y],d._.fillsize=[m.width,m.height],u(d,1,1,0,0,0))),"transform"in h&&d.transform(h.transform),q)n=+m.cx,p=+m.cy,q=+m.rx||+m.r||0,v=+m.ry||+m.r||0,l.path=c.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",e(21600*(n-q)),e(21600*(p-v)),e(21600*(n+q)),e(21600*(p+v)),e(21600*n)),d._.dirty=1;"clip-rect"in h&&(n=a(h["clip-rect"]).split(k),4==n.length&&(n[2]=+n[2]+ +n[0],n[3]=+n[3]+ +n[1],p=l.clipRect||c._g.doc.createElement("div"),q=p.style,q.clip=c.format("rect({1}px {2}px {3}px {0}px)",
n),l.clipRect||(q.position="absolute",q.top=0,q.left=0,q.width=d.paper.width+"px",q.height=d.paper.height+"px",l.parentNode.insertBefore(p,l),p.appendChild(l),l.clipRect=p)),h["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto"));d.textpath&&(n=d.textpath.style,h.font&&(n.font=h.font),h["font-family"]&&(n.fontFamily='"'+h["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),h["font-size"]&&(n.fontSize=h["font-size"]),h["font-weight"]&&(n.fontWeight=h["font-weight"]),h["font-style"]&&
(n.fontStyle=h["font-style"]));if("arrow-start"in h&&w(d,h["arrow-start"]),"arrow-end"in h&&w(d,h["arrow-end"],1),null!=h.opacity||null!=h["stroke-width"]||null!=h.fill||null!=h.src||null!=h.stroke||null!=h["stroke-width"]||null!=h["stroke-opacity"]||null!=h["fill-opacity"]||null!=h["stroke-dasharray"]||null!=h["stroke-miterlimit"]||null!=h["stroke-linejoin"]||null!=h["stroke-linecap"]){n=l.getElementsByTagName("fill");if(n=n&&n[0],!n&&(n=A("fill")),"image"==d.type&&h.src&&(n.src=h.src),h.fill&&(n.on=
!0),(null==n.on||"none"==h.fill||null===h.fill)&&(n.on=!1),n.on&&h.fill)(p=a(h.fill).match(c._ISURL))?(n.parentNode==l&&l.removeChild(n),n.rotate=!0,n.src=p[1],n.type="tile",q=d.getBBox(1),n.position=q.x+" "+q.y,d._.fillpos=[q.x,q.y],c._preload(p[1],function(){d._.fillsize=[this.offsetWidth,this.offsetHeight]})):(n.color=c.getRGB(h.fill).hex,n.src="",n.type="solid",c.getRGB(h.fill).error&&(d.type in{circle:1,ellipse:1}||"r"!=a(h.fill).charAt())&&y(d,h.fill,n)&&(m.fill="none",m.gradient=h.fill,n.rotate=
!1));if("fill-opacity"in h||"opacity"in h)q=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+c.getRGB(h.fill).o+1||2)-1),q=g(f(q,0),1),n.opacity=q,n.src&&(n.color="none");l.appendChild(n);n=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0];p=!1;!n&&(p=n=A("stroke"));(h.stroke&&"none"!=h.stroke||h["stroke-width"]||null!=h["stroke-opacity"]||h["stroke-dasharray"]||h["stroke-miterlimit"]||h["stroke-linejoin"]||h["stroke-linecap"])&&(n.on=!0);"none"!=h.stroke&&null!==h.stroke&&
null!=n.on&&0!=h.stroke&&0!=h["stroke-width"]||(n.on=!1);q=c.getRGB(h.stroke);n.on&&h.stroke&&(n.color=q.hex);q=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+q.o+1||2)-1);v=.75*(b(h["stroke-width"])||1);if(q=g(f(q,0),1),null==h["stroke-width"]&&(v=m["stroke-width"]),h["stroke-width"]&&(n.weight=v),v&&1>v&&(q*=v)&&(n.weight=1),n.opacity=q,h["stroke-linejoin"]&&(n.joinstyle=h["stroke-linejoin"]||"miter"),n.miterlimit=h["stroke-miterlimit"]||8,h["stroke-linecap"]&&(n.endcap="butt"==h["stroke-linecap"]?
"flat":"square"==h["stroke-linecap"]?"square":"round"),"stroke-dasharray"in h)q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},n.dashstyle=q.hasOwnProperty(h["stroke-dasharray"])?q[h["stroke-dasharray"]]:"";p&&l.appendChild(n)}if("text"==d.type){d.paper.canvas.style.display="";l=d.paper.span;p=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);n=l.style;m.font&&(n.font=m.font);
m["font-family"]&&(n.fontFamily=m["font-family"]);m["font-weight"]&&(n.fontWeight=m["font-weight"]);m["font-style"]&&(n.fontStyle=m["font-style"]);p=b(m["font-size"]||p&&p[0])||10;n.fontSize=100*p+"px";d.textpath.string&&(l.innerHTML=a(d.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));l=l.getBoundingClientRect();d.W=m.w=(l.right-l.left)/100;d.H=m.h=(l.bottom-l.top)/100;d.X=m.x;d.Y=m.y+d.H/2;("x"in h||"y"in h)&&(d.path.v=c.format("m{0},{1}l{2},{1}",e(21600*m.x),
e(21600*m.y),e(21600*m.x)+1));l="x y text font font-family font-weight font-style font-size".split(" ");n=0;for(p=l.length;p>n;n++)if(l[n]in h){d._.dirty=1;break}switch(m["text-anchor"]){case "start":d.textpath.style["v-text-align"]="left";d.bbx=d.W/2;break;case "end":d.textpath.style["v-text-align"]="right";d.bbx=-d.W/2;break;default:d.textpath.style["v-text-align"]="center",d.bbx=0}d.textpath.style["v-text-kern"]=!0}},y=function(e,f,g){e.attrs=e.attrs||{};var h=(e.attrs,Math.pow),k="linear",l=".5 .5";
if(e.attrs.gradient=f,f=a(f).replace(c._radial_gradient,function(a,c,e){return k="radial",c&&e&&(c=b(c),e=b(e),.25<h(c-.5,2)+h(e-.5,2)&&(e=d.sqrt(.25-h(c-.5,2))*(2*(.5<e)-1)+.5),l=c+" "+e),""}),f=f.split(/\s*\-\s*/),"linear"==k){var m=f.shift();if(m=-b(m),isNaN(m))return null}f=c._parseDots(f);if(!f)return null;if(e=e.shape||e.node,f.length){e.removeChild(g);g.on=!0;g.method="none";g.color=f[0].color;g.color2=f[f.length-1].color;for(var n=[],p=0,q=f.length;q>p;p++)f[p].offset&&n.push(f[p].offset+
" "+f[p].color);g.colors=n.length?n.join():"0% "+g.color;"radial"==k?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=l,g.angle=0):(g.type="gradient",g.angle=(270-m)%360);e.appendChild(g)}return 1},z=function(a,b){this[0]=this.node=a;a.raphael=!0;this.id=c._oid++;a.raphaelid=this.id;this.Y=this.X=0;this.attrs={};this.paper=b;this.matrix=c.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);
b.top=this;this.next=null},C=c.el;z.prototype=C;C.constructor=z;C.transform=function(b){if(null==b)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:"";e&&(d=b=a(b).replace(/\.{3}|\u2026/g,this._.transform||""));c._extractTransform(this,f+b);var g,e=this.matrix.clone(),f=this.skew;b=this.node;var h=~a(this.attrs.fill).indexOf("-"),k=!a(this.attrs.fill).indexOf("url(");(e.translate(1,1),k||h||"image"==this.type)?(f.matrix="1 0 0 1",f.offset="0 0",
g=e.split(),h&&g.noRotation||!g.isSimple)?(b.style.filter=e.toFilter(),e=this.getBBox(),f=this.getBBox(1),g=e.x-f.x,e=e.y-f.y,b.coordorigin=-21600*g+" "+-21600*e,u(this,1,1,g,e,0)):(b.style.filter="",u(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate)):(b.style.filter="",f.matrix=a(e),f.offset=e.offset());return d&&(this._.transform=d),this};C.rotate=function(c,d,e){if(this.removed)return this;if(null!=c){if(c=a(c).split(k),c.length-1&&(d=b(c[1]),e=b(c[2])),c=b(c[0]),null==e&&(d=e),null==d||null==e)e=this.getBBox(1),
d=e.x+e.width/2,e=e.y+e.height/2;return this._.dirtyT=1,this.transform(this._.transform.concat([["r",c,d,e]])),this}};C.translate=function(c,d){return this.removed?this:(c=a(c).split(k),c.length-1&&(d=b(c[1])),c=b(c[0])||0,d=+d||0,this._.bbox&&(this._.bbox.x+=c,this._.bbox.y+=d),this.transform(this._.transform.concat([["t",c,d]])),this)};C.scale=function(c,d,e,f){if(this.removed)return this;if(c=a(c).split(k),c.length-1&&(d=b(c[1]),e=b(c[2]),f=b(c[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),c=b(c[0]),
null==d&&(d=c),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",c,d,e,f]])),this._.dirtyT=1,this};C.hide=function(){return!this.removed&&(this.node.style.display="none"),this};C.show=function(){return!this.removed&&(this.node.style.display=""),this};C._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};C.remove=function(){if(!this.removed&&
this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);c.eve.unbind("raphael.*.*."+this.id);c._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;this.removed=!0}};C.attr=function(a,b){if(this.removed)return this;if(null==a){var d={},e;for(e in this.attrs)this.attrs.hasOwnProperty(e)&&(d[e]=this.attrs[e]);return d.gradient&&"none"==
d.fill&&(d.fill=d.gradient)&&delete d.gradient,d.transform=this._.transform,d}if(null==b&&c.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;e=a.split(k);for(var d={},f=0,g=e.length;g>f;f++)a=e[f],d[a]=a in this.attrs?this.attrs[a]:c.is(this.paper.customAttributes[a],"function")?this.paper.customAttributes[a].def:c._availableAttrs[a];return g-1?d:d[e[0]]}if(this.attrs&&null==b&&c.is(a,"array")){d={};f=0;for(g=a.length;g>f;f++)d[a[f]]=this.attr(a[f]);
return d}null!=b&&(d={},d[a]=b);null==b&&c.is(a,"object")&&(d=a);for(f in d)l("raphael.attr."+f+"."+this.id,this,d[f]);if(d){for(f in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(f)&&d.hasOwnProperty(f)&&c.is(this.paper.customAttributes[f],"function"))for(g in e=this.paper.customAttributes[f].apply(this,[].concat(d[f])),this.attrs[f]=d[f],e)e.hasOwnProperty(g)&&(d[g]=e[g]);d.text&&"text"==this.type&&(this.textpath.string=d.text);x(this,d)}return this};C.toFront=function(){return!this.removed&&
this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&c._tofront(this,this.paper),this};C.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),c._toback(this,this.paper)),this)};C.insertAfter=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[a.length-1]),a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node),
c._insertafter(this,a,this.paper),this)};C.insertBefore=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[0]),a.node.parentNode.insertBefore(this.node,a.node),c._insertbefore(this,a,this.paper),this)};C.blur=function(a){var b=this.node.runtimeStyle,d=b.filter;return d=d.replace(p,""),0!==+a?(this.attrs.blur=a,b.filter=d+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")",b.margin=c.format("-{0}px 0 0 -{0}px",e(+a||1.5))):(b.filter=d,b.margin=0,delete this.attrs.blur),
this};c._engine.path=function(a,b){var c=A("shape");c.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";c.coordsize="21600 21600";c.coordorigin=b.coordorigin;var d=new z(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a);d.type="path";d.path=[];d.Path="";x(d,e);b.canvas.appendChild(c);e=A("skew");return e.on=!0,c.appendChild(e),d.skew=e,d.transform(""),d};c._engine.rect=function(a,b,d,e,f,g){var h=c._rectPath(b,d,e,f,g);a=a.path(h);var k=a.attrs;return a.X=k.x=b,a.Y=k.y=d,a.W=k.width=
e,a.H=k.height=f,k.r=g,k.path=h,a.type="rect",a};c._engine.ellipse=function(a,b,c,d,e){a=a.path();a.attrs;return a.X=b-d,a.Y=c-e,a.W=2*d,a.H=2*e,a.type="ellipse",x(a,{cx:b,cy:c,rx:d,ry:e}),a};c._engine.circle=function(a,b,c,d){a=a.path();a.attrs;return a.X=b-d,a.Y=c-d,a.W=a.H=2*d,a.type="circle",x(a,{cx:b,cy:c,r:d}),a};c._engine.image=function(a,b,d,e,f,g){var h=c._rectPath(d,e,f,g);a=a.path(h).attr({stroke:"none"});var k=a.attrs,l=a.node,m=l.getElementsByTagName("fill")[0];return k.src=b,a.X=k.x=
d,a.Y=k.y=e,a.W=k.width=f,a.H=k.height=g,k.path=h,a.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=b,m.type="tile",a._.fillpos=[d,e],a._.fillsize=[f,g],l.appendChild(m),u(a,1,1,0,0,0),a};c._engine.text=function(b,d,f,g){var h=A("shape"),k=A("path"),l=A("textpath");d=d||0;f=f||0;g=g||"";k.v=c.format("m{0},{1}l{2},{1}",e(21600*d),e(21600*f),e(21600*d)+1);k.textpathok=!0;l.string=a(g);l.on=!0;h.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";h.coordsize="21600 21600";
h.coordorigin="0 0";var m=new z(h,b),n={fill:"#000",stroke:"none",font:c._availableAttrs.font,text:g};m.shape=h;m.path=k;m.textpath=l;m.type="text";m.attrs.text=a(g);m.attrs.x=d;m.attrs.y=f;m.attrs.w=1;m.attrs.h=1;x(m,n);h.appendChild(l);h.appendChild(k);b.canvas.appendChild(h);b=A("skew");return b.on=!0,h.appendChild(b),m.skew=b,m.transform(""),m};c._engine.setSize=function(a,b){var d=this.canvas.style;return this.width=a,this.height=b,a==+a&&(a+="px"),b==+b&&(b+="px"),d.width=a,d.height=b,d.clip=
"rect(0 "+a+" "+b+" 0)",this._viewBox&&c._engine.setViewBox.apply(this,this._viewBox),this};c._engine.setViewBox=function(a,b,d,e,g){c.eve("raphael.setViewBox",this,this._viewBox,[a,b,d,e,g]);var h,k,l=this.width,m=this.height,n=1/f(d/l,e/m);return g&&(h=m/e,k=l/d,l>d*h&&(a-=(l-d*h)/2/h),m>e*k&&(b-=(m-e*k)/2/k)),this._viewBox=[a,b,d,e,!!g],this._viewBoxShift={dx:-a,dy:-b,scale:n},this.forEach(function(a){a.transform("...")}),this};var A;c._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml",
"behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){A=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};c._engine.initWin(c._g.win);c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a.container,d=a.height,e=a.width,f=a.x,a=a.y;if(!b)throw Error("VML container not found.");var g=new c._Paper,h=g.canvas=
c._g.doc.createElement("div"),k=h.style;return f=f||0,a=a||0,e=e||512,d=d||342,g.width=e,g.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),g.coordsize="21600000 21600000",g.coordorigin="0 0",g.span=c._g.doc.createElement("span"),g.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",h.appendChild(g.span),k.cssText=c.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==b?(c._g.doc.body.appendChild(h),
k.left=f+"px",k.top=a+"px",k.position="absolute"):b.firstChild?b.insertBefore(h,b.firstChild):b.appendChild(h),g.renderfix=function(){},g};c.prototype.clear=function(){c.eve("raphael.clear",this);this.canvas.innerHTML="";this.span=c._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};c.prototype.remove=function(){c.eve("raphael.remove",this);
this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;return!0};var B=c.st,D;for(D in C)C.hasOwnProperty(D)&&!B.hasOwnProperty(D)&&(B[D]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(D))}}(),C?B.win.Raphael=c:Raphael=c,c});(function(a){function b(a,b){function c(a,b){var d={},e;a.pageX||a.pageY?(d.x=a.pageX,d.y=a.pageY):(d.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop);if(b){if("svg"===b.tagName){e=b.getScreenCTM();var f=b.createSVGPoint();f.x=b.viewBox.baseVal.x;f.y=b.viewBox.baseVal.y;f=f.matrixTransform(e);e={left:f.x,top:f.y}}else e=$(b).offset();d.x-=e.left;d.y-=e.top}return d}function g(b,c){return{dx:(c.x-b.x)*
a._vbSize,dy:(c.y-b.y)*a._vbSize}}function k(g,k){var l,m,n,q,r,u;g.preventDefault&&g.preventDefault();g.returnValue=!1;l=a.width/a.height;k=70*k*b.mouseWheelSensitivity;n=c(g,a.canvas);q=k*n.x/a.height;n=k*n.y/a.height;m=1-k*l/s[2];l=s[2]-k*l;r=s[3]-k;u=a.width/l;b.maxZoomFactor&&u>b.maxZoomFactor||b.minZoomFactor&&u<b.minZoomFactor||(s[0]+=q,s[1]+=n,s[2]=l,s[3]=r,b.scaleStrokeWidth&&a.forEach(function(a){var b=parseFloat(a.attr("stroke-width"));a.attr("stroke-width",b/m)}),a._zpZoomFactor=u,a.setViewBox(s[0],
s[1],s[2],s[3]))}function m(b){"pan"===l&&(b=c(b),b=g(n,b),a.setViewBox(s[0]-b.dx,s[1]-b.dy,s[2],s[3]))}function r(a){1===a.button&&(l="pan",n=c(a))}function q(a){"pan"===l&&(a=c(a),a=g(n,a),s[0]-=a.dx,s[1]-=a.dy,l=n=null)}var l,n,s;if(a._zpInitialized)return a;l=n=null;a._vbSize||a.setViewBox(0,0,a.width,a.height);a._zpZoomFactor=a.width/a._viewBox[2];a._zpResetViewBox=_.clone(a._viewBox);s=_.clone(a._viewBox);(function(a){a=$(a);b.pan&&(a.bind("mousedown",r),$(document).bind("mousemove",m),$(document).bind("mouseup",
q),b.stopPanOnMouseOut&&a.bind("mouseout",q));b.zoom&&a.bind("mousewheel",k)})(a.canvas);a.unZP=function(){var c=$(a.canvas);b.pan&&(c.unbind("mousedown",r),$(document).unbind("mousemove",m),$(document).unbind("mouseup",q),b.stopPanOnMouseOut&&c.unbind("mouseout",q));b.zoom&&c.unbind("mousewheel",k);delete a._zpZoomFactor;delete a._zpResetViewBox;delete a._zpInitialized;delete a.unZP};a._zpInitialized=!0;return a}var c={pan:!0,stopPanOnMouseOut:!1,zoom:!0,maxZoomFactor:5,minZoomFactor:.5,mouseWheelSensitivity:1,
scaleStrokeWidth:!0};a.fn.ZP=function(a){return b(this,_.defaults(a||{},c))}})(Raphael);var dragging=!1;
(function(a,b){"function"===typeof define&&define.amd?define(["raphael"],function(c){return b(c||a.Raphael)}):b(Raphael)})(this,function(a){a.fn.freeTransform=function(a,c,d){function e(a){("set"===a.type?a.items:[a]).map(function(a){"set"===a.type?e(a):h.items.push({el:a,attrs:{rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},transformString:a.matrix.toTransformString()})})}function f(){var a=h.attrs.rotate*Math.PI/180,b=(h.attrs.rotate+90)*Math.PI/180,c=h.attrs.size.x/2*h.attrs.scale.x,d=h.attrs.size.y/
2*h.attrs.scale.y,e=[];[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}].map(function(f){e.push({x:h.attrs.center.x+h.attrs.translate.x+f.x*c*Math.cos(a)+f.y*d*Math.cos(b),y:h.attrs.center.y+h.attrs.translate.y+f.x*c*Math.sin(a)+f.y*d*Math.sin(b)})});return e}function g(){var a=/^([0-9]+)%$/.exec(n.width),b=/^([0-9]+)%$/.exec(n.height);return{x:a?n.canvas.clientWidth||n.canvas.parentNode.clientWidth*parseInt(a[1],10)*.01:n.canvas.clientWidth||n.width,y:b?n.canvas.clientHeight||n.canvas.parentNode.clientHeight*
parseInt(b[1],10)*.01:n.canvas.clientHeight||n.height}}function k(a){if(a&&h.opts.snap.drag){var b=a.x,c=a.y,d={x:0,y:0},e=0,f=0;[0,1].map(function(){d.x=b-Math.round(b/h.opts.snap.drag)*h.opts.snap.drag;d.y=c-Math.round(c/h.opts.snap.drag)*h.opts.snap.drag;Math.abs(d.x)<=h.opts.snapDist.drag&&(e=d.x);Math.abs(d.y)<=h.opts.snapDist.drag&&(f=d.y);b+=a.width-e;c+=a.height-f});h.attrs.translate.x-=e;h.attrs.translate.y-=f}d=Math.abs(h.attrs.rotate%h.opts.snap.rotate);d=Math.min(d,h.opts.snap.rotate-
d);d<h.opts.snapDist.rotate&&(h.attrs.rotate=Math.round(h.attrs.rotate/h.opts.snap.rotate)*h.opts.snap.rotate);d={x:Math.abs(h.attrs.scale.x*h.attrs.size.x%h.opts.snap.scale),y:Math.abs(h.attrs.scale.y*h.attrs.size.x%h.opts.snap.scale)};d={x:Math.min(d.x,h.opts.snap.scale-d.x),y:Math.min(d.y,h.opts.snap.scale-d.y)};d.x<h.opts.snapDist.scale&&(h.attrs.scale.x=Math.round(h.attrs.scale.x*h.attrs.size.x/h.opts.snap.scale)*h.opts.snap.scale/h.attrs.size.x);d.y<h.opts.snapDist.scale&&(h.attrs.scale.y=Math.round(h.attrs.scale.y*
h.attrs.size.y/h.opts.snap.scale)*h.opts.snap.scale/h.attrs.size.y);if(h.opts.range.rotate){var g=(360+h.attrs.rotate)%360;180<g&&(g-=360);g<h.opts.range.rotate[0]&&(h.attrs.rotate+=h.opts.range.rotate[0]-g);g>h.opts.range.rotate[1]&&(h.attrs.rotate+=h.opts.range.rotate[1]-g)}h.opts.range.scale&&(h.attrs.scale.x*h.attrs.size.x<h.opts.range.scale[0]&&(h.attrs.scale.x=h.opts.range.scale[0]/h.attrs.size.x),h.attrs.scale.y*h.attrs.size.y<h.opts.range.scale[0]&&(h.attrs.scale.y=h.opts.range.scale[0]/h.attrs.size.y),
h.attrs.scale.x*h.attrs.size.x>h.opts.range.scale[1]&&(h.attrs.scale.x=h.opts.range.scale[1]/h.attrs.size.x),h.attrs.scale.y*h.attrs.size.y>h.opts.range.scale[1]&&(h.attrs.scale.y=h.opts.range.scale[1]/h.attrs.size.y))}function m(){return{x:h.attrs.scale.x*h.attrs.size.x>=h.opts.range.scale[0]&&h.attrs.scale.x*h.attrs.size.x<=h.opts.range.scale[1],y:h.attrs.scale.y*h.attrs.size.y>=h.opts.range.scale[0]&&h.attrs.scale.y*h.attrs.size.y<=h.opts.range.scale[1]}}function r(a){"x"===a?h.attrs.scale.y=h.attrs.scale.x/
h.attrs.ratio:h.attrs.scale.x=h.attrs.scale.y*h.attrs.ratio}function q(a){var b,c={};for(b in a)c[b]="object"===typeof a[b]?q(a[b]):a[b];return c}function l(a){if(h.callback){var b=[];a.map(function(a,c){a&&b.push(a)});clearTimeout(t);t=setTimeout(function(){h.callback&&h.callback(h,b)},1)}}if(a.freeTransform)return a.freeTransform;Array.prototype.hasOwnProperty("map")||(Array.prototype.map=function(a,b){var c,d=[];for(c in this)this.hasOwnProperty(c)&&(d[c]=a.call(b,this[c],c,this));return d});Array.prototype.hasOwnProperty("indexOf")||
(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1});var n=this,s=a.getBBox(!0),h=a.freeTransform={attrs:{x:s.x,y:s.y,size:{y:s.width,x:s.height},center:{x:s.x+s.width/2,y:s.y+s.height/2},rotate:0,scale:{x:1,y:1},translate:{x:0,y:0},ratio:1},axes:null,bbox:null,callback:null,items:[],handles:{center:null,x:null,y:null},offset:{rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},opts:{animate:!1,attrs:{fill:"#fff",stroke:"#000"},boundary:{x:n._left||
0,y:n._top||0,width:null,height:null},distance:1.3,drag:!0,draw:!1,keepRatio:!1,range:{rotate:[-180,180],scale:[-99999,99999]},rotate:!0,scale:!0,snap:{rotate:0,scale:0,drag:0},snapDist:{rotate:0,scale:0,drag:7},size:5},subject:a};h.updateHandles=function(){if(h.handles.bbox||0<=h.opts.rotate.indexOf("self"))var a=f();var b={x:h.attrs.rotate*Math.PI/180,y:(h.attrs.rotate+90)*Math.PI/180},c={x:h.attrs.size.x/2*h.attrs.scale.x,y:h.attrs.size.y/2*h.attrs.scale.y};h.axes.map(function(a){if(h.handles[a]){var d=
h.attrs.center.x+h.attrs.translate.x+c[a]*h.opts.distance*Math.cos(b[a]),e=h.attrs.center.y+h.attrs.translate.y+c[a]*h.opts.distance*Math.sin(b[a]);n._viewBox&&(g(),g());h.handles[a].disc.attr({cx:d,cy:e});h.handles[a].line.toFront().attr({path:[["M",h.attrs.center.x+h.attrs.translate.x,h.attrs.center.y+h.attrs.translate.y],["L",h.handles[a].disc.attrs.cx,h.handles[a].disc.attrs.cy]]});h.handles[a].disc.toFront()}});if(h.bbox){h.bbox.toFront().attr({path:[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",
a[2].x,a[2].y],["L",a[3].x,a[3].y],["L",a[0].x,a[0].y]]});var d=[[-1,-1],[1,-1],[1,1],[-1,1],[0,-1],[1,0],[0,1],[-1,0]];h.handles.bbox&&h.handles.bbox.map(function(b,c){var e,f,g;b.isCorner?(e=a[c].x,f=a[c].y):(f=c%4,g=(f+1)%a.length,e=(a[f].x+a[g].x)/2,f=(a[f].y+a[g].y)/2);b.element.toFront().attr({x:e-(b.isCorner?h.opts.size.bboxCorners:h.opts.size.bboxSides),y:f-(b.isCorner?h.opts.size.bboxCorners:h.opts.size.bboxSides)}).transform("R"+h.attrs.rotate);b.x=d[c][0];b.y=d[c][1]})}h.circle&&h.circle.attr({cx:h.attrs.center.x+
h.attrs.translate.x,cy:h.attrs.center.y+h.attrs.translate.y,r:Math.max(c.x,c.y)*h.opts.distance});h.handles.center&&h.handles.center.disc.toFront().attr({cx:h.attrs.center.x+h.attrs.translate.x,cy:h.attrs.center.y+h.attrs.translate.y});0<=h.opts.rotate.indexOf("self")&&(c=Math.max(Math.sqrt(Math.pow(a[1].x-a[0].x,2)+Math.pow(a[1].y-a[0].y,2)),Math.sqrt(Math.pow(a[2].x-a[1].x,2)+Math.pow(a[2].y-a[1].y,2)))/2);return h};h.showHandles=function(){h.hideHandles();h.axes.map(function(a){h.handles[a]={};
h.handles[a].line=n.path(["M",h.attrs.center.x,h.attrs.center.y]).attr({stroke:h.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:.5});h.handles[a].disc=n.circle(h.attrs.center.x,h.attrs.center.y,h.opts.size.axes).attr(h.opts.attrs)});if(0<=h.opts.draw.indexOf("bbox")){h.bbox=n.path("").attr({stroke:h.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:.5});h.handles.bbox=[];var c,d;for(c=0<=h.opts.scale.indexOf("bboxCorners")?0:4;c<(-1===h.opts.scale.indexOf("bboxSides")?4:8);c++)d={},d.axis=c%2?
"x":"y",d.isCorner=4>c,d.element=n.rect(h.attrs.center.x,h.attrs.center.y,2*h.opts.size[d.isCorner?"bboxCorners":"bboxSides"],2*h.opts.size[d.isCorner?"bboxCorners":"bboxSides"]).attr(h.opts.attrs),h.handles.bbox[c]=d}-1!==h.opts.draw.indexOf("circle")&&(h.circle=n.circle(0,0,0).attr({stroke:h.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:.3}));-1!==h.opts.drag.indexOf("center")&&(h.handles.center={},h.handles.center.disc=n.circle(h.attrs.center.x,h.attrs.center.y,h.opts.size.center).attr(h.opts.attrs));
h.axes.map(function(a){if(h.handles[a]){var b=-1!==h.opts.rotate.indexOf("axis"+a.toUpperCase()),c=-1!==h.opts.scale.indexOf("axis"+a.toUpperCase());h.handles[a].disc.drag(function(d,e){h.o.viewBoxRatio&&(d*=h.o.viewBoxRatio.x,e*=h.o.viewBoxRatio.y);var f=d+h.handles[a].disc.ox,m=e+h.handles[a].disc.oy,n={x:0>h.o.scale.x,y:0>h.o.scale.y};if(b){var q=Math.atan2(m-h.o.center.y-h.o.translate.y,f-h.o.center.x-h.o.translate.x);h.attrs.rotate=180*q/Math.PI-("y"===a?90:0);n[a]&&(h.attrs.rotate-=180)}h.opts.boundary&&
(f=Math.max(Math.min(f,h.opts.boundary.x+(h.opts.boundary.width||g().x*(h.o.viewBoxRatio&&h.o.viewBoxRatio.x||1))),h.opts.boundary.x),m=Math.max(Math.min(m,h.opts.boundary.y+(h.opts.boundary.height||g().y*(h.o.viewBoxRatio&&h.o.viewBoxRatio.y||1))),h.opts.boundary.y));f=Math.sqrt(Math.pow(f-h.o.center.x-h.o.translate.x,2)+Math.pow(m-h.o.center.y-h.o.translate.y,2));c&&(h.attrs.scale[a]=f/(h.o.size[a]/2*h.opts.distance),n[a]&&(h.attrs.scale[a]*=-1));k();-1!==h.opts.keepRatio.indexOf("axis"+a.toUpperCase())?
r(a):h.attrs.ratio=h.attrs.scale.x/h.attrs.scale.y;h.attrs.scale.x&&h.attrs.scale.y&&h.apply();l([b?"rotate":null,c?"scale":null])},function(){h.o=q(h.attrs);n._viewBox&&(h.o.viewBoxRatio={x:n._viewBox[2]/g().x,y:n._viewBox[3]/g().y});h.handles[a].disc.ox=this.attrs.cx;h.handles[a].disc.oy=this.attrs.cy;l([b?"rotate start":null,c?"scale start":null])},function(){l([b?"rotate end":null,c?"scale end":null])})}});0<=h.opts.draw.indexOf("bbox")&&(-1!==h.opts.scale.indexOf("bboxCorners")||-1!==h.opts.scale.indexOf("bboxSides"))&&
h.handles.bbox.map(function(a){a.element.drag(function(b,c){h.o.viewBoxRatio&&(b*=h.o.viewBoxRatio.x,c*=h.o.viewBoxRatio.y);var d,e,f,g,n,s=q(h.attrs);d=h.o.rotate.sin;e=h.o.rotate.cos;g=b*d+c*e;f=(b*e-c*d)*Math.abs(a.x);g*=Math.abs(a.y);h.attrs.translate={x:h.o.translate.x+(f*e+g*d)/2,y:h.o.translate.y+(f*-d+g*e)/2};g=h.o.handlePos.cx+b-h.attrs.center.x-h.attrs.translate.x;n=h.o.handlePos.cy+c-h.attrs.center.y-h.attrs.translate.y;f=g*e-n*d;g=g*d+n*e;if(a.isCorner&&-1!==h.opts.keepRatio.indexOf("bboxCorners")){n=
h.attrs.size.x*h.attrs.scale.x/(h.attrs.size.y*h.attrs.scale.y);var t=1/n*a.x*f,v=g*a.y*n;v>t*n?f=v*a.x:g=t*a.y}h.attrs.scale={x:2*f*a.x/h.o.size.x||h.attrs.scale.x,y:2*g*a.y/h.o.size.y||h.attrs.scale.y};m().x&&m().y||(h.attrs=s);k();if(a.isCorner&&-1!==h.opts.keepRatio.indexOf("bboxCorners")||!a.isCorner&&-1!==h.opts.keepRatio.indexOf("bboxSides"))r(a.axis),f=(h.attrs.scale.x-h.o.scale.x)*h.o.size.x*a.x,s=(h.attrs.scale.y-h.o.scale.y)*h.o.size.y*a.y,h.attrs.translate.x=h.o.translate.x+(f*e+s*d)/
2,h.attrs.translate.y=h.o.translate.y+(-f*d+s*e)/2;h.attrs.ratio=h.attrs.scale.x/h.attrs.scale.y;l(["scale"]);h.apply()},function(){var b=(360-h.attrs.rotate)%360/180*Math.PI,c=a.element.attr(["x","y"]);h.o=q(h.attrs);h.o.handlePos={cx:c.x+h.opts.size[a.isCorner?"bboxCorners":"bboxSides"],cy:c.y+h.opts.size[a.isCorner?"bboxCorners":"bboxSides"]};h.o.rotate={sin:Math.sin(b),cos:Math.cos(b)};n._viewBox&&(h.o.viewBoxRatio={x:n._viewBox[2]/g().x,y:n._viewBox[3]/g().y});l(["scale start"])},function(){l(["scale end"])})});
c=[];0<=h.opts.drag.indexOf("self")&&-1===h.opts.scale.indexOf("self")&&-1===h.opts.rotate.indexOf("self")&&c.push(a);0<=h.opts.drag.indexOf("center")&&c.push(h.handles.center.disc);c.map(function(c){c.drag(function(a,b){dragging=!0;h.o.viewBoxRatio&&(a*=h.o.viewBoxRatio.x,b*=h.o.viewBoxRatio.y);h.attrs.translate.x=h.o.translate.x+a;h.attrs.translate.y=h.o.translate.y+b;var c=q(h.o.bbox);c.x+=a;c.y+=b;k(c);l(["drag"]);h.apply()},function(){h.o=q(h.attrs);h.opts.snap.drag&&(h.o.bbox=a.getBBox());n._viewBox&&
(h.o.viewBoxRatio={x:n._viewBox[2]/g().x,y:n._viewBox[3]/g().y});h.axes.map(function(a){h.handles[a]&&(h.handles[a].disc.ox=h.handles[a].disc.attrs.cx,h.handles[a].disc.oy=h.handles[a].disc.attrs.cy)});l(["drag start"])},function(){l(["drag end"])})});var e=0<=h.opts.rotate.indexOf("self"),f=0<=h.opts.scale.indexOf("self");(e||f)&&a.drag(function(a,b,c,d){e&&(a=Math.atan2(d-h.o.center.y-h.o.translate.y,c-h.o.center.x-h.o.translate.x),h.attrs.rotate=h.o.rotate+180*a/Math.PI-h.o.deg);a=0>h.o.scale.x;
b=0>h.o.scale.y;f&&(c=Math.sqrt(Math.pow(c-h.o.center.x-h.o.translate.x,2)+Math.pow(d-h.o.center.y-h.o.translate.y,2)),h.attrs.scale.x=h.attrs.scale.y=(a?-1:1)*h.o.scale.x+(c-h.o.radius)/(h.o.size.x/2),a&&(h.attrs.scale.x*=-1),b&&(h.attrs.scale.y*=-1));k();h.apply();l([e?"rotate":null,f?"scale":null])},function(a,b){h.o=q(h.attrs);h.o.deg=180*Math.atan2(b-h.o.center.y-h.o.translate.y,a-h.o.center.x-h.o.translate.x)/Math.PI;h.o.radius=Math.sqrt(Math.pow(a-h.o.center.x-h.o.translate.x,2)+Math.pow(b-
h.o.center.y-h.o.translate.y,2));n._viewBox&&(h.o.viewBoxRatio={x:n._viewBox[2]/g().x,y:n._viewBox[3]/g().y});l([e?"rotate start":null,f?"scale start":null])},function(){l([e?"rotate end":null,f?"scale end":null])});h.updateHandles();return h};h.hideHandles=function(a){a=a||{};void 0===a.undrag&&(a.undrag=!0);a.undrag&&h.items.map(function(a){a.el.undrag()});h.handles.center&&(h.handles.center.disc.remove(),h.handles.center=null);["x","y"].map(function(a){h.handles[a]&&(h.handles[a].disc.remove(),
h.handles[a].line.remove(),h.handles[a]=null)});h.bbox&&(h.bbox.remove(),h.bbox=null,h.handles.bbox&&(h.handles.bbox.map(function(a){a.element.remove()}),h.handles.bbox=null));h.circle&&(h.circle.remove(),h.circle=null);return h};h.setOpts=function(a,b){void 0!==b&&(h.callback="function"===typeof b?b:!1);var c,d;for(c in a)if(a[c]&&a[c].constructor===Object)for(d in!1===h.opts[c]&&(h.opts[c]={}),a[c])a[c].hasOwnProperty(d)&&(h.opts[c][d]=a[c][d]);else h.opts[c]=a[c];!0===h.opts.animate&&(h.opts.animate=
{delay:700,easing:"linear"});!0===h.opts.drag&&(h.opts.drag=["center","self"]);!0===h.opts.keepRatio&&(h.opts.keepRatio=["bboxCorners","bboxSides"]);!0===h.opts.rotate&&(h.opts.rotate=["axisX","axisY"]);!0===h.opts.scale&&(h.opts.scale=["axisX","axisY","bboxCorners","bboxSides"]);["drag","draw","keepRatio","rotate","scale"].map(function(a){!1===h.opts[a]&&(h.opts[a]=[])});h.axes=[];(0<=h.opts.rotate.indexOf("axisX")||0<=h.opts.scale.indexOf("axisX"))&&h.axes.push("x");(0<=h.opts.rotate.indexOf("axisY")||
0<=h.opts.scale.indexOf("axisY"))&&h.axes.push("y");["drag","rotate","scale"].map(function(a){h.opts.snapDist[a]||(h.opts.snapDist[a]=h.opts.snap[a])});h.opts.range={rotate:[parseFloat(h.opts.range.rotate[0]),parseFloat(h.opts.range.rotate[1])],scale:[parseFloat(h.opts.range.scale[0]),parseFloat(h.opts.range.scale[1])]};h.opts.snap={drag:parseFloat(h.opts.snap.drag),rotate:parseFloat(h.opts.snap.rotate),scale:parseFloat(h.opts.snap.scale)};h.opts.snapDist={drag:parseFloat(h.opts.snapDist.drag),rotate:parseFloat(h.opts.snapDist.rotate),
scale:parseFloat(h.opts.snapDist.scale)};"string"===typeof h.opts.size&&(h.opts.size=parseFloat(h.opts.size));isNaN(h.opts.size)||(h.opts.size={axes:h.opts.size,bboxCorners:h.opts.size,bboxSides:h.opts.size,center:h.opts.size});h.showHandles();l(["init"]);return h};h.setOpts(c,d);h.apply=function(){h.items.map(function(a,b){var c=h.attrs.center.x+h.offset.translate.x,d=h.attrs.center.y+h.offset.translate.y,e=h.attrs.rotate-h.offset.rotate,f=h.attrs.scale.x/h.offset.scale.x,g=h.attrs.scale.y/h.offset.scale.y,
k=h.attrs.translate.x-h.offset.translate.x,m=h.attrs.translate.y-h.offset.translate.y;h.opts.animate?(l(["animate start"]),a.el.animate({transform:["R",e,c,d,"S",f,g,c,d,"T",k,m]+h.items[b].transformString},h.opts.animate.delay,h.opts.animate.easing,function(){l(["animate end"]);h.updateHandles()})):(a.el.transform(["R",e,c,d,"S",f,g,c,d,"T",k,m]+h.items[b].transformString),l(["apply"]),h.updateHandles())});return h};h.unplug=function(){var c=h.attrs;h.hideHandles();delete a.freeTransform;return c};
e(a);h.items.map(function(a,b){a.el._&&a.el._.transform&&"object"===typeof a.el._.transform&&a.el._.transform.map(function(a){if(a[0])switch(a[0].toUpperCase()){case "T":h.items[b].attrs.translate.x+=a[1];h.items[b].attrs.translate.y+=a[2];break;case "S":h.items[b].attrs.scale.x*=a[1];h.items[b].attrs.scale.y*=a[2];break;case "R":h.items[b].attrs.rotate+=a[1]}})});"set"!==a.type&&(h.attrs.rotate=h.items[0].attrs.rotate,h.attrs.scale=h.items[0].attrs.scale,h.attrs.translate=h.items[0].attrs.translate,
h.items[0].attrs={rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},h.items[0].transformString="");h.attrs.ratio=h.attrs.scale.x/h.attrs.scale.y;var t=!1;h.updateHandles();return h}});(function(){function a(){var a="{}";if("userDataBehavior"==t){s.load("jStorage");try{a=s.getAttribute("jStorage")}catch(b){}try{x=s.getAttribute("jStorage_update")}catch(c){}n.jStorage=a}e();k();m()}function b(){var b;clearTimeout(w);w=setTimeout(function(){if("localStorage"==t||"globalStorage"==t)b=n.jStorage_update;else if("userDataBehavior"==t){s.load("jStorage");try{b=s.getAttribute("jStorage_update")}catch(d){}}if(b&&b!=x){x=b;var e=q.parse(q.stringify(l.__jstorage_meta.CRC32)),f;a();f=q.parse(q.stringify(l.__jstorage_meta.CRC32));
var g,h=[],k=[];for(g in e)e.hasOwnProperty(g)&&(f[g]?e[g]!=f[g]&&"2."==String(e[g]).substr(0,2)&&h.push(g):k.push(g));for(g in f)f.hasOwnProperty(g)&&(e[g]||h.push(g));c(h,"updated");c(k,"deleted")}},25)}function c(a,b){a=[].concat(a||[]);var c,d,e,f;if("flushed"==b){a=[];for(c in v)v.hasOwnProperty(c)&&a.push(c);b="deleted"}c=0;for(e=a.length;c<e;c++){if(v[a[c]])for(d=0,f=v[a[c]].length;d<f;d++)v[a[c]][d](a[c],b);if(v["*"])for(d=0,f=v["*"].length;d<f;d++)v["*"][d](a[c],b)}}function d(){var a=(+new Date).toString();
if("localStorage"==t||"globalStorage"==t)try{n.jStorage_update=a}catch(c){t=!1}else"userDataBehavior"==t&&(s.setAttribute("jStorage_update",a),s.save("jStorage"));b()}function e(){if(n.jStorage)try{l=q.parse(String(n.jStorage))}catch(a){n.jStorage="{}"}else n.jStorage="{}";h=n.jStorage?String(n.jStorage).length:0;l.__jstorage_meta||(l.__jstorage_meta={});l.__jstorage_meta.CRC32||(l.__jstorage_meta.CRC32={})}function f(){if(l.__jstorage_meta.PubSub){for(var a=+new Date-2E3,b=0,c=l.__jstorage_meta.PubSub.length;b<
c;b++)if(l.__jstorage_meta.PubSub[b][0]<=a){l.__jstorage_meta.PubSub.splice(b,l.__jstorage_meta.PubSub.length-b);break}l.__jstorage_meta.PubSub.length||delete l.__jstorage_meta.PubSub}try{n.jStorage=q.stringify(l),s&&(s.setAttribute("jStorage",n.jStorage),s.save("jStorage")),h=n.jStorage?String(n.jStorage).length:0}catch(d){}}function g(a){if("string"!=typeof a&&"number"!=typeof a)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==a)throw new TypeError("Reserved key name");
return!0}function k(){var a,b,e,g,h=Infinity,m=!1,n=[];clearTimeout(u);if(l.__jstorage_meta&&"object"==typeof l.__jstorage_meta.TTL){a=+new Date;e=l.__jstorage_meta.TTL;g=l.__jstorage_meta.CRC32;for(b in e)e.hasOwnProperty(b)&&(e[b]<=a?(delete e[b],delete g[b],delete l[b],m=!0,n.push(b)):e[b]<h&&(h=e[b]));Infinity!=h&&(u=setTimeout(k,Math.min(h-a,2147483647)));m&&(f(),d(),c(n,"deleted"))}}function m(){var a;if(l.__jstorage_meta.PubSub){var b,c=y,d=[];for(a=l.__jstorage_meta.PubSub.length-1;0<=a;a--)b=
l.__jstorage_meta.PubSub[a],b[0]>y&&(c=b[0],d.unshift(b));for(a=d.length-1;0<=a;a--){b=d[a][1];var e=d[a][2];if(A[b])for(var f=0,g=A[b].length;f<g;f++)try{A[b][f](b,q.parse(q.stringify(e)))}catch(h){}}y=c}}var r=window.jQuery||window.$||(window.$={}),q={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(a){return String(a).evalJSON()}||r.parseJSON||r.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||r.toJSON};if("function"!==
typeof q.parse||"function"!==typeof q.stringify)throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var l={__jstorage_meta:{CRC32:{}}},n={jStorage:"{}"},s=null,h=0,t=!1,v={},w=!1,x=0,A={},y=+new Date,u,B={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1},encode:function(a){if(!this.isXML(a))return!1;try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(c){}}return!1},
decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};if(!b)return!1;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:!1}};r.jStorage={version:"0.4.12",set:function(a,b,d){g(a);d=d||{};if("undefined"==typeof b)return this.deleteKey(a),b;if(B.isXML(b))b={_is_xml:!0,xml:B.encode(b)};else{if("function"==typeof b)return;
b&&"object"==typeof b&&(b=q.parse(q.stringify(b)))}l[a]=b;for(var e=l.__jstorage_meta.CRC32,f=q.stringify(b),h=f.length,k=2538058380^h,m=0,n;4<=h;)n=f.charCodeAt(m)&255|(f.charCodeAt(++m)&255)<<8|(f.charCodeAt(++m)&255)<<16|(f.charCodeAt(++m)&255)<<24,n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>24,n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16),k=1540483477*(k&65535)+((1540483477*(k>>>16)&65535)<<16)^n,h-=4,++m;switch(h){case 3:k^=(f.charCodeAt(m+2)&255)<<16;case 2:k^=
(f.charCodeAt(m+1)&255)<<8;case 1:k^=f.charCodeAt(m)&255,k=1540483477*(k&65535)+((1540483477*(k>>>16)&65535)<<16)}k^=k>>>13;k=1540483477*(k&65535)+((1540483477*(k>>>16)&65535)<<16);e[a]="2."+((k^k>>>15)>>>0);this.setTTL(a,d.TTL||0);c(a,"updated");return b},get:function(a,b){g(a);return a in l?l[a]&&"object"==typeof l[a]&&l[a]._is_xml?B.decode(l[a].xml):l[a]:"undefined"==typeof b?null:b},deleteKey:function(a){g(a);return a in l?(delete l[a],"object"==typeof l.__jstorage_meta.TTL&&a in l.__jstorage_meta.TTL&&
delete l.__jstorage_meta.TTL[a],delete l.__jstorage_meta.CRC32[a],f(),d(),c(a,"deleted"),!0):!1},setTTL:function(a,b){var c=+new Date;g(a);b=Number(b)||0;return a in l?(l.__jstorage_meta.TTL||(l.__jstorage_meta.TTL={}),0<b?l.__jstorage_meta.TTL[a]=c+b:delete l.__jstorage_meta.TTL[a],f(),k(),d(),!0):!1},getTTL:function(a){var b=+new Date;g(a);return a in l&&l.__jstorage_meta.TTL&&l.__jstorage_meta.TTL[a]?(a=l.__jstorage_meta.TTL[a]-b)||0:0},flush:function(){l={__jstorage_meta:{CRC32:{}}};f();d();c(null,
"flushed");return!0},storageObj:function(){function a(){}a.prototype=l;return new a},index:function(){var a=[],b;for(b in l)l.hasOwnProperty(b)&&"__jstorage_meta"!=b&&a.push(b);return a},storageSize:function(){return h},currentBackend:function(){return t},storageAvailable:function(){return!!t},listenKeyChange:function(a,b){g(a);v[a]||(v[a]=[]);v[a].push(b)},stopListening:function(a,b){g(a);if(v[a])if(b)for(var c=v[a].length-1;0<=c;c--)v[a][c]==b&&v[a].splice(c,1);else delete v[a]},subscribe:function(a,
b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");A[a]||(A[a]=[]);A[a].push(b)},publish:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");l.__jstorage_meta||(l.__jstorage_meta={});l.__jstorage_meta.PubSub||(l.__jstorage_meta.PubSub=[]);l.__jstorage_meta.PubSub.unshift([+new Date,a,b]);f();d()},reInit:function(){a()},noConflict:function(a){delete window.$.jStorage;a&&(window.jStorage=this);return this}};(function(){var a=!1;if("localStorage"in
window)try{window.localStorage.setItem("_tmptest","tmpval"),a=!0,window.localStorage.removeItem("_tmptest")}catch(c){}if(a)try{window.localStorage&&(n=window.localStorage,t="localStorage",x=n.jStorage_update)}catch(d){}else if("globalStorage"in window)try{window.globalStorage&&(n="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],t="globalStorage",x=n.jStorage_update)}catch(f){}else if(s=document.createElement("link"),
s.addBehavior){s.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(s);try{s.load("jStorage")}catch(g){s.setAttribute("jStorage","{}"),s.save("jStorage"),s.load("jStorage")}a="{}";try{a=s.getAttribute("jStorage")}catch(h){}try{x=s.getAttribute("jStorage_update")}catch(l){}n.jStorage=a;t="userDataBehavior"}else{s=null;return}e();k();"localStorage"==t||"globalStorage"==t?"addEventListener"in window?window.addEventListener("storage",b,!1):document.attachEvent("onstorage",
b):"userDataBehavior"==t&&setInterval(b,1E3);m();"addEventListener"in window&&window.addEventListener("pageshow",function(a){a.persisted&&b()},!1)})()})();